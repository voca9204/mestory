function T2(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function I2(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Z0={exports:{}},yu={},ev={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jo=Symbol.for("react.element"),S2=Symbol.for("react.portal"),k2=Symbol.for("react.fragment"),C2=Symbol.for("react.strict_mode"),R2=Symbol.for("react.profiler"),b2=Symbol.for("react.provider"),A2=Symbol.for("react.context"),N2=Symbol.for("react.forward_ref"),P2=Symbol.for("react.suspense"),D2=Symbol.for("react.memo"),O2=Symbol.for("react.lazy"),dm=Symbol.iterator;function j2(t){return t===null||typeof t!="object"?null:(t=dm&&t[dm]||t["@@iterator"],typeof t=="function"?t:null)}var tv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nv=Object.assign,rv={};function gi(t,e,n){this.props=t,this.context=e,this.refs=rv,this.updater=n||tv}gi.prototype.isReactComponent={};gi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};gi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function sv(){}sv.prototype=gi.prototype;function Td(t,e,n){this.props=t,this.context=e,this.refs=rv,this.updater=n||tv}var Id=Td.prototype=new sv;Id.constructor=Td;nv(Id,gi.prototype);Id.isPureReactComponent=!0;var fm=Array.isArray,iv=Object.prototype.hasOwnProperty,Sd={current:null},ov={key:!0,ref:!0,__self:!0,__source:!0};function av(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)iv.call(e,r)&&!ov.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),c=0;c<l;c++)u[c]=arguments[c+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Jo,type:t,key:i,ref:o,props:s,_owner:Sd.current}}function M2(t,e){return{$$typeof:Jo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function kd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Jo}function L2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var pm=/\/+/g;function pc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?L2(""+t.key):e.toString(36)}function sl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Jo:case S2:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+pc(o,0):r,fm(s)?(n="",t!=null&&(n=t.replace(pm,"$&/")+"/"),sl(s,e,n,"",function(c){return c})):s!=null&&(kd(s)&&(s=M2(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(pm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",fm(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+pc(i,l);o+=sl(i,e,n,u,s)}else if(u=j2(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+pc(i,l++),o+=sl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ja(t,e,n){if(t==null)return t;var r=[],s=0;return sl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function V2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Tt={current:null},il={transition:null},F2={ReactCurrentDispatcher:Tt,ReactCurrentBatchConfig:il,ReactCurrentOwner:Sd};function lv(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:ja,forEach:function(t,e,n){ja(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ja(t,function(){e++}),e},toArray:function(t){return ja(t,function(e){return e})||[]},only:function(t){if(!kd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ne.Component=gi;ne.Fragment=k2;ne.Profiler=R2;ne.PureComponent=Td;ne.StrictMode=C2;ne.Suspense=P2;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=F2;ne.act=lv;ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=nv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Sd.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)iv.call(e,u)&&!ov.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var c=0;c<u;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Jo,type:t.type,key:s,ref:i,props:r,_owner:o}};ne.createContext=function(t){return t={$$typeof:A2,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:b2,_context:t},t.Consumer=t};ne.createElement=av;ne.createFactory=function(t){var e=av.bind(null,t);return e.type=t,e};ne.createRef=function(){return{current:null}};ne.forwardRef=function(t){return{$$typeof:N2,render:t}};ne.isValidElement=kd;ne.lazy=function(t){return{$$typeof:O2,_payload:{_status:-1,_result:t},_init:V2}};ne.memo=function(t,e){return{$$typeof:D2,type:t,compare:e===void 0?null:e}};ne.startTransition=function(t){var e=il.transition;il.transition={};try{t()}finally{il.transition=e}};ne.unstable_act=lv;ne.useCallback=function(t,e){return Tt.current.useCallback(t,e)};ne.useContext=function(t){return Tt.current.useContext(t)};ne.useDebugValue=function(){};ne.useDeferredValue=function(t){return Tt.current.useDeferredValue(t)};ne.useEffect=function(t,e){return Tt.current.useEffect(t,e)};ne.useId=function(){return Tt.current.useId()};ne.useImperativeHandle=function(t,e,n){return Tt.current.useImperativeHandle(t,e,n)};ne.useInsertionEffect=function(t,e){return Tt.current.useInsertionEffect(t,e)};ne.useLayoutEffect=function(t,e){return Tt.current.useLayoutEffect(t,e)};ne.useMemo=function(t,e){return Tt.current.useMemo(t,e)};ne.useReducer=function(t,e,n){return Tt.current.useReducer(t,e,n)};ne.useRef=function(t){return Tt.current.useRef(t)};ne.useState=function(t){return Tt.current.useState(t)};ne.useSyncExternalStore=function(t,e,n){return Tt.current.useSyncExternalStore(t,e,n)};ne.useTransition=function(){return Tt.current.useTransition()};ne.version="18.3.1";ev.exports=ne;var x=ev.exports;const uv=I2(x),U2=T2({__proto__:null,default:uv},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B2=x,$2=Symbol.for("react.element"),z2=Symbol.for("react.fragment"),W2=Object.prototype.hasOwnProperty,H2=B2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,q2={key:!0,ref:!0,__self:!0,__source:!0};function cv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)W2.call(e,r)&&!q2.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:$2,type:t,key:i,ref:o,props:s,_owner:H2.current}}yu.Fragment=z2;yu.jsx=cv;yu.jsxs=cv;Z0.exports=yu;var h=Z0.exports,nh={},hv={exports:{}},Lt={},dv={exports:{}},fv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,K){var Q=z.length;z.push(K);e:for(;0<Q;){var ve=Q-1>>>1,ce=z[ve];if(0<s(ce,K))z[ve]=K,z[Q]=ce,Q=ve;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var K=z[0],Q=z.pop();if(Q!==K){z[0]=Q;e:for(var ve=0,ce=z.length,Se=ce>>>1;ve<Se;){var Jt=2*(ve+1)-1,Ft=z[Jt],Zt=Jt+1,Ut=z[Zt];if(0>s(Ft,Q))Zt<ce&&0>s(Ut,Ft)?(z[ve]=Ut,z[Zt]=Q,ve=Zt):(z[ve]=Ft,z[Jt]=Q,ve=Jt);else if(Zt<ce&&0>s(Ut,Q))z[ve]=Ut,z[Zt]=Q,ve=Zt;else break e}}return K}function s(z,K){var Q=z.sortIndex-K.sortIndex;return Q!==0?Q:z.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],c=[],p=1,m=null,g=3,_=!1,b=!1,k=!1,N=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(z){for(var K=n(c);K!==null;){if(K.callback===null)r(c);else if(K.startTime<=z)r(c),K.sortIndex=K.expirationTime,e(u,K);else break;K=n(c)}}function O(z){if(k=!1,S(z),!b)if(n(u)!==null)b=!0,Ur(L);else{var K=n(c);K!==null&&Xt(O,K.startTime-z)}}function L(z,K){b=!1,k&&(k=!1,w(y),y=-1),_=!0;var Q=g;try{for(S(K),m=n(u);m!==null&&(!(m.expirationTime>K)||z&&!A());){var ve=m.callback;if(typeof ve=="function"){m.callback=null,g=m.priorityLevel;var ce=ve(m.expirationTime<=K);K=t.unstable_now(),typeof ce=="function"?m.callback=ce:m===n(u)&&r(u),S(K)}else r(u);m=n(u)}if(m!==null)var Se=!0;else{var Jt=n(c);Jt!==null&&Xt(O,Jt.startTime-K),Se=!1}return Se}finally{m=null,g=Q,_=!1}}var M=!1,T=null,y=-1,I=5,R=-1;function A(){return!(t.unstable_now()-R<I)}function P(){if(T!==null){var z=t.unstable_now();R=z;var K=!0;try{K=T(!0,z)}finally{K?C():(M=!1,T=null)}}else M=!1}var C;if(typeof E=="function")C=function(){E(P)};else if(typeof MessageChannel<"u"){var St=new MessageChannel,bn=St.port2;St.port1.onmessage=P,C=function(){bn.postMessage(null)}}else C=function(){N(P,0)};function Ur(z){T=z,M||(M=!0,C())}function Xt(z,K){y=N(function(){z(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){b||_||(b=!0,Ur(L))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(z){switch(g){case 1:case 2:case 3:var K=3;break;default:K=g}var Q=g;g=K;try{return z()}finally{g=Q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,K){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Q=g;g=z;try{return K()}finally{g=Q}},t.unstable_scheduleCallback=function(z,K,Q){var ve=t.unstable_now();switch(typeof Q=="object"&&Q!==null?(Q=Q.delay,Q=typeof Q=="number"&&0<Q?ve+Q:ve):Q=ve,z){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=Q+ce,z={id:p++,callback:K,priorityLevel:z,startTime:Q,expirationTime:ce,sortIndex:-1},Q>ve?(z.sortIndex=Q,e(c,z),n(u)===null&&z===n(c)&&(k?(w(y),y=-1):k=!0,Xt(O,Q-ve))):(z.sortIndex=ce,e(u,z),b||_||(b=!0,Ur(L))),z},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(z){var K=g;return function(){var Q=g;g=K;try{return z.apply(this,arguments)}finally{g=Q}}}})(fv);dv.exports=fv;var Y2=dv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K2=x,Mt=Y2;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var pv=new Set,xo={};function ps(t,e){Zs(t,e),Zs(t+"Capture",e)}function Zs(t,e){for(xo[t]=e,t=0;t<e.length;t++)pv.add(e[t])}var zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rh=Object.prototype.hasOwnProperty,G2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,mm={},gm={};function Q2(t){return rh.call(gm,t)?!0:rh.call(mm,t)?!1:G2.test(t)?gm[t]=!0:(mm[t]=!0,!1)}function X2(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function J2(t,e,n,r){if(e===null||typeof e>"u"||X2(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function It(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new It(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new It(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new It(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new It(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new It(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new It(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new It(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new It(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new It(t,5,!1,t.toLowerCase(),null,!1,!1)});var Cd=/[\-:]([a-z])/g;function Rd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Cd,Rd);st[e]=new It(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Cd,Rd);st[e]=new It(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Cd,Rd);st[e]=new It(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new It(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new It("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new It(t,1,!1,t.toLowerCase(),null,!0,!0)});function bd(t,e,n,r){var s=st.hasOwnProperty(e)?st[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(J2(e,n,s,r)&&(n=null),r||s===null?Q2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Jn=K2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ma=Symbol.for("react.element"),As=Symbol.for("react.portal"),Ns=Symbol.for("react.fragment"),Ad=Symbol.for("react.strict_mode"),sh=Symbol.for("react.profiler"),mv=Symbol.for("react.provider"),gv=Symbol.for("react.context"),Nd=Symbol.for("react.forward_ref"),ih=Symbol.for("react.suspense"),oh=Symbol.for("react.suspense_list"),Pd=Symbol.for("react.memo"),or=Symbol.for("react.lazy"),vv=Symbol.for("react.offscreen"),vm=Symbol.iterator;function Ui(t){return t===null||typeof t!="object"?null:(t=vm&&t[vm]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Object.assign,mc;function Ji(t){if(mc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);mc=e&&e[1]||""}return`
`+mc+t}var gc=!1;function vc(t,e){if(!t||gc)return"";gc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var s=c.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{gc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ji(t):""}function Z2(t){switch(t.tag){case 5:return Ji(t.type);case 16:return Ji("Lazy");case 13:return Ji("Suspense");case 19:return Ji("SuspenseList");case 0:case 2:case 15:return t=vc(t.type,!1),t;case 11:return t=vc(t.type.render,!1),t;case 1:return t=vc(t.type,!0),t;default:return""}}function ah(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ns:return"Fragment";case As:return"Portal";case sh:return"Profiler";case Ad:return"StrictMode";case ih:return"Suspense";case oh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case gv:return(t.displayName||"Context")+".Consumer";case mv:return(t._context.displayName||"Context")+".Provider";case Nd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Pd:return e=t.displayName||null,e!==null?e:ah(t.type)||"Memo";case or:e=t._payload,t=t._init;try{return ah(t(e))}catch{}}return null}function eE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ah(e);case 8:return e===Ad?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ar(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function yv(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tE(t){var e=yv(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function La(t){t._valueTracker||(t._valueTracker=tE(t))}function _v(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=yv(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Il(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function lh(t,e){var n=e.checked;return Re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ym(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ar(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function wv(t,e){e=e.checked,e!=null&&bd(t,"checked",e,!1)}function uh(t,e){wv(t,e);var n=Ar(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ch(t,e.type,n):e.hasOwnProperty("defaultValue")&&ch(t,e.type,Ar(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _m(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ch(t,e,n){(e!=="number"||Il(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Zi=Array.isArray;function $s(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ar(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function hh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function wm(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(Zi(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ar(n)}}function Ev(t,e){var n=Ar(e.value),r=Ar(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Em(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function xv(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function dh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?xv(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Va,Tv=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Va=Va||document.createElement("div"),Va.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Va.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function To(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var oo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nE=["Webkit","ms","Moz","O"];Object.keys(oo).forEach(function(t){nE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),oo[e]=oo[t]})});function Iv(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||oo.hasOwnProperty(t)&&oo[t]?(""+e).trim():e+"px"}function Sv(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=Iv(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var rE=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fh(t,e){if(e){if(rE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function ph(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mh=null;function Dd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var gh=null,zs=null,Ws=null;function xm(t){if(t=ta(t)){if(typeof gh!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Tu(e),gh(t.stateNode,t.type,e))}}function kv(t){zs?Ws?Ws.push(t):Ws=[t]:zs=t}function Cv(){if(zs){var t=zs,e=Ws;if(Ws=zs=null,xm(t),e)for(t=0;t<e.length;t++)xm(e[t])}}function Rv(t,e){return t(e)}function bv(){}var yc=!1;function Av(t,e,n){if(yc)return t(e,n);yc=!0;try{return Rv(t,e,n)}finally{yc=!1,(zs!==null||Ws!==null)&&(bv(),Cv())}}function Io(t,e){var n=t.stateNode;if(n===null)return null;var r=Tu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var vh=!1;if(zn)try{var Bi={};Object.defineProperty(Bi,"passive",{get:function(){vh=!0}}),window.addEventListener("test",Bi,Bi),window.removeEventListener("test",Bi,Bi)}catch{vh=!1}function sE(t,e,n,r,s,i,o,l,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(p){this.onError(p)}}var ao=!1,Sl=null,kl=!1,yh=null,iE={onError:function(t){ao=!0,Sl=t}};function oE(t,e,n,r,s,i,o,l,u){ao=!1,Sl=null,sE.apply(iE,arguments)}function aE(t,e,n,r,s,i,o,l,u){if(oE.apply(this,arguments),ao){if(ao){var c=Sl;ao=!1,Sl=null}else throw Error(U(198));kl||(kl=!0,yh=c)}}function ms(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Nv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Tm(t){if(ms(t)!==t)throw Error(U(188))}function lE(t){var e=t.alternate;if(!e){if(e=ms(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Tm(s),t;if(i===r)return Tm(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function Pv(t){return t=lE(t),t!==null?Dv(t):null}function Dv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Dv(t);if(e!==null)return e;t=t.sibling}return null}var Ov=Mt.unstable_scheduleCallback,Im=Mt.unstable_cancelCallback,uE=Mt.unstable_shouldYield,cE=Mt.unstable_requestPaint,Le=Mt.unstable_now,hE=Mt.unstable_getCurrentPriorityLevel,Od=Mt.unstable_ImmediatePriority,jv=Mt.unstable_UserBlockingPriority,Cl=Mt.unstable_NormalPriority,dE=Mt.unstable_LowPriority,Mv=Mt.unstable_IdlePriority,_u=null,yn=null;function fE(t){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(_u,t,void 0,(t.current.flags&128)===128)}catch{}}var un=Math.clz32?Math.clz32:gE,pE=Math.log,mE=Math.LN2;function gE(t){return t>>>=0,t===0?32:31-(pE(t)/mE|0)|0}var Fa=64,Ua=4194304;function eo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Rl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=eo(l):(i&=o,i!==0&&(r=eo(i)))}else o=n&~s,o!==0?r=eo(o):i!==0&&(r=eo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-un(e),s=1<<n,r|=t[n],e&=~s;return r}function vE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yE(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-un(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=vE(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function _h(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Lv(){var t=Fa;return Fa<<=1,!(Fa&4194240)&&(Fa=64),t}function _c(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Zo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-un(e),t[e]=n}function _E(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-un(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function jd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-un(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var fe=0;function Vv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Fv,Md,Uv,Bv,$v,wh=!1,Ba=[],vr=null,yr=null,_r=null,So=new Map,ko=new Map,lr=[],wE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sm(t,e){switch(t){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":yr=null;break;case"mouseover":case"mouseout":_r=null;break;case"pointerover":case"pointerout":So.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ko.delete(e.pointerId)}}function $i(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ta(e),e!==null&&Md(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function EE(t,e,n,r,s){switch(e){case"focusin":return vr=$i(vr,t,e,n,r,s),!0;case"dragenter":return yr=$i(yr,t,e,n,r,s),!0;case"mouseover":return _r=$i(_r,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return So.set(i,$i(So.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ko.set(i,$i(ko.get(i)||null,t,e,n,r,s)),!0}return!1}function zv(t){var e=Qr(t.target);if(e!==null){var n=ms(e);if(n!==null){if(e=n.tag,e===13){if(e=Nv(n),e!==null){t.blockedOn=e,$v(t.priority,function(){Uv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ol(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Eh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);mh=r,n.target.dispatchEvent(r),mh=null}else return e=ta(n),e!==null&&Md(e),t.blockedOn=n,!1;e.shift()}return!0}function km(t,e,n){ol(t)&&n.delete(e)}function xE(){wh=!1,vr!==null&&ol(vr)&&(vr=null),yr!==null&&ol(yr)&&(yr=null),_r!==null&&ol(_r)&&(_r=null),So.forEach(km),ko.forEach(km)}function zi(t,e){t.blockedOn===e&&(t.blockedOn=null,wh||(wh=!0,Mt.unstable_scheduleCallback(Mt.unstable_NormalPriority,xE)))}function Co(t){function e(s){return zi(s,t)}if(0<Ba.length){zi(Ba[0],t);for(var n=1;n<Ba.length;n++){var r=Ba[n];r.blockedOn===t&&(r.blockedOn=null)}}for(vr!==null&&zi(vr,t),yr!==null&&zi(yr,t),_r!==null&&zi(_r,t),So.forEach(e),ko.forEach(e),n=0;n<lr.length;n++)r=lr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<lr.length&&(n=lr[0],n.blockedOn===null);)zv(n),n.blockedOn===null&&lr.shift()}var Hs=Jn.ReactCurrentBatchConfig,bl=!0;function TE(t,e,n,r){var s=fe,i=Hs.transition;Hs.transition=null;try{fe=1,Ld(t,e,n,r)}finally{fe=s,Hs.transition=i}}function IE(t,e,n,r){var s=fe,i=Hs.transition;Hs.transition=null;try{fe=4,Ld(t,e,n,r)}finally{fe=s,Hs.transition=i}}function Ld(t,e,n,r){if(bl){var s=Eh(t,e,n,r);if(s===null)bc(t,e,r,Al,n),Sm(t,r);else if(EE(s,t,e,n,r))r.stopPropagation();else if(Sm(t,r),e&4&&-1<wE.indexOf(t)){for(;s!==null;){var i=ta(s);if(i!==null&&Fv(i),i=Eh(t,e,n,r),i===null&&bc(t,e,r,Al,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else bc(t,e,r,null,n)}}var Al=null;function Eh(t,e,n,r){if(Al=null,t=Dd(r),t=Qr(t),t!==null)if(e=ms(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Nv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Al=t,null}function Wv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hE()){case Od:return 1;case jv:return 4;case Cl:case dE:return 16;case Mv:return 536870912;default:return 16}default:return 16}}var fr=null,Vd=null,al=null;function Hv(){if(al)return al;var t,e=Vd,n=e.length,r,s="value"in fr?fr.value:fr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return al=s.slice(t,1<r?1-r:void 0)}function ll(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $a(){return!0}function Cm(){return!1}function Vt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?$a:Cm,this.isPropagationStopped=Cm,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=$a)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=$a)},persist:function(){},isPersistent:$a}),e}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fd=Vt(vi),ea=Re({},vi,{view:0,detail:0}),SE=Vt(ea),wc,Ec,Wi,wu=Re({},ea,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ud,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Wi&&(Wi&&t.type==="mousemove"?(wc=t.screenX-Wi.screenX,Ec=t.screenY-Wi.screenY):Ec=wc=0,Wi=t),wc)},movementY:function(t){return"movementY"in t?t.movementY:Ec}}),Rm=Vt(wu),kE=Re({},wu,{dataTransfer:0}),CE=Vt(kE),RE=Re({},ea,{relatedTarget:0}),xc=Vt(RE),bE=Re({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),AE=Vt(bE),NE=Re({},vi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),PE=Vt(NE),DE=Re({},vi,{data:0}),bm=Vt(DE),OE={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jE={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ME={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LE(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=ME[t])?!!e[t]:!1}function Ud(){return LE}var VE=Re({},ea,{key:function(t){if(t.key){var e=OE[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ll(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jE[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ud,charCode:function(t){return t.type==="keypress"?ll(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ll(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),FE=Vt(VE),UE=Re({},wu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Am=Vt(UE),BE=Re({},ea,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ud}),$E=Vt(BE),zE=Re({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),WE=Vt(zE),HE=Re({},wu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qE=Vt(HE),YE=[9,13,27,32],Bd=zn&&"CompositionEvent"in window,lo=null;zn&&"documentMode"in document&&(lo=document.documentMode);var KE=zn&&"TextEvent"in window&&!lo,qv=zn&&(!Bd||lo&&8<lo&&11>=lo),Nm=" ",Pm=!1;function Yv(t,e){switch(t){case"keyup":return YE.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Kv(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ps=!1;function GE(t,e){switch(t){case"compositionend":return Kv(e);case"keypress":return e.which!==32?null:(Pm=!0,Nm);case"textInput":return t=e.data,t===Nm&&Pm?null:t;default:return null}}function QE(t,e){if(Ps)return t==="compositionend"||!Bd&&Yv(t,e)?(t=Hv(),al=Vd=fr=null,Ps=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return qv&&e.locale!=="ko"?null:e.data;default:return null}}var XE={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!XE[t.type]:e==="textarea"}function Gv(t,e,n,r){kv(r),e=Nl(e,"onChange"),0<e.length&&(n=new Fd("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var uo=null,Ro=null;function JE(t){oy(t,0)}function Eu(t){var e=js(t);if(_v(e))return t}function ZE(t,e){if(t==="change")return e}var Qv=!1;if(zn){var Tc;if(zn){var Ic="oninput"in document;if(!Ic){var Om=document.createElement("div");Om.setAttribute("oninput","return;"),Ic=typeof Om.oninput=="function"}Tc=Ic}else Tc=!1;Qv=Tc&&(!document.documentMode||9<document.documentMode)}function jm(){uo&&(uo.detachEvent("onpropertychange",Xv),Ro=uo=null)}function Xv(t){if(t.propertyName==="value"&&Eu(Ro)){var e=[];Gv(e,Ro,t,Dd(t)),Av(JE,e)}}function ex(t,e,n){t==="focusin"?(jm(),uo=e,Ro=n,uo.attachEvent("onpropertychange",Xv)):t==="focusout"&&jm()}function tx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Eu(Ro)}function nx(t,e){if(t==="click")return Eu(e)}function rx(t,e){if(t==="input"||t==="change")return Eu(e)}function sx(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var dn=typeof Object.is=="function"?Object.is:sx;function bo(t,e){if(dn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!rh.call(e,s)||!dn(t[s],e[s]))return!1}return!0}function Mm(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Lm(t,e){var n=Mm(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Mm(n)}}function Jv(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Jv(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Zv(){for(var t=window,e=Il();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Il(t.document)}return e}function $d(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ix(t){var e=Zv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Jv(n.ownerDocument.documentElement,n)){if(r!==null&&$d(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Lm(n,i);var o=Lm(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ox=zn&&"documentMode"in document&&11>=document.documentMode,Ds=null,xh=null,co=null,Th=!1;function Vm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Th||Ds==null||Ds!==Il(r)||(r=Ds,"selectionStart"in r&&$d(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),co&&bo(co,r)||(co=r,r=Nl(xh,"onSelect"),0<r.length&&(e=new Fd("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Ds)))}function za(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Os={animationend:za("Animation","AnimationEnd"),animationiteration:za("Animation","AnimationIteration"),animationstart:za("Animation","AnimationStart"),transitionend:za("Transition","TransitionEnd")},Sc={},ey={};zn&&(ey=document.createElement("div").style,"AnimationEvent"in window||(delete Os.animationend.animation,delete Os.animationiteration.animation,delete Os.animationstart.animation),"TransitionEvent"in window||delete Os.transitionend.transition);function xu(t){if(Sc[t])return Sc[t];if(!Os[t])return t;var e=Os[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ey)return Sc[t]=e[n];return t}var ty=xu("animationend"),ny=xu("animationiteration"),ry=xu("animationstart"),sy=xu("transitionend"),iy=new Map,Fm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(t,e){iy.set(t,e),ps(e,[t])}for(var kc=0;kc<Fm.length;kc++){var Cc=Fm[kc],ax=Cc.toLowerCase(),lx=Cc[0].toUpperCase()+Cc.slice(1);Mr(ax,"on"+lx)}Mr(ty,"onAnimationEnd");Mr(ny,"onAnimationIteration");Mr(ry,"onAnimationStart");Mr("dblclick","onDoubleClick");Mr("focusin","onFocus");Mr("focusout","onBlur");Mr(sy,"onTransitionEnd");Zs("onMouseEnter",["mouseout","mouseover"]);Zs("onMouseLeave",["mouseout","mouseover"]);Zs("onPointerEnter",["pointerout","pointerover"]);Zs("onPointerLeave",["pointerout","pointerover"]);ps("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ps("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ps("onBeforeInput",["compositionend","keypress","textInput","paste"]);ps("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ps("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ps("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var to="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ux=new Set("cancel close invalid load scroll toggle".split(" ").concat(to));function Um(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,aE(r,e,void 0,t),t.currentTarget=null}function oy(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,c=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Um(s,l,c),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,c=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Um(s,l,c),i=u}}}if(kl)throw t=yh,kl=!1,yh=null,t}function we(t,e){var n=e[Rh];n===void 0&&(n=e[Rh]=new Set);var r=t+"__bubble";n.has(r)||(ay(e,t,2,!1),n.add(r))}function Rc(t,e,n){var r=0;e&&(r|=4),ay(n,t,r,e)}var Wa="_reactListening"+Math.random().toString(36).slice(2);function Ao(t){if(!t[Wa]){t[Wa]=!0,pv.forEach(function(n){n!=="selectionchange"&&(ux.has(n)||Rc(n,!1,t),Rc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Wa]||(e[Wa]=!0,Rc("selectionchange",!1,e))}}function ay(t,e,n,r){switch(Wv(e)){case 1:var s=TE;break;case 4:s=IE;break;default:s=Ld}n=s.bind(null,e,n,t),s=void 0,!vh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function bc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=Qr(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}Av(function(){var c=i,p=Dd(n),m=[];e:{var g=iy.get(t);if(g!==void 0){var _=Fd,b=t;switch(t){case"keypress":if(ll(n)===0)break e;case"keydown":case"keyup":_=FE;break;case"focusin":b="focus",_=xc;break;case"focusout":b="blur",_=xc;break;case"beforeblur":case"afterblur":_=xc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Rm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=CE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=$E;break;case ty:case ny:case ry:_=AE;break;case sy:_=WE;break;case"scroll":_=SE;break;case"wheel":_=qE;break;case"copy":case"cut":case"paste":_=PE;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Am}var k=(e&4)!==0,N=!k&&t==="scroll",w=k?g!==null?g+"Capture":null:g;k=[];for(var E=c,S;E!==null;){S=E;var O=S.stateNode;if(S.tag===5&&O!==null&&(S=O,w!==null&&(O=Io(E,w),O!=null&&k.push(No(E,O,S)))),N)break;E=E.return}0<k.length&&(g=new _(g,b,null,n,p),m.push({event:g,listeners:k}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",g&&n!==mh&&(b=n.relatedTarget||n.fromElement)&&(Qr(b)||b[Wn]))break e;if((_||g)&&(g=p.window===p?p:(g=p.ownerDocument)?g.defaultView||g.parentWindow:window,_?(b=n.relatedTarget||n.toElement,_=c,b=b?Qr(b):null,b!==null&&(N=ms(b),b!==N||b.tag!==5&&b.tag!==6)&&(b=null)):(_=null,b=c),_!==b)){if(k=Rm,O="onMouseLeave",w="onMouseEnter",E="mouse",(t==="pointerout"||t==="pointerover")&&(k=Am,O="onPointerLeave",w="onPointerEnter",E="pointer"),N=_==null?g:js(_),S=b==null?g:js(b),g=new k(O,E+"leave",_,n,p),g.target=N,g.relatedTarget=S,O=null,Qr(p)===c&&(k=new k(w,E+"enter",b,n,p),k.target=S,k.relatedTarget=N,O=k),N=O,_&&b)t:{for(k=_,w=b,E=0,S=k;S;S=Ss(S))E++;for(S=0,O=w;O;O=Ss(O))S++;for(;0<E-S;)k=Ss(k),E--;for(;0<S-E;)w=Ss(w),S--;for(;E--;){if(k===w||w!==null&&k===w.alternate)break t;k=Ss(k),w=Ss(w)}k=null}else k=null;_!==null&&Bm(m,g,_,k,!1),b!==null&&N!==null&&Bm(m,N,b,k,!0)}}e:{if(g=c?js(c):window,_=g.nodeName&&g.nodeName.toLowerCase(),_==="select"||_==="input"&&g.type==="file")var L=ZE;else if(Dm(g))if(Qv)L=rx;else{L=tx;var M=ex}else(_=g.nodeName)&&_.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(L=nx);if(L&&(L=L(t,c))){Gv(m,L,n,p);break e}M&&M(t,g,c),t==="focusout"&&(M=g._wrapperState)&&M.controlled&&g.type==="number"&&ch(g,"number",g.value)}switch(M=c?js(c):window,t){case"focusin":(Dm(M)||M.contentEditable==="true")&&(Ds=M,xh=c,co=null);break;case"focusout":co=xh=Ds=null;break;case"mousedown":Th=!0;break;case"contextmenu":case"mouseup":case"dragend":Th=!1,Vm(m,n,p);break;case"selectionchange":if(ox)break;case"keydown":case"keyup":Vm(m,n,p)}var T;if(Bd)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ps?Yv(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(qv&&n.locale!=="ko"&&(Ps||y!=="onCompositionStart"?y==="onCompositionEnd"&&Ps&&(T=Hv()):(fr=p,Vd="value"in fr?fr.value:fr.textContent,Ps=!0)),M=Nl(c,y),0<M.length&&(y=new bm(y,t,null,n,p),m.push({event:y,listeners:M}),T?y.data=T:(T=Kv(n),T!==null&&(y.data=T)))),(T=KE?GE(t,n):QE(t,n))&&(c=Nl(c,"onBeforeInput"),0<c.length&&(p=new bm("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:c}),p.data=T))}oy(m,e)})}function No(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Nl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Io(t,n),i!=null&&r.unshift(No(t,i,s)),i=Io(t,e),i!=null&&r.push(No(t,i,s))),t=t.return}return r}function Ss(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Bm(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,c=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&c!==null&&(l=c,s?(u=Io(n,i),u!=null&&o.unshift(No(n,u,l))):s||(u=Io(n,i),u!=null&&o.push(No(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var cx=/\r\n?/g,hx=/\u0000|\uFFFD/g;function $m(t){return(typeof t=="string"?t:""+t).replace(cx,`
`).replace(hx,"")}function Ha(t,e,n){if(e=$m(e),$m(t)!==e&&n)throw Error(U(425))}function Pl(){}var Ih=null,Sh=null;function kh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ch=typeof setTimeout=="function"?setTimeout:void 0,dx=typeof clearTimeout=="function"?clearTimeout:void 0,zm=typeof Promise=="function"?Promise:void 0,fx=typeof queueMicrotask=="function"?queueMicrotask:typeof zm<"u"?function(t){return zm.resolve(null).then(t).catch(px)}:Ch;function px(t){setTimeout(function(){throw t})}function Ac(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Co(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Co(e)}function wr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Wm(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var yi=Math.random().toString(36).slice(2),gn="__reactFiber$"+yi,Po="__reactProps$"+yi,Wn="__reactContainer$"+yi,Rh="__reactEvents$"+yi,mx="__reactListeners$"+yi,gx="__reactHandles$"+yi;function Qr(t){var e=t[gn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Wn]||n[gn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Wm(t);t!==null;){if(n=t[gn])return n;t=Wm(t)}return e}t=n,n=t.parentNode}return null}function ta(t){return t=t[gn]||t[Wn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function js(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Tu(t){return t[Po]||null}var bh=[],Ms=-1;function Lr(t){return{current:t}}function Ee(t){0>Ms||(t.current=bh[Ms],bh[Ms]=null,Ms--)}function ge(t,e){Ms++,bh[Ms]=t.current,t.current=e}var Nr={},gt=Lr(Nr),Rt=Lr(!1),ss=Nr;function ei(t,e){var n=t.type.contextTypes;if(!n)return Nr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function bt(t){return t=t.childContextTypes,t!=null}function Dl(){Ee(Rt),Ee(gt)}function Hm(t,e,n){if(gt.current!==Nr)throw Error(U(168));ge(gt,e),ge(Rt,n)}function ly(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,eE(t)||"Unknown",s));return Re({},n,r)}function Ol(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Nr,ss=gt.current,ge(gt,t),ge(Rt,Rt.current),!0}function qm(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=ly(t,e,ss),r.__reactInternalMemoizedMergedChildContext=t,Ee(Rt),Ee(gt),ge(gt,t)):Ee(Rt),ge(Rt,n)}var On=null,Iu=!1,Nc=!1;function uy(t){On===null?On=[t]:On.push(t)}function vx(t){Iu=!0,uy(t)}function Vr(){if(!Nc&&On!==null){Nc=!0;var t=0,e=fe;try{var n=On;for(fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}On=null,Iu=!1}catch(s){throw On!==null&&(On=On.slice(t+1)),Ov(Od,Vr),s}finally{fe=e,Nc=!1}}return null}var Ls=[],Vs=0,jl=null,Ml=0,$t=[],zt=0,is=null,Mn=1,Ln="";function qr(t,e){Ls[Vs++]=Ml,Ls[Vs++]=jl,jl=t,Ml=e}function cy(t,e,n){$t[zt++]=Mn,$t[zt++]=Ln,$t[zt++]=is,is=t;var r=Mn;t=Ln;var s=32-un(r)-1;r&=~(1<<s),n+=1;var i=32-un(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Mn=1<<32-un(e)+s|n<<s|r,Ln=i+t}else Mn=1<<i|n<<s|r,Ln=t}function zd(t){t.return!==null&&(qr(t,1),cy(t,1,0))}function Wd(t){for(;t===jl;)jl=Ls[--Vs],Ls[Vs]=null,Ml=Ls[--Vs],Ls[Vs]=null;for(;t===is;)is=$t[--zt],$t[zt]=null,Ln=$t[--zt],$t[zt]=null,Mn=$t[--zt],$t[zt]=null}var jt=null,Ot=null,Te=!1,on=null;function hy(t,e){var n=Ht(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ym(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,jt=t,Ot=wr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,jt=t,Ot=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=is!==null?{id:Mn,overflow:Ln}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ht(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,jt=t,Ot=null,!0):!1;default:return!1}}function Ah(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Nh(t){if(Te){var e=Ot;if(e){var n=e;if(!Ym(t,e)){if(Ah(t))throw Error(U(418));e=wr(n.nextSibling);var r=jt;e&&Ym(t,e)?hy(r,n):(t.flags=t.flags&-4097|2,Te=!1,jt=t)}}else{if(Ah(t))throw Error(U(418));t.flags=t.flags&-4097|2,Te=!1,jt=t}}}function Km(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;jt=t}function qa(t){if(t!==jt)return!1;if(!Te)return Km(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!kh(t.type,t.memoizedProps)),e&&(e=Ot)){if(Ah(t))throw dy(),Error(U(418));for(;e;)hy(t,e),e=wr(e.nextSibling)}if(Km(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ot=wr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ot=null}}else Ot=jt?wr(t.stateNode.nextSibling):null;return!0}function dy(){for(var t=Ot;t;)t=wr(t.nextSibling)}function ti(){Ot=jt=null,Te=!1}function Hd(t){on===null?on=[t]:on.push(t)}var yx=Jn.ReactCurrentBatchConfig;function Hi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Ya(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Gm(t){var e=t._init;return e(t._payload)}function fy(t){function e(w,E){if(t){var S=w.deletions;S===null?(w.deletions=[E],w.flags|=16):S.push(E)}}function n(w,E){if(!t)return null;for(;E!==null;)e(w,E),E=E.sibling;return null}function r(w,E){for(w=new Map;E!==null;)E.key!==null?w.set(E.key,E):w.set(E.index,E),E=E.sibling;return w}function s(w,E){return w=Ir(w,E),w.index=0,w.sibling=null,w}function i(w,E,S){return w.index=S,t?(S=w.alternate,S!==null?(S=S.index,S<E?(w.flags|=2,E):S):(w.flags|=2,E)):(w.flags|=1048576,E)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function l(w,E,S,O){return E===null||E.tag!==6?(E=Vc(S,w.mode,O),E.return=w,E):(E=s(E,S),E.return=w,E)}function u(w,E,S,O){var L=S.type;return L===Ns?p(w,E,S.props.children,O,S.key):E!==null&&(E.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===or&&Gm(L)===E.type)?(O=s(E,S.props),O.ref=Hi(w,E,S),O.return=w,O):(O=ml(S.type,S.key,S.props,null,w.mode,O),O.ref=Hi(w,E,S),O.return=w,O)}function c(w,E,S,O){return E===null||E.tag!==4||E.stateNode.containerInfo!==S.containerInfo||E.stateNode.implementation!==S.implementation?(E=Fc(S,w.mode,O),E.return=w,E):(E=s(E,S.children||[]),E.return=w,E)}function p(w,E,S,O,L){return E===null||E.tag!==7?(E=ns(S,w.mode,O,L),E.return=w,E):(E=s(E,S),E.return=w,E)}function m(w,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return E=Vc(""+E,w.mode,S),E.return=w,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ma:return S=ml(E.type,E.key,E.props,null,w.mode,S),S.ref=Hi(w,null,E),S.return=w,S;case As:return E=Fc(E,w.mode,S),E.return=w,E;case or:var O=E._init;return m(w,O(E._payload),S)}if(Zi(E)||Ui(E))return E=ns(E,w.mode,S,null),E.return=w,E;Ya(w,E)}return null}function g(w,E,S,O){var L=E!==null?E.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return L!==null?null:l(w,E,""+S,O);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Ma:return S.key===L?u(w,E,S,O):null;case As:return S.key===L?c(w,E,S,O):null;case or:return L=S._init,g(w,E,L(S._payload),O)}if(Zi(S)||Ui(S))return L!==null?null:p(w,E,S,O,null);Ya(w,S)}return null}function _(w,E,S,O,L){if(typeof O=="string"&&O!==""||typeof O=="number")return w=w.get(S)||null,l(E,w,""+O,L);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Ma:return w=w.get(O.key===null?S:O.key)||null,u(E,w,O,L);case As:return w=w.get(O.key===null?S:O.key)||null,c(E,w,O,L);case or:var M=O._init;return _(w,E,S,M(O._payload),L)}if(Zi(O)||Ui(O))return w=w.get(S)||null,p(E,w,O,L,null);Ya(E,O)}return null}function b(w,E,S,O){for(var L=null,M=null,T=E,y=E=0,I=null;T!==null&&y<S.length;y++){T.index>y?(I=T,T=null):I=T.sibling;var R=g(w,T,S[y],O);if(R===null){T===null&&(T=I);break}t&&T&&R.alternate===null&&e(w,T),E=i(R,E,y),M===null?L=R:M.sibling=R,M=R,T=I}if(y===S.length)return n(w,T),Te&&qr(w,y),L;if(T===null){for(;y<S.length;y++)T=m(w,S[y],O),T!==null&&(E=i(T,E,y),M===null?L=T:M.sibling=T,M=T);return Te&&qr(w,y),L}for(T=r(w,T);y<S.length;y++)I=_(T,w,y,S[y],O),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?y:I.key),E=i(I,E,y),M===null?L=I:M.sibling=I,M=I);return t&&T.forEach(function(A){return e(w,A)}),Te&&qr(w,y),L}function k(w,E,S,O){var L=Ui(S);if(typeof L!="function")throw Error(U(150));if(S=L.call(S),S==null)throw Error(U(151));for(var M=L=null,T=E,y=E=0,I=null,R=S.next();T!==null&&!R.done;y++,R=S.next()){T.index>y?(I=T,T=null):I=T.sibling;var A=g(w,T,R.value,O);if(A===null){T===null&&(T=I);break}t&&T&&A.alternate===null&&e(w,T),E=i(A,E,y),M===null?L=A:M.sibling=A,M=A,T=I}if(R.done)return n(w,T),Te&&qr(w,y),L;if(T===null){for(;!R.done;y++,R=S.next())R=m(w,R.value,O),R!==null&&(E=i(R,E,y),M===null?L=R:M.sibling=R,M=R);return Te&&qr(w,y),L}for(T=r(w,T);!R.done;y++,R=S.next())R=_(T,w,y,R.value,O),R!==null&&(t&&R.alternate!==null&&T.delete(R.key===null?y:R.key),E=i(R,E,y),M===null?L=R:M.sibling=R,M=R);return t&&T.forEach(function(P){return e(w,P)}),Te&&qr(w,y),L}function N(w,E,S,O){if(typeof S=="object"&&S!==null&&S.type===Ns&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Ma:e:{for(var L=S.key,M=E;M!==null;){if(M.key===L){if(L=S.type,L===Ns){if(M.tag===7){n(w,M.sibling),E=s(M,S.props.children),E.return=w,w=E;break e}}else if(M.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===or&&Gm(L)===M.type){n(w,M.sibling),E=s(M,S.props),E.ref=Hi(w,M,S),E.return=w,w=E;break e}n(w,M);break}else e(w,M);M=M.sibling}S.type===Ns?(E=ns(S.props.children,w.mode,O,S.key),E.return=w,w=E):(O=ml(S.type,S.key,S.props,null,w.mode,O),O.ref=Hi(w,E,S),O.return=w,w=O)}return o(w);case As:e:{for(M=S.key;E!==null;){if(E.key===M)if(E.tag===4&&E.stateNode.containerInfo===S.containerInfo&&E.stateNode.implementation===S.implementation){n(w,E.sibling),E=s(E,S.children||[]),E.return=w,w=E;break e}else{n(w,E);break}else e(w,E);E=E.sibling}E=Fc(S,w.mode,O),E.return=w,w=E}return o(w);case or:return M=S._init,N(w,E,M(S._payload),O)}if(Zi(S))return b(w,E,S,O);if(Ui(S))return k(w,E,S,O);Ya(w,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,E!==null&&E.tag===6?(n(w,E.sibling),E=s(E,S),E.return=w,w=E):(n(w,E),E=Vc(S,w.mode,O),E.return=w,w=E),o(w)):n(w,E)}return N}var ni=fy(!0),py=fy(!1),Ll=Lr(null),Vl=null,Fs=null,qd=null;function Yd(){qd=Fs=Vl=null}function Kd(t){var e=Ll.current;Ee(Ll),t._currentValue=e}function Ph(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function qs(t,e){Vl=t,qd=Fs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ct=!0),t.firstContext=null)}function Gt(t){var e=t._currentValue;if(qd!==t)if(t={context:t,memoizedValue:e,next:null},Fs===null){if(Vl===null)throw Error(U(308));Fs=t,Vl.dependencies={lanes:0,firstContext:t}}else Fs=Fs.next=t;return e}var Xr=null;function Gd(t){Xr===null?Xr=[t]:Xr.push(t)}function my(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Gd(e)):(n.next=s.next,s.next=n),e.interleaved=n,Hn(t,r)}function Hn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ar=!1;function Qd(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gy(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Bn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Er(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,Hn(t,n)}return s=r.interleaved,s===null?(e.next=e,Gd(r)):(e.next=s.next,s.next=e),r.interleaved=e,Hn(t,n)}function ul(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jd(t,n)}}function Qm(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Fl(t,e,n,r){var s=t.updateQueue;ar=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,c=u.next;u.next=null,o===null?i=c:o.next=c,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=c:l.next=c,p.lastBaseUpdate=u))}if(i!==null){var m=s.baseState;o=0,p=c=u=null,l=i;do{var g=l.lane,_=l.eventTime;if((r&g)===g){p!==null&&(p=p.next={eventTime:_,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,k=l;switch(g=e,_=n,k.tag){case 1:if(b=k.payload,typeof b=="function"){m=b.call(_,m,g);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=k.payload,g=typeof b=="function"?b.call(_,m,g):b,g==null)break e;m=Re({},m,g);break e;case 2:ar=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else _={eventTime:_,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(c=p=_,u=m):p=p.next=_,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(p===null&&(u=m),s.baseState=u,s.firstBaseUpdate=c,s.lastBaseUpdate=p,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);as|=o,t.lanes=o,t.memoizedState=m}}function Xm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var na={},_n=Lr(na),Do=Lr(na),Oo=Lr(na);function Jr(t){if(t===na)throw Error(U(174));return t}function Xd(t,e){switch(ge(Oo,e),ge(Do,t),ge(_n,na),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:dh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=dh(e,t)}Ee(_n),ge(_n,e)}function ri(){Ee(_n),Ee(Do),Ee(Oo)}function vy(t){Jr(Oo.current);var e=Jr(_n.current),n=dh(e,t.type);e!==n&&(ge(Do,t),ge(_n,n))}function Jd(t){Do.current===t&&(Ee(_n),Ee(Do))}var ke=Lr(0);function Ul(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pc=[];function Zd(){for(var t=0;t<Pc.length;t++)Pc[t]._workInProgressVersionPrimary=null;Pc.length=0}var cl=Jn.ReactCurrentDispatcher,Dc=Jn.ReactCurrentBatchConfig,os=0,Ce=null,Be=null,Ge=null,Bl=!1,ho=!1,jo=0,_x=0;function ct(){throw Error(U(321))}function ef(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!dn(t[n],e[n]))return!1;return!0}function tf(t,e,n,r,s,i){if(os=i,Ce=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,cl.current=t===null||t.memoizedState===null?Tx:Ix,t=n(r,s),ho){i=0;do{if(ho=!1,jo=0,25<=i)throw Error(U(301));i+=1,Ge=Be=null,e.updateQueue=null,cl.current=Sx,t=n(r,s)}while(ho)}if(cl.current=$l,e=Be!==null&&Be.next!==null,os=0,Ge=Be=Ce=null,Bl=!1,e)throw Error(U(300));return t}function nf(){var t=jo!==0;return jo=0,t}function mn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ge===null?Ce.memoizedState=Ge=t:Ge=Ge.next=t,Ge}function Qt(){if(Be===null){var t=Ce.alternate;t=t!==null?t.memoizedState:null}else t=Be.next;var e=Ge===null?Ce.memoizedState:Ge.next;if(e!==null)Ge=e,Be=t;else{if(t===null)throw Error(U(310));Be=t,t={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},Ge===null?Ce.memoizedState=Ge=t:Ge=Ge.next=t}return Ge}function Mo(t,e){return typeof e=="function"?e(t):e}function Oc(t){var e=Qt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Be,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,c=i;do{var p=c.lane;if((os&p)===p)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var m={lane:p,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,Ce.lanes|=p,as|=p}c=c.next}while(c!==null&&c!==i);u===null?o=r:u.next=l,dn(r,e.memoizedState)||(Ct=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ce.lanes|=i,as|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function jc(t){var e=Qt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);dn(i,e.memoizedState)||(Ct=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function yy(){}function _y(t,e){var n=Ce,r=Qt(),s=e(),i=!dn(r.memoizedState,s);if(i&&(r.memoizedState=s,Ct=!0),r=r.queue,rf(xy.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ge!==null&&Ge.memoizedState.tag&1){if(n.flags|=2048,Lo(9,Ey.bind(null,n,r,s,e),void 0,null),Qe===null)throw Error(U(349));os&30||wy(n,e,s)}return s}function wy(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ce.updateQueue,e===null?(e={lastEffect:null,stores:null},Ce.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ey(t,e,n,r){e.value=n,e.getSnapshot=r,Ty(e)&&Iy(t)}function xy(t,e,n){return n(function(){Ty(e)&&Iy(t)})}function Ty(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!dn(t,n)}catch{return!0}}function Iy(t){var e=Hn(t,1);e!==null&&cn(e,t,1,-1)}function Jm(t){var e=mn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:t},e.queue=t,t=t.dispatch=xx.bind(null,Ce,t),[e.memoizedState,t]}function Lo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ce.updateQueue,e===null?(e={lastEffect:null,stores:null},Ce.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Sy(){return Qt().memoizedState}function hl(t,e,n,r){var s=mn();Ce.flags|=t,s.memoizedState=Lo(1|e,n,void 0,r===void 0?null:r)}function Su(t,e,n,r){var s=Qt();r=r===void 0?null:r;var i=void 0;if(Be!==null){var o=Be.memoizedState;if(i=o.destroy,r!==null&&ef(r,o.deps)){s.memoizedState=Lo(e,n,i,r);return}}Ce.flags|=t,s.memoizedState=Lo(1|e,n,i,r)}function Zm(t,e){return hl(8390656,8,t,e)}function rf(t,e){return Su(2048,8,t,e)}function ky(t,e){return Su(4,2,t,e)}function Cy(t,e){return Su(4,4,t,e)}function Ry(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function by(t,e,n){return n=n!=null?n.concat([t]):null,Su(4,4,Ry.bind(null,e,t),n)}function sf(){}function Ay(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ef(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ny(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ef(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Py(t,e,n){return os&21?(dn(n,e)||(n=Lv(),Ce.lanes|=n,as|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ct=!0),t.memoizedState=n)}function wx(t,e){var n=fe;fe=n!==0&&4>n?n:4,t(!0);var r=Dc.transition;Dc.transition={};try{t(!1),e()}finally{fe=n,Dc.transition=r}}function Dy(){return Qt().memoizedState}function Ex(t,e,n){var r=Tr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Oy(t))jy(e,n);else if(n=my(t,e,n,r),n!==null){var s=Et();cn(n,t,r,s),My(n,e,r)}}function xx(t,e,n){var r=Tr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Oy(t))jy(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,dn(l,o)){var u=e.interleaved;u===null?(s.next=s,Gd(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=my(t,e,s,r),n!==null&&(s=Et(),cn(n,t,r,s),My(n,e,r))}}function Oy(t){var e=t.alternate;return t===Ce||e!==null&&e===Ce}function jy(t,e){ho=Bl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function My(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,jd(t,n)}}var $l={readContext:Gt,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},Tx={readContext:Gt,useCallback:function(t,e){return mn().memoizedState=[t,e===void 0?null:e],t},useContext:Gt,useEffect:Zm,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,hl(4194308,4,Ry.bind(null,e,t),n)},useLayoutEffect:function(t,e){return hl(4194308,4,t,e)},useInsertionEffect:function(t,e){return hl(4,2,t,e)},useMemo:function(t,e){var n=mn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=mn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Ex.bind(null,Ce,t),[r.memoizedState,t]},useRef:function(t){var e=mn();return t={current:t},e.memoizedState=t},useState:Jm,useDebugValue:sf,useDeferredValue:function(t){return mn().memoizedState=t},useTransition:function(){var t=Jm(!1),e=t[0];return t=wx.bind(null,t[1]),mn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ce,s=mn();if(Te){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Qe===null)throw Error(U(349));os&30||wy(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Zm(xy.bind(null,r,i,t),[t]),r.flags|=2048,Lo(9,Ey.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=mn(),e=Qe.identifierPrefix;if(Te){var n=Ln,r=Mn;n=(r&~(1<<32-un(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=jo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=_x++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ix={readContext:Gt,useCallback:Ay,useContext:Gt,useEffect:rf,useImperativeHandle:by,useInsertionEffect:ky,useLayoutEffect:Cy,useMemo:Ny,useReducer:Oc,useRef:Sy,useState:function(){return Oc(Mo)},useDebugValue:sf,useDeferredValue:function(t){var e=Qt();return Py(e,Be.memoizedState,t)},useTransition:function(){var t=Oc(Mo)[0],e=Qt().memoizedState;return[t,e]},useMutableSource:yy,useSyncExternalStore:_y,useId:Dy,unstable_isNewReconciler:!1},Sx={readContext:Gt,useCallback:Ay,useContext:Gt,useEffect:rf,useImperativeHandle:by,useInsertionEffect:ky,useLayoutEffect:Cy,useMemo:Ny,useReducer:jc,useRef:Sy,useState:function(){return jc(Mo)},useDebugValue:sf,useDeferredValue:function(t){var e=Qt();return Be===null?e.memoizedState=t:Py(e,Be.memoizedState,t)},useTransition:function(){var t=jc(Mo)[0],e=Qt().memoizedState;return[t,e]},useMutableSource:yy,useSyncExternalStore:_y,useId:Dy,unstable_isNewReconciler:!1};function nn(t,e){if(t&&t.defaultProps){e=Re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Dh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ku={isMounted:function(t){return(t=t._reactInternals)?ms(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Et(),s=Tr(t),i=Bn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Er(t,i,s),e!==null&&(cn(e,t,s,r),ul(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Et(),s=Tr(t),i=Bn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Er(t,i,s),e!==null&&(cn(e,t,s,r),ul(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Et(),r=Tr(t),s=Bn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Er(t,s,r),e!==null&&(cn(e,t,r,n),ul(e,t,r))}};function eg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!bo(n,r)||!bo(s,i):!0}function Ly(t,e,n){var r=!1,s=Nr,i=e.contextType;return typeof i=="object"&&i!==null?i=Gt(i):(s=bt(e)?ss:gt.current,r=e.contextTypes,i=(r=r!=null)?ei(t,s):Nr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ku,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function tg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ku.enqueueReplaceState(e,e.state,null)}function Oh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Qd(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Gt(i):(i=bt(e)?ss:gt.current,s.context=ei(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Dh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ku.enqueueReplaceState(s,s.state,null),Fl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function si(t,e){try{var n="",r=e;do n+=Z2(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Mc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function jh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var kx=typeof WeakMap=="function"?WeakMap:Map;function Vy(t,e,n){n=Bn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Wl||(Wl=!0,Hh=r),jh(t,e)},n}function Fy(t,e,n){n=Bn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){jh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){jh(t,e),typeof r!="function"&&(xr===null?xr=new Set([this]):xr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function ng(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new kx;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=Ux.bind(null,t,e,n),e.then(t,t))}function rg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function sg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Bn(-1,1),e.tag=2,Er(n,e,1))),n.lanes|=1),t)}var Cx=Jn.ReactCurrentOwner,Ct=!1;function wt(t,e,n,r){e.child=t===null?py(e,null,n,r):ni(e,t.child,n,r)}function ig(t,e,n,r,s){n=n.render;var i=e.ref;return qs(e,s),r=tf(t,e,n,r,i,s),n=nf(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qn(t,e,s)):(Te&&n&&zd(e),e.flags|=1,wt(t,e,r,s),e.child)}function og(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!ff(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Uy(t,e,i,r,s)):(t=ml(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:bo,n(o,r)&&t.ref===e.ref)return qn(t,e,s)}return e.flags|=1,t=Ir(i,r),t.ref=e.ref,t.return=e,e.child=t}function Uy(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(bo(i,r)&&t.ref===e.ref)if(Ct=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ct=!0);else return e.lanes=t.lanes,qn(t,e,s)}return Mh(t,e,n,r,s)}function By(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(Bs,Dt),Dt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ge(Bs,Dt),Dt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ge(Bs,Dt),Dt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ge(Bs,Dt),Dt|=r;return wt(t,e,s,n),e.child}function $y(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Mh(t,e,n,r,s){var i=bt(n)?ss:gt.current;return i=ei(e,i),qs(e,s),n=tf(t,e,n,r,i,s),r=nf(),t!==null&&!Ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qn(t,e,s)):(Te&&r&&zd(e),e.flags|=1,wt(t,e,n,s),e.child)}function ag(t,e,n,r,s){if(bt(n)){var i=!0;Ol(e)}else i=!1;if(qs(e,s),e.stateNode===null)dl(t,e),Ly(e,n,r),Oh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Gt(c):(c=bt(n)?ss:gt.current,c=ei(e,c));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==c)&&tg(e,o,r,c),ar=!1;var g=e.memoizedState;o.state=g,Fl(e,r,o,s),u=e.memoizedState,l!==r||g!==u||Rt.current||ar?(typeof p=="function"&&(Dh(e,n,p,r),u=e.memoizedState),(l=ar||eg(e,n,l,r,g,u,c))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,gy(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:nn(e.type,l),o.props=c,m=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Gt(u):(u=bt(n)?ss:gt.current,u=ei(e,u));var _=n.getDerivedStateFromProps;(p=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||g!==u)&&tg(e,o,r,u),ar=!1,g=e.memoizedState,o.state=g,Fl(e,r,o,s);var b=e.memoizedState;l!==m||g!==b||Rt.current||ar?(typeof _=="function"&&(Dh(e,n,_,r),b=e.memoizedState),(c=ar||eg(e,n,c,r,g,b,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return Lh(t,e,n,r,i,s)}function Lh(t,e,n,r,s,i){$y(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&qm(e,n,!1),qn(t,e,i);r=e.stateNode,Cx.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ni(e,t.child,null,i),e.child=ni(e,null,l,i)):wt(t,e,l,i),e.memoizedState=r.state,s&&qm(e,n,!0),e.child}function zy(t){var e=t.stateNode;e.pendingContext?Hm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Hm(t,e.context,!1),Xd(t,e.containerInfo)}function lg(t,e,n,r,s){return ti(),Hd(s),e.flags|=256,wt(t,e,n,r),e.child}var Vh={dehydrated:null,treeContext:null,retryLane:0};function Fh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Wy(t,e,n){var r=e.pendingProps,s=ke.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ge(ke,s&1),t===null)return Nh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=bu(o,r,0,null),t=ns(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Fh(n),e.memoizedState=Vh,t):of(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return Rx(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ir(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ir(l,i):(i=ns(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Fh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Vh,r}return i=t.child,t=i.sibling,r=Ir(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function of(t,e){return e=bu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ka(t,e,n,r){return r!==null&&Hd(r),ni(e,t.child,null,n),t=of(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Rx(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Mc(Error(U(422))),Ka(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=bu({mode:"visible",children:r.children},s,0,null),i=ns(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ni(e,t.child,null,o),e.child.memoizedState=Fh(o),e.memoizedState=Vh,i);if(!(e.mode&1))return Ka(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(U(419)),r=Mc(i,r,void 0),Ka(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ct||l){if(r=Qe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,Hn(t,s),cn(r,t,s,-1))}return df(),r=Mc(Error(U(421))),Ka(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=Bx.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ot=wr(s.nextSibling),jt=e,Te=!0,on=null,t!==null&&($t[zt++]=Mn,$t[zt++]=Ln,$t[zt++]=is,Mn=t.id,Ln=t.overflow,is=e),e=of(e,r.children),e.flags|=4096,e)}function ug(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ph(t.return,e,n)}function Lc(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Hy(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(wt(t,e,r.children,n),r=ke.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ug(t,n,e);else if(t.tag===19)ug(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ge(ke,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Ul(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Lc(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Ul(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Lc(e,!0,n,null,i);break;case"together":Lc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function dl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),as|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Ir(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ir(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function bx(t,e,n){switch(e.tag){case 3:zy(e),ti();break;case 5:vy(e);break;case 1:bt(e.type)&&Ol(e);break;case 4:Xd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ge(Ll,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ge(ke,ke.current&1),e.flags|=128,null):n&e.child.childLanes?Wy(t,e,n):(ge(ke,ke.current&1),t=qn(t,e,n),t!==null?t.sibling:null);ge(ke,ke.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Hy(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ge(ke,ke.current),r)break;return null;case 22:case 23:return e.lanes=0,By(t,e,n)}return qn(t,e,n)}var qy,Uh,Yy,Ky;qy=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Uh=function(){};Yy=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Jr(_n.current);var i=null;switch(n){case"input":s=lh(t,s),r=lh(t,r),i=[];break;case"select":s=Re({},s,{value:void 0}),r=Re({},r,{value:void 0}),i=[];break;case"textarea":s=hh(t,s),r=hh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Pl)}fh(n,r);var o;n=null;for(c in s)if(!r.hasOwnProperty(c)&&s.hasOwnProperty(c)&&s[c]!=null)if(c==="style"){var l=s[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(xo.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var u=r[c];if(l=s!=null?s[c]:void 0,r.hasOwnProperty(c)&&u!==l&&(u!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(xo.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&we("scroll",t),i||l===u||(i=[])):(i=i||[]).push(c,u))}n&&(i=i||[]).push("style",n);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};Ky=function(t,e,n,r){n!==r&&(e.flags|=4)};function qi(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ht(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ax(t,e,n){var r=e.pendingProps;switch(Wd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ht(e),null;case 1:return bt(e.type)&&Dl(),ht(e),null;case 3:return r=e.stateNode,ri(),Ee(Rt),Ee(gt),Zd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(qa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,on!==null&&(Kh(on),on=null))),Uh(t,e),ht(e),null;case 5:Jd(e);var s=Jr(Oo.current);if(n=e.type,t!==null&&e.stateNode!=null)Yy(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return ht(e),null}if(t=Jr(_n.current),qa(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[gn]=e,r[Po]=i,t=(e.mode&1)!==0,n){case"dialog":we("cancel",r),we("close",r);break;case"iframe":case"object":case"embed":we("load",r);break;case"video":case"audio":for(s=0;s<to.length;s++)we(to[s],r);break;case"source":we("error",r);break;case"img":case"image":case"link":we("error",r),we("load",r);break;case"details":we("toggle",r);break;case"input":ym(r,i),we("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},we("invalid",r);break;case"textarea":wm(r,i),we("invalid",r)}fh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ha(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ha(r.textContent,l,t),s=["children",""+l]):xo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&we("scroll",r)}switch(n){case"input":La(r),_m(r,i,!0);break;case"textarea":La(r),Em(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Pl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=xv(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[gn]=e,t[Po]=r,qy(t,e,!1,!1),e.stateNode=t;e:{switch(o=ph(n,r),n){case"dialog":we("cancel",t),we("close",t),s=r;break;case"iframe":case"object":case"embed":we("load",t),s=r;break;case"video":case"audio":for(s=0;s<to.length;s++)we(to[s],t);s=r;break;case"source":we("error",t),s=r;break;case"img":case"image":case"link":we("error",t),we("load",t),s=r;break;case"details":we("toggle",t),s=r;break;case"input":ym(t,r),s=lh(t,r),we("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Re({},r,{value:void 0}),we("invalid",t);break;case"textarea":wm(t,r),s=hh(t,r),we("invalid",t);break;default:s=r}fh(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?Sv(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Tv(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&To(t,u):typeof u=="number"&&To(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(xo.hasOwnProperty(i)?u!=null&&i==="onScroll"&&we("scroll",t):u!=null&&bd(t,i,u,o))}switch(n){case"input":La(t),_m(t,r,!1);break;case"textarea":La(t),Em(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ar(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?$s(t,!!r.multiple,i,!1):r.defaultValue!=null&&$s(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Pl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ht(e),null;case 6:if(t&&e.stateNode!=null)Ky(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=Jr(Oo.current),Jr(_n.current),qa(e)){if(r=e.stateNode,n=e.memoizedProps,r[gn]=e,(i=r.nodeValue!==n)&&(t=jt,t!==null))switch(t.tag){case 3:Ha(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ha(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[gn]=e,e.stateNode=r}return ht(e),null;case 13:if(Ee(ke),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&Ot!==null&&e.mode&1&&!(e.flags&128))dy(),ti(),e.flags|=98560,i=!1;else if(i=qa(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[gn]=e}else ti(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ht(e),i=!1}else on!==null&&(Kh(on),on=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ke.current&1?We===0&&(We=3):df())),e.updateQueue!==null&&(e.flags|=4),ht(e),null);case 4:return ri(),Uh(t,e),t===null&&Ao(e.stateNode.containerInfo),ht(e),null;case 10:return Kd(e.type._context),ht(e),null;case 17:return bt(e.type)&&Dl(),ht(e),null;case 19:if(Ee(ke),i=e.memoizedState,i===null)return ht(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)qi(i,!1);else{if(We!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ul(t),o!==null){for(e.flags|=128,qi(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ge(ke,ke.current&1|2),e.child}t=t.sibling}i.tail!==null&&Le()>ii&&(e.flags|=128,r=!0,qi(i,!1),e.lanes=4194304)}else{if(!r)if(t=Ul(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),qi(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Te)return ht(e),null}else 2*Le()-i.renderingStartTime>ii&&n!==1073741824&&(e.flags|=128,r=!0,qi(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Le(),e.sibling=null,n=ke.current,ge(ke,r?n&1|2:n&1),e):(ht(e),null);case 22:case 23:return hf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Dt&1073741824&&(ht(e),e.subtreeFlags&6&&(e.flags|=8192)):ht(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function Nx(t,e){switch(Wd(e),e.tag){case 1:return bt(e.type)&&Dl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ri(),Ee(Rt),Ee(gt),Zd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Jd(e),null;case 13:if(Ee(ke),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));ti()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(ke),null;case 4:return ri(),null;case 10:return Kd(e.type._context),null;case 22:case 23:return hf(),null;case 24:return null;default:return null}}var Ga=!1,pt=!1,Px=typeof WeakSet=="function"?WeakSet:Set,W=null;function Us(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Oe(t,e,r)}else n.current=null}function Bh(t,e,n){try{n()}catch(r){Oe(t,e,r)}}var cg=!1;function Dx(t,e){if(Ih=bl,t=Zv(),$d(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,c=0,p=0,m=t,g=null;t:for(;;){for(var _;m!==n||s!==0&&m.nodeType!==3||(l=o+s),m!==i||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(_=m.firstChild)!==null;)g=m,m=_;for(;;){if(m===t)break t;if(g===n&&++c===s&&(l=o),g===i&&++p===r&&(u=o),(_=m.nextSibling)!==null)break;m=g,g=m.parentNode}m=_}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sh={focusedElem:t,selectionRange:n},bl=!1,W=e;W!==null;)if(e=W,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,W=t;else for(;W!==null;){e=W;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var k=b.memoizedProps,N=b.memoizedState,w=e.stateNode,E=w.getSnapshotBeforeUpdate(e.elementType===e.type?k:nn(e.type,k),N);w.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(O){Oe(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,W=t;break}W=e.return}return b=cg,cg=!1,b}function fo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Bh(e,n,i)}s=s.next}while(s!==r)}}function Cu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function $h(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Gy(t){var e=t.alternate;e!==null&&(t.alternate=null,Gy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gn],delete e[Po],delete e[Rh],delete e[mx],delete e[gx])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Qy(t){return t.tag===5||t.tag===3||t.tag===4}function hg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Qy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Pl));else if(r!==4&&(t=t.child,t!==null))for(zh(t,e,n),t=t.sibling;t!==null;)zh(t,e,n),t=t.sibling}function Wh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Wh(t,e,n),t=t.sibling;t!==null;)Wh(t,e,n),t=t.sibling}var Ze=null,rn=!1;function rr(t,e,n){for(n=n.child;n!==null;)Xy(t,e,n),n=n.sibling}function Xy(t,e,n){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(_u,n)}catch{}switch(n.tag){case 5:pt||Us(n,e);case 6:var r=Ze,s=rn;Ze=null,rr(t,e,n),Ze=r,rn=s,Ze!==null&&(rn?(t=Ze,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ze.removeChild(n.stateNode));break;case 18:Ze!==null&&(rn?(t=Ze,n=n.stateNode,t.nodeType===8?Ac(t.parentNode,n):t.nodeType===1&&Ac(t,n),Co(t)):Ac(Ze,n.stateNode));break;case 4:r=Ze,s=rn,Ze=n.stateNode.containerInfo,rn=!0,rr(t,e,n),Ze=r,rn=s;break;case 0:case 11:case 14:case 15:if(!pt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Bh(n,e,o),s=s.next}while(s!==r)}rr(t,e,n);break;case 1:if(!pt&&(Us(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Oe(n,e,l)}rr(t,e,n);break;case 21:rr(t,e,n);break;case 22:n.mode&1?(pt=(r=pt)||n.memoizedState!==null,rr(t,e,n),pt=r):rr(t,e,n);break;default:rr(t,e,n)}}function dg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Px),e.forEach(function(r){var s=$x.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function tn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ze=l.stateNode,rn=!1;break e;case 3:Ze=l.stateNode.containerInfo,rn=!0;break e;case 4:Ze=l.stateNode.containerInfo,rn=!0;break e}l=l.return}if(Ze===null)throw Error(U(160));Xy(i,o,s),Ze=null,rn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(c){Oe(s,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Jy(e,t),e=e.sibling}function Jy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tn(e,t),pn(t),r&4){try{fo(3,t,t.return),Cu(3,t)}catch(k){Oe(t,t.return,k)}try{fo(5,t,t.return)}catch(k){Oe(t,t.return,k)}}break;case 1:tn(e,t),pn(t),r&512&&n!==null&&Us(n,n.return);break;case 5:if(tn(e,t),pn(t),r&512&&n!==null&&Us(n,n.return),t.flags&32){var s=t.stateNode;try{To(s,"")}catch(k){Oe(t,t.return,k)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&wv(s,i),ph(l,o);var c=ph(l,i);for(o=0;o<u.length;o+=2){var p=u[o],m=u[o+1];p==="style"?Sv(s,m):p==="dangerouslySetInnerHTML"?Tv(s,m):p==="children"?To(s,m):bd(s,p,m,c)}switch(l){case"input":uh(s,i);break;case"textarea":Ev(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?$s(s,!!i.multiple,_,!1):g!==!!i.multiple&&(i.defaultValue!=null?$s(s,!!i.multiple,i.defaultValue,!0):$s(s,!!i.multiple,i.multiple?[]:"",!1))}s[Po]=i}catch(k){Oe(t,t.return,k)}}break;case 6:if(tn(e,t),pn(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(k){Oe(t,t.return,k)}}break;case 3:if(tn(e,t),pn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Co(e.containerInfo)}catch(k){Oe(t,t.return,k)}break;case 4:tn(e,t),pn(t);break;case 13:tn(e,t),pn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(uf=Le())),r&4&&dg(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(pt=(c=pt)||p,tn(e,t),pt=c):tn(e,t),pn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!p&&t.mode&1)for(W=t,p=t.child;p!==null;){for(m=W=p;W!==null;){switch(g=W,_=g.child,g.tag){case 0:case 11:case 14:case 15:fo(4,g,g.return);break;case 1:Us(g,g.return);var b=g.stateNode;if(typeof b.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(k){Oe(r,n,k)}}break;case 5:Us(g,g.return);break;case 22:if(g.memoizedState!==null){pg(m);continue}}_!==null?(_.return=g,W=_):pg(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{s=m.stateNode,c?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Iv("display",o))}catch(k){Oe(t,t.return,k)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(k){Oe(t,t.return,k)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:tn(e,t),pn(t),r&4&&dg(t);break;case 21:break;default:tn(e,t),pn(t)}}function pn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Qy(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(To(s,""),r.flags&=-33);var i=hg(t);Wh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=hg(t);zh(t,l,o);break;default:throw Error(U(161))}}catch(u){Oe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Ox(t,e,n){W=t,Zy(t)}function Zy(t,e,n){for(var r=(t.mode&1)!==0;W!==null;){var s=W,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ga;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||pt;l=Ga;var c=pt;if(Ga=o,(pt=u)&&!c)for(W=s;W!==null;)o=W,u=o.child,o.tag===22&&o.memoizedState!==null?mg(s):u!==null?(u.return=o,W=u):mg(s);for(;i!==null;)W=i,Zy(i),i=i.sibling;W=s,Ga=l,pt=c}fg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,W=i):fg(t)}}function fg(t){for(;W!==null;){var e=W;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pt||Cu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!pt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:nn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Xm(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Xm(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var p=c.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&Co(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}pt||e.flags&512&&$h(e)}catch(g){Oe(e,e.return,g)}}if(e===t){W=null;break}if(n=e.sibling,n!==null){n.return=e.return,W=n;break}W=e.return}}function pg(t){for(;W!==null;){var e=W;if(e===t){W=null;break}var n=e.sibling;if(n!==null){n.return=e.return,W=n;break}W=e.return}}function mg(t){for(;W!==null;){var e=W;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cu(4,e)}catch(u){Oe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Oe(e,s,u)}}var i=e.return;try{$h(e)}catch(u){Oe(e,i,u)}break;case 5:var o=e.return;try{$h(e)}catch(u){Oe(e,o,u)}}}catch(u){Oe(e,e.return,u)}if(e===t){W=null;break}var l=e.sibling;if(l!==null){l.return=e.return,W=l;break}W=e.return}}var jx=Math.ceil,zl=Jn.ReactCurrentDispatcher,af=Jn.ReactCurrentOwner,qt=Jn.ReactCurrentBatchConfig,ae=0,Qe=null,Fe=null,nt=0,Dt=0,Bs=Lr(0),We=0,Vo=null,as=0,Ru=0,lf=0,po=null,kt=null,uf=0,ii=1/0,Dn=null,Wl=!1,Hh=null,xr=null,Qa=!1,pr=null,Hl=0,mo=0,qh=null,fl=-1,pl=0;function Et(){return ae&6?Le():fl!==-1?fl:fl=Le()}function Tr(t){return t.mode&1?ae&2&&nt!==0?nt&-nt:yx.transition!==null?(pl===0&&(pl=Lv()),pl):(t=fe,t!==0||(t=window.event,t=t===void 0?16:Wv(t.type)),t):1}function cn(t,e,n,r){if(50<mo)throw mo=0,qh=null,Error(U(185));Zo(t,n,r),(!(ae&2)||t!==Qe)&&(t===Qe&&(!(ae&2)&&(Ru|=n),We===4&&ur(t,nt)),At(t,r),n===1&&ae===0&&!(e.mode&1)&&(ii=Le()+500,Iu&&Vr()))}function At(t,e){var n=t.callbackNode;yE(t,e);var r=Rl(t,t===Qe?nt:0);if(r===0)n!==null&&Im(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Im(n),e===1)t.tag===0?vx(gg.bind(null,t)):uy(gg.bind(null,t)),fx(function(){!(ae&6)&&Vr()}),n=null;else{switch(Vv(r)){case 1:n=Od;break;case 4:n=jv;break;case 16:n=Cl;break;case 536870912:n=Mv;break;default:n=Cl}n=a_(n,e_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function e_(t,e){if(fl=-1,pl=0,ae&6)throw Error(U(327));var n=t.callbackNode;if(Ys()&&t.callbackNode!==n)return null;var r=Rl(t,t===Qe?nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ql(t,r);else{e=r;var s=ae;ae|=2;var i=n_();(Qe!==t||nt!==e)&&(Dn=null,ii=Le()+500,ts(t,e));do try{Vx();break}catch(l){t_(t,l)}while(!0);Yd(),zl.current=i,ae=s,Fe!==null?e=0:(Qe=null,nt=0,e=We)}if(e!==0){if(e===2&&(s=_h(t),s!==0&&(r=s,e=Yh(t,s))),e===1)throw n=Vo,ts(t,0),ur(t,r),At(t,Le()),n;if(e===6)ur(t,r);else{if(s=t.current.alternate,!(r&30)&&!Mx(s)&&(e=ql(t,r),e===2&&(i=_h(t),i!==0&&(r=i,e=Yh(t,i))),e===1))throw n=Vo,ts(t,0),ur(t,r),At(t,Le()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Yr(t,kt,Dn);break;case 3:if(ur(t,r),(r&130023424)===r&&(e=uf+500-Le(),10<e)){if(Rl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Et(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Ch(Yr.bind(null,t,kt,Dn),e);break}Yr(t,kt,Dn);break;case 4:if(ur(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-un(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Le()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jx(r/1960))-r,10<r){t.timeoutHandle=Ch(Yr.bind(null,t,kt,Dn),r);break}Yr(t,kt,Dn);break;case 5:Yr(t,kt,Dn);break;default:throw Error(U(329))}}}return At(t,Le()),t.callbackNode===n?e_.bind(null,t):null}function Yh(t,e){var n=po;return t.current.memoizedState.isDehydrated&&(ts(t,e).flags|=256),t=ql(t,e),t!==2&&(e=kt,kt=n,e!==null&&Kh(e)),t}function Kh(t){kt===null?kt=t:kt.push.apply(kt,t)}function Mx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!dn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ur(t,e){for(e&=~lf,e&=~Ru,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-un(e),r=1<<n;t[n]=-1,e&=~r}}function gg(t){if(ae&6)throw Error(U(327));Ys();var e=Rl(t,0);if(!(e&1))return At(t,Le()),null;var n=ql(t,e);if(t.tag!==0&&n===2){var r=_h(t);r!==0&&(e=r,n=Yh(t,r))}if(n===1)throw n=Vo,ts(t,0),ur(t,e),At(t,Le()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yr(t,kt,Dn),At(t,Le()),null}function cf(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(ii=Le()+500,Iu&&Vr())}}function ls(t){pr!==null&&pr.tag===0&&!(ae&6)&&Ys();var e=ae;ae|=1;var n=qt.transition,r=fe;try{if(qt.transition=null,fe=1,t)return t()}finally{fe=r,qt.transition=n,ae=e,!(ae&6)&&Vr()}}function hf(){Dt=Bs.current,Ee(Bs)}function ts(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,dx(n)),Fe!==null)for(n=Fe.return;n!==null;){var r=n;switch(Wd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Dl();break;case 3:ri(),Ee(Rt),Ee(gt),Zd();break;case 5:Jd(r);break;case 4:ri();break;case 13:Ee(ke);break;case 19:Ee(ke);break;case 10:Kd(r.type._context);break;case 22:case 23:hf()}n=n.return}if(Qe=t,Fe=t=Ir(t.current,null),nt=Dt=e,We=0,Vo=null,lf=Ru=as=0,kt=po=null,Xr!==null){for(e=0;e<Xr.length;e++)if(n=Xr[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Xr=null}return t}function t_(t,e){do{var n=Fe;try{if(Yd(),cl.current=$l,Bl){for(var r=Ce.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Bl=!1}if(os=0,Ge=Be=Ce=null,ho=!1,jo=0,af.current=null,n===null||n.return===null){We=1,Vo=e,Fe=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=nt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var g=p.alternate;g?(p.updateQueue=g.updateQueue,p.memoizedState=g.memoizedState,p.lanes=g.lanes):(p.updateQueue=null,p.memoizedState=null)}var _=rg(o);if(_!==null){_.flags&=-257,sg(_,o,l,i,e),_.mode&1&&ng(i,c,e),e=_,u=c;var b=e.updateQueue;if(b===null){var k=new Set;k.add(u),e.updateQueue=k}else b.add(u);break e}else{if(!(e&1)){ng(i,c,e),df();break e}u=Error(U(426))}}else if(Te&&l.mode&1){var N=rg(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),sg(N,o,l,i,e),Hd(si(u,l));break e}}i=u=si(u,l),We!==4&&(We=2),po===null?po=[i]:po.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=Vy(i,u,e);Qm(i,w);break e;case 1:l=u;var E=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof E.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(xr===null||!xr.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var O=Fy(i,l,e);Qm(i,O);break e}}i=i.return}while(i!==null)}s_(n)}catch(L){e=L,Fe===n&&n!==null&&(Fe=n=n.return);continue}break}while(!0)}function n_(){var t=zl.current;return zl.current=$l,t===null?$l:t}function df(){(We===0||We===3||We===2)&&(We=4),Qe===null||!(as&268435455)&&!(Ru&268435455)||ur(Qe,nt)}function ql(t,e){var n=ae;ae|=2;var r=n_();(Qe!==t||nt!==e)&&(Dn=null,ts(t,e));do try{Lx();break}catch(s){t_(t,s)}while(!0);if(Yd(),ae=n,zl.current=r,Fe!==null)throw Error(U(261));return Qe=null,nt=0,We}function Lx(){for(;Fe!==null;)r_(Fe)}function Vx(){for(;Fe!==null&&!uE();)r_(Fe)}function r_(t){var e=o_(t.alternate,t,Dt);t.memoizedProps=t.pendingProps,e===null?s_(t):Fe=e,af.current=null}function s_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Nx(n,e),n!==null){n.flags&=32767,Fe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{We=6,Fe=null;return}}else if(n=Ax(n,e,Dt),n!==null){Fe=n;return}if(e=e.sibling,e!==null){Fe=e;return}Fe=e=t}while(e!==null);We===0&&(We=5)}function Yr(t,e,n){var r=fe,s=qt.transition;try{qt.transition=null,fe=1,Fx(t,e,n,r)}finally{qt.transition=s,fe=r}return null}function Fx(t,e,n,r){do Ys();while(pr!==null);if(ae&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(_E(t,i),t===Qe&&(Fe=Qe=null,nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Qa||(Qa=!0,a_(Cl,function(){return Ys(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=qt.transition,qt.transition=null;var o=fe;fe=1;var l=ae;ae|=4,af.current=null,Dx(t,n),Jy(n,t),ix(Sh),bl=!!Ih,Sh=Ih=null,t.current=n,Ox(n),cE(),ae=l,fe=o,qt.transition=i}else t.current=n;if(Qa&&(Qa=!1,pr=t,Hl=s),i=t.pendingLanes,i===0&&(xr=null),fE(n.stateNode),At(t,Le()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Wl)throw Wl=!1,t=Hh,Hh=null,t;return Hl&1&&t.tag!==0&&Ys(),i=t.pendingLanes,i&1?t===qh?mo++:(mo=0,qh=t):mo=0,Vr(),null}function Ys(){if(pr!==null){var t=Vv(Hl),e=qt.transition,n=fe;try{if(qt.transition=null,fe=16>t?16:t,pr===null)var r=!1;else{if(t=pr,pr=null,Hl=0,ae&6)throw Error(U(331));var s=ae;for(ae|=4,W=t.current;W!==null;){var i=W,o=i.child;if(W.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var c=l[u];for(W=c;W!==null;){var p=W;switch(p.tag){case 0:case 11:case 15:fo(8,p,i)}var m=p.child;if(m!==null)m.return=p,W=m;else for(;W!==null;){p=W;var g=p.sibling,_=p.return;if(Gy(p),p===c){W=null;break}if(g!==null){g.return=_,W=g;break}W=_}}}var b=i.alternate;if(b!==null){var k=b.child;if(k!==null){b.child=null;do{var N=k.sibling;k.sibling=null,k=N}while(k!==null)}}W=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,W=o;else e:for(;W!==null;){if(i=W,i.flags&2048)switch(i.tag){case 0:case 11:case 15:fo(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,W=w;break e}W=i.return}}var E=t.current;for(W=E;W!==null;){o=W;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,W=S;else e:for(o=E;W!==null;){if(l=W,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Cu(9,l)}}catch(L){Oe(l,l.return,L)}if(l===o){W=null;break e}var O=l.sibling;if(O!==null){O.return=l.return,W=O;break e}W=l.return}}if(ae=s,Vr(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(_u,t)}catch{}r=!0}return r}finally{fe=n,qt.transition=e}}return!1}function vg(t,e,n){e=si(n,e),e=Vy(t,e,1),t=Er(t,e,1),e=Et(),t!==null&&(Zo(t,1,e),At(t,e))}function Oe(t,e,n){if(t.tag===3)vg(t,t,n);else for(;e!==null;){if(e.tag===3){vg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xr===null||!xr.has(r))){t=si(n,t),t=Fy(e,t,1),e=Er(e,t,1),t=Et(),e!==null&&(Zo(e,1,t),At(e,t));break}}e=e.return}}function Ux(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Et(),t.pingedLanes|=t.suspendedLanes&n,Qe===t&&(nt&n)===n&&(We===4||We===3&&(nt&130023424)===nt&&500>Le()-uf?ts(t,0):lf|=n),At(t,e)}function i_(t,e){e===0&&(t.mode&1?(e=Ua,Ua<<=1,!(Ua&130023424)&&(Ua=4194304)):e=1);var n=Et();t=Hn(t,e),t!==null&&(Zo(t,e,n),At(t,n))}function Bx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),i_(t,n)}function $x(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),i_(t,n)}var o_;o_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rt.current)Ct=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ct=!1,bx(t,e,n);Ct=!!(t.flags&131072)}else Ct=!1,Te&&e.flags&1048576&&cy(e,Ml,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;dl(t,e),t=e.pendingProps;var s=ei(e,gt.current);qs(e,n),s=tf(null,e,r,t,s,n);var i=nf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bt(r)?(i=!0,Ol(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Qd(e),s.updater=ku,e.stateNode=s,s._reactInternals=e,Oh(e,r,t,n),e=Lh(null,e,r,!0,i,n)):(e.tag=0,Te&&i&&zd(e),wt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(dl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=Wx(r),t=nn(r,t),s){case 0:e=Mh(null,e,r,t,n);break e;case 1:e=ag(null,e,r,t,n);break e;case 11:e=ig(null,e,r,t,n);break e;case 14:e=og(null,e,r,nn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),Mh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),ag(t,e,r,s,n);case 3:e:{if(zy(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,gy(t,e),Fl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=si(Error(U(423)),e),e=lg(t,e,r,n,s);break e}else if(r!==s){s=si(Error(U(424)),e),e=lg(t,e,r,n,s);break e}else for(Ot=wr(e.stateNode.containerInfo.firstChild),jt=e,Te=!0,on=null,n=py(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ti(),r===s){e=qn(t,e,n);break e}wt(t,e,r,n)}e=e.child}return e;case 5:return vy(e),t===null&&Nh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,kh(r,s)?o=null:i!==null&&kh(r,i)&&(e.flags|=32),$y(t,e),wt(t,e,o,n),e.child;case 6:return t===null&&Nh(e),null;case 13:return Wy(t,e,n);case 4:return Xd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ni(e,null,r,n):wt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),ig(t,e,r,s,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ge(Ll,r._currentValue),r._currentValue=o,i!==null)if(dn(i.value,o)){if(i.children===s.children&&!Rt.current){e=qn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Bn(-1,n&-n),u.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var p=c.pending;p===null?u.next=u:(u.next=p.next,p.next=u),c.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),Ph(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ph(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,qs(e,n),s=Gt(s),r=r(s),e.flags|=1,wt(t,e,r,n),e.child;case 14:return r=e.type,s=nn(r,e.pendingProps),s=nn(r.type,s),og(t,e,r,s,n);case 15:return Uy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),dl(t,e),e.tag=1,bt(r)?(t=!0,Ol(e)):t=!1,qs(e,n),Ly(e,r,s),Oh(e,r,s,n),Lh(null,e,r,!0,t,n);case 19:return Hy(t,e,n);case 22:return By(t,e,n)}throw Error(U(156,e.tag))};function a_(t,e){return Ov(t,e)}function zx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ht(t,e,n,r){return new zx(t,e,n,r)}function ff(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Wx(t){if(typeof t=="function")return ff(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Nd)return 11;if(t===Pd)return 14}return 2}function Ir(t,e){var n=t.alternate;return n===null?(n=Ht(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function ml(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")ff(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ns:return ns(n.children,s,i,e);case Ad:o=8,s|=8;break;case sh:return t=Ht(12,n,e,s|2),t.elementType=sh,t.lanes=i,t;case ih:return t=Ht(13,n,e,s),t.elementType=ih,t.lanes=i,t;case oh:return t=Ht(19,n,e,s),t.elementType=oh,t.lanes=i,t;case vv:return bu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mv:o=10;break e;case gv:o=9;break e;case Nd:o=11;break e;case Pd:o=14;break e;case or:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Ht(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ns(t,e,n,r){return t=Ht(7,t,r,e),t.lanes=n,t}function bu(t,e,n,r){return t=Ht(22,t,r,e),t.elementType=vv,t.lanes=n,t.stateNode={isHidden:!1},t}function Vc(t,e,n){return t=Ht(6,t,null,e),t.lanes=n,t}function Fc(t,e,n){return e=Ht(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Hx(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_c(0),this.expirationTimes=_c(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_c(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function pf(t,e,n,r,s,i,o,l,u){return t=new Hx(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ht(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qd(i),t}function qx(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:As,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function l_(t){if(!t)return Nr;t=t._reactInternals;e:{if(ms(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(bt(n))return ly(t,n,e)}return e}function u_(t,e,n,r,s,i,o,l,u){return t=pf(n,r,!0,t,s,i,o,l,u),t.context=l_(null),n=t.current,r=Et(),s=Tr(n),i=Bn(r,s),i.callback=e??null,Er(n,i,s),t.current.lanes=s,Zo(t,s,r),At(t,r),t}function Au(t,e,n,r){var s=e.current,i=Et(),o=Tr(s);return n=l_(n),e.context===null?e.context=n:e.pendingContext=n,e=Bn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Er(s,e,o),t!==null&&(cn(t,s,o,i),ul(t,s,o)),o}function Yl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function yg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function mf(t,e){yg(t,e),(t=t.alternate)&&yg(t,e)}function Yx(){return null}var c_=typeof reportError=="function"?reportError:function(t){console.error(t)};function gf(t){this._internalRoot=t}Nu.prototype.render=gf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Au(t,e,null,null)};Nu.prototype.unmount=gf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ls(function(){Au(null,t,null,null)}),e[Wn]=null}};function Nu(t){this._internalRoot=t}Nu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Bv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<lr.length&&e!==0&&e<lr[n].priority;n++);lr.splice(n,0,t),n===0&&zv(t)}};function vf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Pu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _g(){}function Kx(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var c=Yl(o);i.call(c)}}var o=u_(e,r,t,0,null,!1,!1,"",_g);return t._reactRootContainer=o,t[Wn]=o.current,Ao(t.nodeType===8?t.parentNode:t),ls(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var c=Yl(u);l.call(c)}}var u=pf(t,0,!1,null,null,!1,!1,"",_g);return t._reactRootContainer=u,t[Wn]=u.current,Ao(t.nodeType===8?t.parentNode:t),ls(function(){Au(e,u,n,r)}),u}function Du(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=Yl(o);l.call(u)}}Au(e,o,t,s)}else o=Kx(n,e,t,s,r);return Yl(o)}Fv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=eo(e.pendingLanes);n!==0&&(jd(e,n|1),At(e,Le()),!(ae&6)&&(ii=Le()+500,Vr()))}break;case 13:ls(function(){var r=Hn(t,1);if(r!==null){var s=Et();cn(r,t,1,s)}}),mf(t,1)}};Md=function(t){if(t.tag===13){var e=Hn(t,134217728);if(e!==null){var n=Et();cn(e,t,134217728,n)}mf(t,134217728)}};Uv=function(t){if(t.tag===13){var e=Tr(t),n=Hn(t,e);if(n!==null){var r=Et();cn(n,t,e,r)}mf(t,e)}};Bv=function(){return fe};$v=function(t,e){var n=fe;try{return fe=t,e()}finally{fe=n}};gh=function(t,e,n){switch(e){case"input":if(uh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Tu(r);if(!s)throw Error(U(90));_v(r),uh(r,s)}}}break;case"textarea":Ev(t,n);break;case"select":e=n.value,e!=null&&$s(t,!!n.multiple,e,!1)}};Rv=cf;bv=ls;var Gx={usingClientEntryPoint:!1,Events:[ta,js,Tu,kv,Cv,cf]},Yi={findFiberByHostInstance:Qr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Qx={bundleType:Yi.bundleType,version:Yi.version,rendererPackageName:Yi.rendererPackageName,rendererConfig:Yi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Jn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Pv(t),t===null?null:t.stateNode},findFiberByHostInstance:Yi.findFiberByHostInstance||Yx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Xa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xa.isDisabled&&Xa.supportsFiber)try{_u=Xa.inject(Qx),yn=Xa}catch{}}Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Gx;Lt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vf(e))throw Error(U(200));return qx(t,e,null,n)};Lt.createRoot=function(t,e){if(!vf(t))throw Error(U(299));var n=!1,r="",s=c_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=pf(t,1,!1,null,null,n,!1,r,s),t[Wn]=e.current,Ao(t.nodeType===8?t.parentNode:t),new gf(e)};Lt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=Pv(e),t=t===null?null:t.stateNode,t};Lt.flushSync=function(t){return ls(t)};Lt.hydrate=function(t,e,n){if(!Pu(e))throw Error(U(200));return Du(null,t,e,!0,n)};Lt.hydrateRoot=function(t,e,n){if(!vf(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=c_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=u_(e,null,t,1,n??null,s,!1,i,o),t[Wn]=e.current,Ao(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Nu(e)};Lt.render=function(t,e,n){if(!Pu(e))throw Error(U(200));return Du(null,t,e,!1,n)};Lt.unmountComponentAtNode=function(t){if(!Pu(t))throw Error(U(40));return t._reactRootContainer?(ls(function(){Du(null,null,t,!1,function(){t._reactRootContainer=null,t[Wn]=null})}),!0):!1};Lt.unstable_batchedUpdates=cf;Lt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Pu(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Du(t,e,n,!1,r)};Lt.version="18.3.1-next-f1338f8080-20240426";function h_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h_)}catch(t){console.error(t)}}h_(),hv.exports=Lt;var Xx=hv.exports,wg=Xx;nh.createRoot=wg.createRoot,nh.hydrateRoot=wg.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fo(){return Fo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fo.apply(this,arguments)}var mr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(mr||(mr={}));const Eg="popstate";function Jx(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return Gh("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Kl(s)}return eT(e,n,null,t)}function Ue(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function d_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Zx(){return Math.random().toString(36).substr(2,8)}function xg(t,e){return{usr:t.state,key:t.key,idx:e}}function Gh(t,e,n,r){return n===void 0&&(n=null),Fo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?_i(e):e,{state:n,key:e&&e.key||r||Zx()})}function Kl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function _i(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function eT(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=mr.Pop,u=null,c=p();c==null&&(c=0,o.replaceState(Fo({},o.state,{idx:c}),""));function p(){return(o.state||{idx:null}).idx}function m(){l=mr.Pop;let N=p(),w=N==null?null:N-c;c=N,u&&u({action:l,location:k.location,delta:w})}function g(N,w){l=mr.Push;let E=Gh(k.location,N,w);c=p()+1;let S=xg(E,c),O=k.createHref(E);try{o.pushState(S,"",O)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(O)}i&&u&&u({action:l,location:k.location,delta:1})}function _(N,w){l=mr.Replace;let E=Gh(k.location,N,w);c=p();let S=xg(E,c),O=k.createHref(E);o.replaceState(S,"",O),i&&u&&u({action:l,location:k.location,delta:0})}function b(N){let w=s.location.origin!=="null"?s.location.origin:s.location.href,E=typeof N=="string"?N:Kl(N);return E=E.replace(/ $/,"%20"),Ue(w,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,w)}let k={get action(){return l},get location(){return t(s,o)},listen(N){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Eg,m),u=N,()=>{s.removeEventListener(Eg,m),u=null}},createHref(N){return e(s,N)},createURL:b,encodeLocation(N){let w=b(N);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:g,replace:_,go(N){return o.go(N)}};return k}var Tg;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Tg||(Tg={}));function tT(t,e,n){return n===void 0&&(n="/"),nT(t,e,n)}function nT(t,e,n,r){let s=typeof e=="string"?_i(e):e,i=yf(s.pathname||"/",n);if(i==null)return null;let o=f_(t);rT(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let c=mT(i);l=dT(o[u],c)}return l}function f_(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Ue(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let c=Sr([r,u.relativePath]),p=n.concat(u);i.children&&i.children.length>0&&(Ue(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),f_(i.children,e,p,c)),!(i.path==null&&!i.index)&&e.push({path:c,score:cT(c,i.index),routesMeta:p})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of p_(i.path))s(i,o,u)}),e}function p_(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=p_(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function rT(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:hT(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const sT=/^:[\w-]+$/,iT=3,oT=2,aT=1,lT=10,uT=-2,Ig=t=>t==="*";function cT(t,e){let n=t.split("/"),r=n.length;return n.some(Ig)&&(r+=uT),e&&(r+=oT),n.filter(s=>!Ig(s)).reduce((s,i)=>s+(sT.test(i)?iT:i===""?aT:lT),r)}function hT(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function dT(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],c=l===r.length-1,p=i==="/"?e:e.slice(i.length)||"/",m=fT({path:u.relativePath,caseSensitive:u.caseSensitive,end:c},p),g=u.route;if(!m)return null;Object.assign(s,m.params),o.push({params:s,pathname:Sr([i,m.pathname]),pathnameBase:_T(Sr([i,m.pathnameBase])),route:g}),m.pathnameBase!=="/"&&(i=Sr([i,m.pathnameBase]))}return o}function fT(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=pT(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((c,p,m)=>{let{paramName:g,isOptional:_}=p;if(g==="*"){let k=l[m]||"";o=i.slice(0,i.length-k.length).replace(/(.)\/+$/,"$1")}const b=l[m];return _&&!b?c[g]=void 0:c[g]=(b||"").replace(/%2F/g,"/"),c},{}),pathname:i,pathnameBase:o,pattern:t}}function pT(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),d_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function mT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return d_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function yf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function gT(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?_i(t):t;return{pathname:n?n.startsWith("/")?n:vT(n,e):e,search:wT(r),hash:ET(s)}}function vT(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Uc(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yT(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function m_(t,e){let n=yT(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function g_(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=_i(t):(s=Fo({},t),Ue(!s.pathname||!s.pathname.includes("?"),Uc("?","pathname","search",s)),Ue(!s.pathname||!s.pathname.includes("#"),Uc("#","pathname","hash",s)),Ue(!s.search||!s.search.includes("#"),Uc("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let m=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),m-=1;s.pathname=g.join("/")}l=m>=0?e[m]:"/"}let u=gT(s,l),c=o&&o!=="/"&&o.endsWith("/"),p=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(c||p)&&(u.pathname+="/"),u}const Sr=t=>t.join("/").replace(/\/\/+/g,"/"),_T=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),wT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,ET=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function xT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const v_=["post","put","patch","delete"];new Set(v_);const TT=["get",...v_];new Set(TT);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Uo(){return Uo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Uo.apply(this,arguments)}const _f=x.createContext(null),IT=x.createContext(null),gs=x.createContext(null),Ou=x.createContext(null),Fr=x.createContext({outlet:null,matches:[],isDataRoute:!1}),y_=x.createContext(null);function ST(t,e){let{relative:n}=e===void 0?{}:e;ra()||Ue(!1);let{basename:r,navigator:s}=x.useContext(gs),{hash:i,pathname:o,search:l}=w_(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Sr([r,o])),s.createHref({pathname:u,search:l,hash:i})}function ra(){return x.useContext(Ou)!=null}function sa(){return ra()||Ue(!1),x.useContext(Ou).location}function __(t){x.useContext(gs).static||x.useLayoutEffect(t)}function ia(){let{isDataRoute:t}=x.useContext(Fr);return t?FT():kT()}function kT(){ra()||Ue(!1);let t=x.useContext(_f),{basename:e,future:n,navigator:r}=x.useContext(gs),{matches:s}=x.useContext(Fr),{pathname:i}=sa(),o=JSON.stringify(m_(s,n.v7_relativeSplatPath)),l=x.useRef(!1);return __(()=>{l.current=!0}),x.useCallback(function(c,p){if(p===void 0&&(p={}),!l.current)return;if(typeof c=="number"){r.go(c);return}let m=g_(c,JSON.parse(o),i,p.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:Sr([e,m.pathname])),(p.replace?r.replace:r.push)(m,p.state,p)},[e,r,o,i,t])}function CT(){let{matches:t}=x.useContext(Fr),e=t[t.length-1];return e?e.params:{}}function w_(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=x.useContext(gs),{matches:s}=x.useContext(Fr),{pathname:i}=sa(),o=JSON.stringify(m_(s,r.v7_relativeSplatPath));return x.useMemo(()=>g_(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function RT(t,e){return bT(t,e)}function bT(t,e,n,r){ra()||Ue(!1);let{navigator:s}=x.useContext(gs),{matches:i}=x.useContext(Fr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let c=sa(),p;if(e){var m;let N=typeof e=="string"?_i(e):e;u==="/"||(m=N.pathname)!=null&&m.startsWith(u)||Ue(!1),p=N}else p=c;let g=p.pathname||"/",_=g;if(u!=="/"){let N=u.replace(/^\//,"").split("/");_="/"+g.replace(/^\//,"").split("/").slice(N.length).join("/")}let b=tT(t,{pathname:_}),k=OT(b&&b.map(N=>Object.assign({},N,{params:Object.assign({},l,N.params),pathname:Sr([u,s.encodeLocation?s.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:Sr([u,s.encodeLocation?s.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),i,n,r);return e&&k?x.createElement(Ou.Provider,{value:{location:Uo({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:mr.Pop}},k):k}function AT(){let t=VT(),e=xT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:s},n):null,null)}const NT=x.createElement(AT,null);class PT extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?x.createElement(Fr.Provider,{value:this.props.routeContext},x.createElement(y_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function DT(t){let{routeContext:e,match:n,children:r}=t,s=x.useContext(_f);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(Fr.Provider,{value:e},r)}function OT(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let p=o.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);p>=0||Ue(!1),o=o.slice(0,Math.min(o.length,p+1))}let u=!1,c=-1;if(n&&r&&r.v7_partialHydration)for(let p=0;p<o.length;p++){let m=o[p];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(c=p),m.route.id){let{loaderData:g,errors:_}=n,b=m.route.loader&&g[m.route.id]===void 0&&(!_||_[m.route.id]===void 0);if(m.route.lazy||b){u=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((p,m,g)=>{let _,b=!1,k=null,N=null;n&&(_=l&&m.route.id?l[m.route.id]:void 0,k=m.route.errorElement||NT,u&&(c<0&&g===0?(UT("route-fallback"),b=!0,N=null):c===g&&(b=!0,N=m.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,g+1)),E=()=>{let S;return _?S=k:b?S=N:m.route.Component?S=x.createElement(m.route.Component,null):m.route.element?S=m.route.element:S=p,x.createElement(DT,{match:m,routeContext:{outlet:p,matches:w,isDataRoute:n!=null},children:S})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?x.createElement(PT,{location:n.location,revalidation:n.revalidation,component:k,error:_,children:E(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):E()},null)}var E_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(E_||{}),x_=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(x_||{});function jT(t){let e=x.useContext(_f);return e||Ue(!1),e}function MT(t){let e=x.useContext(IT);return e||Ue(!1),e}function LT(t){let e=x.useContext(Fr);return e||Ue(!1),e}function T_(t){let e=LT(),n=e.matches[e.matches.length-1];return n.route.id||Ue(!1),n.route.id}function VT(){var t;let e=x.useContext(y_),n=MT(),r=T_();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function FT(){let{router:t}=jT(E_.UseNavigateStable),e=T_(x_.UseNavigateStable),n=x.useRef(!1);return __(()=>{n.current=!0}),x.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Uo({fromRouteId:e},i)))},[t,e])}const Sg={};function UT(t,e,n){Sg[t]||(Sg[t]=!0)}function BT(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function no(t){Ue(!1)}function $T(t){let{basename:e="/",children:n=null,location:r,navigationType:s=mr.Pop,navigator:i,static:o=!1,future:l}=t;ra()&&Ue(!1);let u=e.replace(/^\/*/,"/"),c=x.useMemo(()=>({basename:u,navigator:i,static:o,future:Uo({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof r=="string"&&(r=_i(r));let{pathname:p="/",search:m="",hash:g="",state:_=null,key:b="default"}=r,k=x.useMemo(()=>{let N=yf(p,u);return N==null?null:{location:{pathname:N,search:m,hash:g,state:_,key:b},navigationType:s}},[u,p,m,g,_,b,s]);return k==null?null:x.createElement(gs.Provider,{value:c},x.createElement(Ou.Provider,{children:n,value:k}))}function zT(t){let{children:e,location:n}=t;return RT(Qh(e),n)}new Promise(()=>{});function Qh(t,e){e===void 0&&(e=[]);let n=[];return x.Children.forEach(t,(r,s)=>{if(!x.isValidElement(r))return;let i=[...e,s];if(r.type===x.Fragment){n.push.apply(n,Qh(r.props.children,i));return}r.type!==no&&Ue(!1),!r.props.index||!r.props.children||Ue(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Qh(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xh(){return Xh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xh.apply(this,arguments)}function WT(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function HT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function qT(t,e){return t.button===0&&(!e||e==="_self")&&!HT(t)}const YT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],KT="6";try{window.__reactRouterVersion=KT}catch{}const GT="startTransition",kg=U2[GT];function QT(t){let{basename:e,children:n,future:r,window:s}=t,i=x.useRef();i.current==null&&(i.current=Jx({window:s,v5Compat:!0}));let o=i.current,[l,u]=x.useState({action:o.action,location:o.location}),{v7_startTransition:c}=r||{},p=x.useCallback(m=>{c&&kg?kg(()=>u(m)):u(m)},[u,c]);return x.useLayoutEffect(()=>o.listen(p),[o,p]),x.useEffect(()=>BT(r),[r]),x.createElement($T,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const XT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",JT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,sn=x.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:u,to:c,preventScrollReset:p,viewTransition:m}=e,g=WT(e,YT),{basename:_}=x.useContext(gs),b,k=!1;if(typeof c=="string"&&JT.test(c)&&(b=c,XT))try{let S=new URL(window.location.href),O=c.startsWith("//")?new URL(S.protocol+c):new URL(c),L=yf(O.pathname,_);O.origin===S.origin&&L!=null?c=L+O.search+O.hash:k=!0}catch{}let N=ST(c,{relative:s}),w=ZT(c,{replace:o,state:l,target:u,preventScrollReset:p,relative:s,viewTransition:m});function E(S){r&&r(S),S.defaultPrevented||w(S)}return x.createElement("a",Xh({},g,{href:b||N,onClick:k||i?r:E,ref:n,target:u}))});var Cg;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Cg||(Cg={}));var Rg;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Rg||(Rg={}));function ZT(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,u=ia(),c=sa(),p=w_(t,{relative:o});return x.useCallback(m=>{if(qT(m,n)){m.preventDefault();let g=r!==void 0?r:Kl(c)===Kl(p);u(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[c,u,p,r,s,n,t,i,o,l])}var bg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},eI=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},S_={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,c=u?t[s+2]:0,p=i>>2,m=(i&3)<<4|l>>4;let g=(l&15)<<2|c>>6,_=c&63;u||(_=64,o||(g=64)),r.push(n[p],n[m],n[g],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(I_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):eI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const c=s<t.length?n[t.charAt(s)]:64;++s;const m=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||c==null||m==null)throw new tI;const g=i<<2|l>>4;if(r.push(g),c!==64){const _=l<<4&240|c>>2;if(r.push(_),m!==64){const b=c<<6&192|m;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const nI=function(t){const e=I_(t);return S_.encodeByteArray(e,!0)},Gl=function(t){return nI(t).replace(/\./g,"")},k_=function(t){try{return S_.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI=()=>rI().__FIREBASE_DEFAULTS__,iI=()=>{if(typeof process>"u"||typeof bg>"u")return;const t=bg.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},oI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&k_(t[1]);return e&&JSON.parse(e)},ju=()=>{try{return sI()||iI()||oI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},C_=t=>{var e,n;return(n=(e=ju())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},wf=t=>{const e=C_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},R_=()=>{var t;return(t=ju())===null||t===void 0?void 0:t.config},b_=t=>{var e;return(e=ju())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Gl(JSON.stringify(n)),Gl(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function uI(){var t;const e=(t=ju())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function cI(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function dI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fI(){const t=vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function pI(){return!uI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mI(){try{return typeof indexedDB=="object"}catch{return!1}}function gI(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI="FirebaseError";class Cn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=vI,Object.setPrototypeOf(this,Cn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,oa.prototype.create)}}class oa{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?yI(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Cn(s,l,r)}}function yI(t,e){return t.replace(_I,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const _I=/\{\$([^}]+)}/g;function wI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Ql(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Ag(i)&&Ag(o)){if(!Ql(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ag(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function EI(t,e){const n=new xI(t,e);return n.subscribe.bind(n)}class xI{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");TI(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Bc),s.error===void 0&&(s.error=Bc),s.complete===void 0&&(s.complete=Bc);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function TI(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Bc(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xt(t){return t&&t._delegate?t._delegate:t}class Yn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new aI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kI(e))try{this.getOrInitializeService({instanceIdentifier:Kr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Kr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Kr){return this.instances.has(e)}getOptions(e=Kr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:SI(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Kr){return this.component?this.component.multipleInstances?e:Kr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function SI(t){return t===Kr?void 0:t}function kI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new II(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const RI={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},bI=ie.INFO,AI={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},NI=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=AI[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ef{constructor(e){this.name=e,this._logLevel=bI,this._logHandler=NI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?RI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const PI=(t,e)=>e.some(n=>t instanceof n);let Ng,Pg;function DI(){return Ng||(Ng=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OI(){return Pg||(Pg=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const N_=new WeakMap,Jh=new WeakMap,P_=new WeakMap,$c=new WeakMap,xf=new WeakMap;function jI(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(kr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&N_.set(n,t)}).catch(()=>{}),xf.set(e,t),e}function MI(t){if(Jh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Jh.set(t,e)}let Zh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Jh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||P_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return kr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function LI(t){Zh=t(Zh)}function VI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(zc(this),e,...n);return P_.set(r,e.sort?e.sort():[e]),kr(r)}:OI().includes(t)?function(...e){return t.apply(zc(this),e),kr(N_.get(this))}:function(...e){return kr(t.apply(zc(this),e))}}function FI(t){return typeof t=="function"?VI(t):(t instanceof IDBTransaction&&MI(t),PI(t,DI())?new Proxy(t,Zh):t)}function kr(t){if(t instanceof IDBRequest)return jI(t);if($c.has(t))return $c.get(t);const e=FI(t);return e!==t&&($c.set(t,e),xf.set(e,t)),e}const zc=t=>xf.get(t);function UI(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=kr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(kr(o.result),u.oldVersion,u.newVersion,kr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",c=>s(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const BI=["get","getKey","getAll","getAllKeys","count"],$I=["put","add","delete","clear"],Wc=new Map;function Dg(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wc.get(e))return Wc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=$I.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||BI.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),s&&u.done]))[0]};return Wc.set(e,i),i}LI(t=>({...t,get:(e,n,r)=>Dg(e,n)||t.get(e,n,r),has:(e,n)=>!!Dg(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(WI(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function WI(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ed="@firebase/app",Og="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kn=new Ef("@firebase/app"),HI="@firebase/app-compat",qI="@firebase/analytics-compat",YI="@firebase/analytics",KI="@firebase/app-check-compat",GI="@firebase/app-check",QI="@firebase/auth",XI="@firebase/auth-compat",JI="@firebase/database",ZI="@firebase/data-connect",eS="@firebase/database-compat",tS="@firebase/functions",nS="@firebase/functions-compat",rS="@firebase/installations",sS="@firebase/installations-compat",iS="@firebase/messaging",oS="@firebase/messaging-compat",aS="@firebase/performance",lS="@firebase/performance-compat",uS="@firebase/remote-config",cS="@firebase/remote-config-compat",hS="@firebase/storage",dS="@firebase/storage-compat",fS="@firebase/firestore",pS="@firebase/vertexai-preview",mS="@firebase/firestore-compat",gS="firebase",vS="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const td="[DEFAULT]",yS={[ed]:"fire-core",[HI]:"fire-core-compat",[YI]:"fire-analytics",[qI]:"fire-analytics-compat",[GI]:"fire-app-check",[KI]:"fire-app-check-compat",[QI]:"fire-auth",[XI]:"fire-auth-compat",[JI]:"fire-rtdb",[ZI]:"fire-data-connect",[eS]:"fire-rtdb-compat",[tS]:"fire-fn",[nS]:"fire-fn-compat",[rS]:"fire-iid",[sS]:"fire-iid-compat",[iS]:"fire-fcm",[oS]:"fire-fcm-compat",[aS]:"fire-perf",[lS]:"fire-perf-compat",[uS]:"fire-rc",[cS]:"fire-rc-compat",[hS]:"fire-gcs",[dS]:"fire-gcs-compat",[fS]:"fire-fst",[mS]:"fire-fst-compat",[pS]:"fire-vertex","fire-js":"fire-js",[gS]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xl=new Map,_S=new Map,nd=new Map;function jg(t,e){try{t.container.addComponent(e)}catch(n){Kn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Pr(t){const e=t.name;if(nd.has(e))return Kn.debug(`There were multiple attempts to register component ${e}.`),!1;nd.set(e,t);for(const n of Xl.values())jg(n,t);for(const n of _S.values())jg(n,t);return!0}function la(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function vn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Cr=new oa("app","Firebase",wS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Yn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Cr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs=vS;function D_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:td,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Cr.create("bad-app-name",{appName:String(s)});if(n||(n=R_()),!n)throw Cr.create("no-options");const i=Xl.get(s);if(i){if(Ql(n,i.options)&&Ql(r,i.config))return i;throw Cr.create("duplicate-app",{appName:s})}const o=new CI(s);for(const u of nd.values())o.addComponent(u);const l=new ES(n,r,o);return Xl.set(s,l),l}function Mu(t=td){const e=Xl.get(t);if(!e&&t===td&&R_())return D_();if(!e)throw Cr.create("no-app",{appName:t});return e}function Yt(t,e,n){var r;let s=(r=yS[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Kn.warn(l.join(" "));return}Pr(new Yn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xS="firebase-heartbeat-database",TS=1,Bo="firebase-heartbeat-store";let Hc=null;function O_(){return Hc||(Hc=UI(xS,TS,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Bo)}catch(n){console.warn(n)}}}}).catch(t=>{throw Cr.create("idb-open",{originalErrorMessage:t.message})})),Hc}async function IS(t){try{const n=(await O_()).transaction(Bo),r=await n.objectStore(Bo).get(j_(t));return await n.done,r}catch(e){if(e instanceof Cn)Kn.warn(e.message);else{const n=Cr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Kn.warn(n.message)}}}async function Mg(t,e){try{const r=(await O_()).transaction(Bo,"readwrite");await r.objectStore(Bo).put(e,j_(t)),await r.done}catch(n){if(n instanceof Cn)Kn.warn(n.message);else{const r=Cr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Kn.warn(r.message)}}}function j_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SS=1024,kS=30*24*60*60*1e3;class CS{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new bS(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Lg();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=kS}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Kn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Lg(),{heartbeatsToSend:r,unsentEntries:s}=RS(this._heartbeatsCache.heartbeats),i=Gl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Kn.warn(n),""}}}function Lg(){return new Date().toISOString().substring(0,10)}function RS(t,e=SS){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Vg(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Vg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class bS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mI()?gI().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await IS(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Mg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Mg(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Vg(t){return Gl(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AS(t){Pr(new Yn("platform-logger",e=>new zI(e),"PRIVATE")),Pr(new Yn("heartbeat",e=>new CS(e),"PRIVATE")),Yt(ed,Og,t),Yt(ed,Og,"esm2017"),Yt("fire-js","")}AS("");function Tf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function M_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const NS=M_,L_=new oa("auth","Firebase",M_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jl=new Ef("@firebase/auth");function PS(t,...e){Jl.logLevel<=ie.WARN&&Jl.warn(`Auth (${vs}): ${t}`,...e)}function gl(t,...e){Jl.logLevel<=ie.ERROR&&Jl.error(`Auth (${vs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(t,...e){throw Sf(t,...e)}function hn(t,...e){return Sf(t,...e)}function If(t,e,n){const r=Object.assign(Object.assign({},NS()),{[e]:n});return new oa("auth","Firebase",r).create(e,{appName:t.name})}function Rr(t){return If(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function V_(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Tn(t,"argument-error"),If(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Sf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return L_.create(t,...e)}function G(t,e,...n){if(!t)throw Sf(e,...n)}function Vn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw gl(e),new Error(e)}function Gn(t,e){t||Vn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rd(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function DS(){return Fg()==="http:"||Fg()==="https:"}function Fg(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(DS()||hI()||"connection"in navigator)?navigator.onLine:!0}function jS(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(e,n){this.shortDelay=e,this.longDelay=n,Gn(n>e,"Short delay should be less than long delay!"),this.isMobile=lI()||dI()}get(){return OS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(t,e){Gn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F_{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Vn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Vn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Vn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS=new ua(3e4,6e4);function Cf(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function wi(t,e,n,r,s={}){return U_(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=aa(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c=Object.assign({method:e,headers:u},i);return cI()||(c.referrerPolicy="no-referrer"),F_.fetch()(B_(t,t.config.apiHost,n,l),c)})}async function U_(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},MS),e);try{const s=new FS(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ja(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,c]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ja(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Ja(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Ja(t,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw If(t,p,c);Tn(t,p)}}catch(s){if(s instanceof Cn)throw s;Tn(t,"network-request-failed",{message:String(s)})}}async function VS(t,e,n,r,s={}){const i=await wi(t,e,n,r,s);return"mfaPendingCredential"in i&&Tn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function B_(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?kf(t.config,s):`${t.config.apiScheme}://${s}`}class FS{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(hn(this.auth,"network-request-failed")),LS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ja(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=hn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function US(t,e){return wi(t,"POST","/v1/accounts:delete",e)}async function $_(t,e){return wi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BS(t,e=!1){const n=xt(t),r=await n.getIdToken(e),s=Rf(r);G(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:go(qc(s.auth_time)),issuedAtTime:go(qc(s.iat)),expirationTime:go(qc(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function qc(t){return Number(t)*1e3}function Rf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return gl("JWT malformed, contained fewer than 3 sections"),null;try{const s=k_(n);return s?JSON.parse(s):(gl("Failed to decode base64 JWT payload"),null)}catch(s){return gl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Ug(t){const e=Rf(t);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $o(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Cn&&$S(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function $S({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sd{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=go(this.lastLoginAt),this.creationTime=go(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zl(t){var e;const n=t.auth,r=await t.getIdToken(),s=await $o(t,$_(n,{idToken:r}));G(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?z_(i.providerUserInfo):[],l=HS(t.providerData,o),u=t.isAnonymous,c=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),p=u?c:!1,m={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new sd(i.createdAt,i.lastLoginAt),isAnonymous:p};Object.assign(t,m)}async function WS(t){const e=xt(t);await Zl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function HS(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function z_(t){return t.map(e=>{var{providerId:n}=e,r=Tf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qS(t,e){const n=await U_(t,{},async()=>{const r=aa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=B_(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",F_.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function YS(t,e){return wi(t,"POST","/v2/accounts:revokeToken",Cf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ks{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ug(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){G(e.length!==0,"internal-error");const n=Ug(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(G(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await qS(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ks;return r&&(G(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(G(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(G(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ks,this.toJSON())}_performRefresh(){return Vn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t,e){G(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Fn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Tf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new sd(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await $o(this,this.stsTokenManager.getToken(this.auth,e));return G(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return BS(this,e)}reload(){return WS(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Fn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Zl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(vn(this.auth.app))return Promise.reject(Rr(this.auth));const e=await this.getIdToken();return await $o(this,US(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,u,c,p;const m=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,_=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,k=(l=n.tenantId)!==null&&l!==void 0?l:void 0,N=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,w=(c=n.createdAt)!==null&&c!==void 0?c:void 0,E=(p=n.lastLoginAt)!==null&&p!==void 0?p:void 0,{uid:S,emailVerified:O,isAnonymous:L,providerData:M,stsTokenManager:T}=n;G(S&&T,e,"internal-error");const y=Ks.fromJSON(this.name,T);G(typeof S=="string",e,"internal-error"),sr(m,e.name),sr(g,e.name),G(typeof O=="boolean",e,"internal-error"),G(typeof L=="boolean",e,"internal-error"),sr(_,e.name),sr(b,e.name),sr(k,e.name),sr(N,e.name),sr(w,e.name),sr(E,e.name);const I=new Fn({uid:S,auth:e,email:g,emailVerified:O,displayName:m,isAnonymous:L,photoURL:b,phoneNumber:_,tenantId:k,stsTokenManager:y,createdAt:w,lastLoginAt:E});return M&&Array.isArray(M)&&(I.providerData=M.map(R=>Object.assign({},R))),N&&(I._redirectEventId=N),I}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ks;s.updateFromServerResponse(n);const i=new Fn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Zl(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];G(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?z_(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Ks;l.updateFromIdToken(r);const u=new Fn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),c={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new sd(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bg=new Map;function Un(t){Gn(t instanceof Function,"Expected a class definition");let e=Bg.get(t);return e?(Gn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Bg.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}W_.type="NONE";const $g=W_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl(t,e,n){return`firebase:${t}:${e}:${n}`}class Gs{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=vl(this.userKey,s.apiKey,i),this.fullPersistenceKey=vl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Fn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Gs(Un($g),e,r);const s=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let i=s[0]||Un($g);const o=vl(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const p=await c._get(o);if(p){const m=Fn._fromJSON(e,p);c!==i&&(l=m),i=c;break}}catch{}const u=s.filter(c=>c._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Gs(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==i)try{await c._remove(o)}catch{}})),new Gs(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zg(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(K_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(H_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Q_(e))return"Blackberry";if(X_(e))return"Webos";if(q_(e))return"Safari";if((e.includes("chrome/")||Y_(e))&&!e.includes("edge/"))return"Chrome";if(G_(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function H_(t=vt()){return/firefox\//i.test(t)}function q_(t=vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Y_(t=vt()){return/crios\//i.test(t)}function K_(t=vt()){return/iemobile/i.test(t)}function G_(t=vt()){return/android/i.test(t)}function Q_(t=vt()){return/blackberry/i.test(t)}function X_(t=vt()){return/webos/i.test(t)}function bf(t=vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function KS(t=vt()){var e;return bf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function GS(){return fI()&&document.documentMode===10}function J_(t=vt()){return bf(t)||G_(t)||X_(t)||Q_(t)||/windows phone/i.test(t)||K_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z_(t,e=[]){let n;switch(t){case"Browser":n=zg(vt());break;case"Worker":n=`${zg(vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${vs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XS(t,e={}){return wi(t,"GET","/v2/passwordPolicy",Cf(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JS=6;class ZS{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:JS,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e5{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Wg(this),this.idTokenSubscription=new Wg(this),this.beforeStateQueue=new QS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=L_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Un(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Gs.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await $_(this,{idToken:e}),r=await Fn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(vn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Zl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(vn(this.app))return Promise.reject(Rr(this));const n=e?xt(e):null;return n&&G(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return vn(this.app)?Promise.reject(Rr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return vn(this.app)?Promise.reject(Rr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Un(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XS(this),n=new ZS(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new oa("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await YS(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Un(e)||this._popupRedirectResolver;G(n,this,"argument-error"),this.redirectPersistenceManager=await Gs.create(this,[Un(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Z_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&PS(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ei(t){return xt(t)}class Wg{constructor(e){this.auth=e,this.observer=null,this.addObserver=EI(n=>this.observer=n)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Af={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function t5(t){Af=t}function n5(t){return Af.loadJS(t)}function r5(){return Af.gapiScript}function s5(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i5(t,e){const n=la(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Ql(i,e??{}))return s;Tn(s,"already-initialized")}return n.initialize({options:e})}function o5(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Un);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function a5(t,e,n){const r=Ei(t);G(r._canInitEmulator,r,"emulator-config-failed"),G(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=e1(e),{host:o,port:l}=l5(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),u5()}function e1(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function l5(t){const e=e1(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Hg(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Hg(o)}}}function Hg(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function u5(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t1{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Vn("not implemented")}_getIdTokenResponse(e){return Vn("not implemented")}_linkToIdToken(e,n){return Vn("not implemented")}_getReauthenticationResolver(e){return Vn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qs(t,e){return VS(t,"POST","/v1/accounts:signInWithIdp",Cf(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c5="http://localhost";class us extends t1{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new us(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Tn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Tf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new us(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Qs(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Qs(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Qs(e,n)}buildRequest(){const e={requestUri:c5,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=aa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ca extends Lu{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends ca{constructor(){super("facebook.com")}static credential(e){return us._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cr.credential(e.oauthAccessToken)}catch{return null}}}cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";cr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn extends ca{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return us._fromParams({providerId:jn.PROVIDER_ID,signInMethod:jn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return jn.credentialFromTaggedObject(e)}static credentialFromError(e){return jn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return jn.credential(n,r)}catch{return null}}}jn.GOOGLE_SIGN_IN_METHOD="google.com";jn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends ca{constructor(){super("github.com")}static credential(e){return us._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return hr.credential(e.oauthAccessToken)}catch{return null}}}hr.GITHUB_SIGN_IN_METHOD="github.com";hr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends ca{constructor(){super("twitter.com")}static credential(e,n){return us._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return dr.credential(n,r)}catch{return null}}}dr.TWITTER_SIGN_IN_METHOD="twitter.com";dr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Fn._fromIdTokenResponse(e,r,s),o=qg(r);return new oi({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=qg(r);return new oi({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function qg(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eu extends Cn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,eu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new eu(e,n,r,s)}}function n1(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?eu._fromErrorAndOperation(t,i,e,r):i})}async function h5(t,e,n=!1){const r=await $o(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return oi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function d5(t,e,n=!1){const{auth:r}=t;if(vn(r.app))return Promise.reject(Rr(r));const s="reauthenticate";try{const i=await $o(t,n1(r,s,e,t),n);G(i.idToken,r,"internal-error");const o=Rf(i.idToken);G(o,r,"internal-error");const{sub:l}=o;return G(t.uid===l,r,"user-mismatch"),oi._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Tn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f5(t,e,n=!1){if(vn(t.app))return Promise.reject(Rr(t));const r="signIn",s=await n1(t,r,e),i=await oi._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function p5(t,e,n,r){return xt(t).onIdTokenChanged(e,n,r)}function m5(t,e,n){return xt(t).beforeAuthStateChanged(e,n)}function g5(t,e,n,r){return xt(t).onAuthStateChanged(e,n,r)}function v5(t){return xt(t).signOut()}const tu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(tu,"1"),this.storage.removeItem(tu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y5=1e3,_5=10;class s1 extends r1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=J_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);GS()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,_5):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},y5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}s1.type="LOCAL";const w5=s1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1 extends r1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}i1.type="SESSION";const o1=i1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E5(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Vu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async c=>c(n.origin,i)),u=await E5(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Vu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nf(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x5{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const c=Nf("",20);s.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(m){const g=m;if(g.data.eventId===c)switch(g.data.status){case"ack":clearTimeout(p),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(p),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return window}function T5(t){wn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a1(){return typeof wn().WorkerGlobalScope<"u"&&typeof wn().importScripts=="function"}async function I5(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function S5(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function k5(){return a1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l1="firebaseLocalStorageDb",C5=1,nu="firebaseLocalStorage",u1="fbase_key";class ha{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Fu(t,e){return t.transaction([nu],e?"readwrite":"readonly").objectStore(nu)}function R5(){const t=indexedDB.deleteDatabase(l1);return new ha(t).toPromise()}function id(){const t=indexedDB.open(l1,C5);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(nu,{keyPath:u1})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(nu)?e(r):(r.close(),await R5(),e(await id()))})})}async function Yg(t,e,n){const r=Fu(t,!0).put({[u1]:e,value:n});return new ha(r).toPromise()}async function b5(t,e){const n=Fu(t,!1).get(e),r=await new ha(n).toPromise();return r===void 0?null:r.value}function Kg(t,e){const n=Fu(t,!0).delete(e);return new ha(n).toPromise()}const A5=800,N5=3;class c1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await id(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>N5)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return a1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Vu._getInstance(k5()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await I5(),!this.activeServiceWorker)return;this.sender=new x5(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||S5()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await id();return await Yg(e,tu,"1"),await Kg(e,tu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Yg(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>b5(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Kg(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Fu(s,!1).getAll();return new ha(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),A5)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}c1.type="LOCAL";const P5=c1;new ua(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pf(t,e){return e?Un(e):(G(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Df extends t1{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Qs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Qs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Qs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function D5(t){return f5(t.auth,new Df(t),t.bypassAuthState)}function O5(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),d5(n,new Df(t),t.bypassAuthState)}async function j5(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),h5(n,new Df(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h1{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return D5;case"linkViaPopup":case"linkViaRedirect":return j5;case"reauthViaPopup":case"reauthViaRedirect":return O5;default:Tn(this.auth,"internal-error")}}resolve(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M5=new ua(2e3,1e4);async function L5(t,e,n){if(vn(t.app))return Promise.reject(hn(t,"operation-not-supported-in-this-environment"));const r=Ei(t);V_(t,e,Lu);const s=Pf(r,n);return new Zr(r,"signInViaPopup",e,s).executeNotNull()}class Zr extends h1{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Zr.currentPopupAction&&Zr.currentPopupAction.cancel(),Zr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return G(e,this.auth,"internal-error"),e}async onExecution(){Gn(this.filter.length===1,"Popup operations only handle one event");const e=Nf();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Zr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,M5.get())};e()}}Zr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V5="pendingRedirect",yl=new Map;class F5 extends h1{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=yl.get(this.auth._key());if(!e){try{const r=await U5(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}yl.set(this.auth._key(),e)}return this.bypassAuthState||yl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function U5(t,e){const n=f1(e),r=d1(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}async function B5(t,e){return d1(t)._set(f1(e),"true")}function $5(t,e){yl.set(t._key(),e)}function d1(t){return Un(t._redirectPersistence)}function f1(t){return vl(V5,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gg(t,e,n){return z5(t,e,n)}async function z5(t,e,n){if(vn(t.app))return Promise.reject(Rr(t));const r=Ei(t);V_(t,e,Lu),await r._initializationPromise;const s=Pf(r,n);return await B5(s,r),s._openRedirect(r,e,"signInViaRedirect")}async function W5(t,e){return await Ei(t)._initializationPromise,p1(t,e,!1)}async function p1(t,e,n=!1){if(vn(t.app))return Promise.reject(Rr(t));const r=Ei(t),s=Pf(r,e),o=await new F5(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H5=10*60*1e3;class q5{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Y5(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!m1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(hn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=H5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Qg(e))}saveEventToCache(e){this.cachedEventUids.add(Qg(e)),this.lastProcessedEventTime=Date.now()}}function Qg(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function m1({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Y5(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return m1(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function K5(t,e={}){return wi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G5=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Q5=/^https?/;async function X5(t){if(t.config.emulator)return;const{authorizedDomains:e}=await K5(t);for(const n of e)try{if(J5(n))return}catch{}Tn(t,"unauthorized-domain")}function J5(t){const e=rd(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Q5.test(n))return!1;if(G5.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z5=new ua(3e4,6e4);function Xg(){const t=wn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function ek(t){return new Promise((e,n)=>{var r,s,i;function o(){Xg(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Xg(),n(hn(t,"network-request-failed"))},timeout:Z5.get()})}if(!((s=(r=wn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=wn().gapi)===null||i===void 0)&&i.load)o();else{const l=s5("iframefcb");return wn()[l]=()=>{gapi.load?o():n(hn(t,"network-request-failed"))},n5(`${r5()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw _l=null,e})}let _l=null;function tk(t){return _l=_l||ek(t),_l}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=new ua(5e3,15e3),rk="__/auth/iframe",sk="emulator/auth/iframe",ik={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ok=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ak(t){const e=t.config;G(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?kf(e,sk):`https://${t.config.authDomain}/${rk}`,r={apiKey:e.apiKey,appName:t.name,v:vs},s=ok.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${aa(r).slice(1)}`}async function lk(t){const e=await tk(t),n=wn().gapi;return G(n,t,"internal-error"),e.open({where:document.body,url:ak(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ik,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=hn(t,"network-request-failed"),l=wn().setTimeout(()=>{i(o)},nk.get());function u(){wn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ck=500,hk=600,dk="_blank",fk="http://localhost";class Jg{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function pk(t,e,n,r=ck,s=hk){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},uk),{width:r.toString(),height:s.toString(),top:i,left:o}),c=vt().toLowerCase();n&&(l=Y_(c)?dk:n),H_(c)&&(e=e||fk,u.scrollbars="yes");const p=Object.entries(u).reduce((g,[_,b])=>`${g}${_}=${b},`,"");if(KS(c)&&l!=="_self")return mk(e||"",l),new Jg(null);const m=window.open(e||"",l,p);G(m,t,"popup-blocked");try{m.focus()}catch{}return new Jg(m)}function mk(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk="__/auth/handler",vk="emulator/auth/handler",yk=encodeURIComponent("fac");async function Zg(t,e,n,r,s,i){G(t.config.authDomain,t,"auth-domain-config-required"),G(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:vs,eventId:s};if(e instanceof Lu){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",wI(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries({}))o[p]=m}if(e instanceof ca){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const u=await t._getAppCheckToken(),c=u?`#${yk}=${encodeURIComponent(u)}`:"";return`${_k(t)}?${aa(l).slice(1)}${c}`}function _k({config:t}){return t.emulator?kf(t,vk):`https://${t.authDomain}/${gk}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yc="webStorageSupport";class wk{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=o1,this._completeRedirectFn=p1,this._overrideRedirectResult=$5}async _openPopup(e,n,r,s){var i;Gn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Zg(e,n,r,rd(),s);return pk(e,o,Nf())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Zg(e,n,r,rd(),s);return T5(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Gn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await lk(e),r=new q5(e);return n.register("authEvent",s=>(G(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Yc,{type:Yc},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Yc];o!==void 0&&n(!!o),Tn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=X5(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return J_()||q_()||bf()}}const Ek=wk;var e0="@firebase/auth",t0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tk(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ik(t){Pr(new Yn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;G(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Z_(t)},c=new e5(r,s,i,u);return o5(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Pr(new Yn("auth-internal",e=>{const n=Ei(e.getProvider("auth").getImmediate());return(r=>new xk(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Yt(e0,t0,Tk(t)),Yt(e0,t0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=5*60,kk=b_("authIdTokenMaxAge")||Sk;let n0=null;const Ck=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>kk)return;const s=n==null?void 0:n.token;n0!==s&&(n0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Rk(t=Mu()){const e=la(t,"auth");if(e.isInitialized())return e.getImmediate();const n=i5(t,{popupRedirectResolver:Ek,persistence:[P5,w5,o1]}),r=b_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=Ck(i.toString());m5(n,o,()=>o(n.currentUser)),p5(n,l=>o(l))}}const s=C_("auth");return s&&a5(n,`http://${s}`),n}function bk(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}t5({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=hn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",bk().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Ik("Browser");var r0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rs,g1;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,y){function I(){}I.prototype=y.prototype,T.D=y.prototype,T.prototype=new I,T.prototype.constructor=T,T.C=function(R,A,P){for(var C=Array(arguments.length-2),St=2;St<arguments.length;St++)C[St-2]=arguments[St];return y.prototype[A].apply(R,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,y,I){I||(I=0);var R=Array(16);if(typeof y=="string")for(var A=0;16>A;++A)R[A]=y.charCodeAt(I++)|y.charCodeAt(I++)<<8|y.charCodeAt(I++)<<16|y.charCodeAt(I++)<<24;else for(A=0;16>A;++A)R[A]=y[I++]|y[I++]<<8|y[I++]<<16|y[I++]<<24;y=T.g[0],I=T.g[1],A=T.g[2];var P=T.g[3],C=y+(P^I&(A^P))+R[0]+3614090360&4294967295;y=I+(C<<7&4294967295|C>>>25),C=P+(A^y&(I^A))+R[1]+3905402710&4294967295,P=y+(C<<12&4294967295|C>>>20),C=A+(I^P&(y^I))+R[2]+606105819&4294967295,A=P+(C<<17&4294967295|C>>>15),C=I+(y^A&(P^y))+R[3]+3250441966&4294967295,I=A+(C<<22&4294967295|C>>>10),C=y+(P^I&(A^P))+R[4]+4118548399&4294967295,y=I+(C<<7&4294967295|C>>>25),C=P+(A^y&(I^A))+R[5]+1200080426&4294967295,P=y+(C<<12&4294967295|C>>>20),C=A+(I^P&(y^I))+R[6]+2821735955&4294967295,A=P+(C<<17&4294967295|C>>>15),C=I+(y^A&(P^y))+R[7]+4249261313&4294967295,I=A+(C<<22&4294967295|C>>>10),C=y+(P^I&(A^P))+R[8]+1770035416&4294967295,y=I+(C<<7&4294967295|C>>>25),C=P+(A^y&(I^A))+R[9]+2336552879&4294967295,P=y+(C<<12&4294967295|C>>>20),C=A+(I^P&(y^I))+R[10]+4294925233&4294967295,A=P+(C<<17&4294967295|C>>>15),C=I+(y^A&(P^y))+R[11]+2304563134&4294967295,I=A+(C<<22&4294967295|C>>>10),C=y+(P^I&(A^P))+R[12]+1804603682&4294967295,y=I+(C<<7&4294967295|C>>>25),C=P+(A^y&(I^A))+R[13]+4254626195&4294967295,P=y+(C<<12&4294967295|C>>>20),C=A+(I^P&(y^I))+R[14]+2792965006&4294967295,A=P+(C<<17&4294967295|C>>>15),C=I+(y^A&(P^y))+R[15]+1236535329&4294967295,I=A+(C<<22&4294967295|C>>>10),C=y+(A^P&(I^A))+R[1]+4129170786&4294967295,y=I+(C<<5&4294967295|C>>>27),C=P+(I^A&(y^I))+R[6]+3225465664&4294967295,P=y+(C<<9&4294967295|C>>>23),C=A+(y^I&(P^y))+R[11]+643717713&4294967295,A=P+(C<<14&4294967295|C>>>18),C=I+(P^y&(A^P))+R[0]+3921069994&4294967295,I=A+(C<<20&4294967295|C>>>12),C=y+(A^P&(I^A))+R[5]+3593408605&4294967295,y=I+(C<<5&4294967295|C>>>27),C=P+(I^A&(y^I))+R[10]+38016083&4294967295,P=y+(C<<9&4294967295|C>>>23),C=A+(y^I&(P^y))+R[15]+3634488961&4294967295,A=P+(C<<14&4294967295|C>>>18),C=I+(P^y&(A^P))+R[4]+3889429448&4294967295,I=A+(C<<20&4294967295|C>>>12),C=y+(A^P&(I^A))+R[9]+568446438&4294967295,y=I+(C<<5&4294967295|C>>>27),C=P+(I^A&(y^I))+R[14]+3275163606&4294967295,P=y+(C<<9&4294967295|C>>>23),C=A+(y^I&(P^y))+R[3]+4107603335&4294967295,A=P+(C<<14&4294967295|C>>>18),C=I+(P^y&(A^P))+R[8]+1163531501&4294967295,I=A+(C<<20&4294967295|C>>>12),C=y+(A^P&(I^A))+R[13]+2850285829&4294967295,y=I+(C<<5&4294967295|C>>>27),C=P+(I^A&(y^I))+R[2]+4243563512&4294967295,P=y+(C<<9&4294967295|C>>>23),C=A+(y^I&(P^y))+R[7]+1735328473&4294967295,A=P+(C<<14&4294967295|C>>>18),C=I+(P^y&(A^P))+R[12]+2368359562&4294967295,I=A+(C<<20&4294967295|C>>>12),C=y+(I^A^P)+R[5]+4294588738&4294967295,y=I+(C<<4&4294967295|C>>>28),C=P+(y^I^A)+R[8]+2272392833&4294967295,P=y+(C<<11&4294967295|C>>>21),C=A+(P^y^I)+R[11]+1839030562&4294967295,A=P+(C<<16&4294967295|C>>>16),C=I+(A^P^y)+R[14]+4259657740&4294967295,I=A+(C<<23&4294967295|C>>>9),C=y+(I^A^P)+R[1]+2763975236&4294967295,y=I+(C<<4&4294967295|C>>>28),C=P+(y^I^A)+R[4]+1272893353&4294967295,P=y+(C<<11&4294967295|C>>>21),C=A+(P^y^I)+R[7]+4139469664&4294967295,A=P+(C<<16&4294967295|C>>>16),C=I+(A^P^y)+R[10]+3200236656&4294967295,I=A+(C<<23&4294967295|C>>>9),C=y+(I^A^P)+R[13]+681279174&4294967295,y=I+(C<<4&4294967295|C>>>28),C=P+(y^I^A)+R[0]+3936430074&4294967295,P=y+(C<<11&4294967295|C>>>21),C=A+(P^y^I)+R[3]+3572445317&4294967295,A=P+(C<<16&4294967295|C>>>16),C=I+(A^P^y)+R[6]+76029189&4294967295,I=A+(C<<23&4294967295|C>>>9),C=y+(I^A^P)+R[9]+3654602809&4294967295,y=I+(C<<4&4294967295|C>>>28),C=P+(y^I^A)+R[12]+3873151461&4294967295,P=y+(C<<11&4294967295|C>>>21),C=A+(P^y^I)+R[15]+530742520&4294967295,A=P+(C<<16&4294967295|C>>>16),C=I+(A^P^y)+R[2]+3299628645&4294967295,I=A+(C<<23&4294967295|C>>>9),C=y+(A^(I|~P))+R[0]+4096336452&4294967295,y=I+(C<<6&4294967295|C>>>26),C=P+(I^(y|~A))+R[7]+1126891415&4294967295,P=y+(C<<10&4294967295|C>>>22),C=A+(y^(P|~I))+R[14]+2878612391&4294967295,A=P+(C<<15&4294967295|C>>>17),C=I+(P^(A|~y))+R[5]+4237533241&4294967295,I=A+(C<<21&4294967295|C>>>11),C=y+(A^(I|~P))+R[12]+1700485571&4294967295,y=I+(C<<6&4294967295|C>>>26),C=P+(I^(y|~A))+R[3]+2399980690&4294967295,P=y+(C<<10&4294967295|C>>>22),C=A+(y^(P|~I))+R[10]+4293915773&4294967295,A=P+(C<<15&4294967295|C>>>17),C=I+(P^(A|~y))+R[1]+2240044497&4294967295,I=A+(C<<21&4294967295|C>>>11),C=y+(A^(I|~P))+R[8]+1873313359&4294967295,y=I+(C<<6&4294967295|C>>>26),C=P+(I^(y|~A))+R[15]+4264355552&4294967295,P=y+(C<<10&4294967295|C>>>22),C=A+(y^(P|~I))+R[6]+2734768916&4294967295,A=P+(C<<15&4294967295|C>>>17),C=I+(P^(A|~y))+R[13]+1309151649&4294967295,I=A+(C<<21&4294967295|C>>>11),C=y+(A^(I|~P))+R[4]+4149444226&4294967295,y=I+(C<<6&4294967295|C>>>26),C=P+(I^(y|~A))+R[11]+3174756917&4294967295,P=y+(C<<10&4294967295|C>>>22),C=A+(y^(P|~I))+R[2]+718787259&4294967295,A=P+(C<<15&4294967295|C>>>17),C=I+(P^(A|~y))+R[9]+3951481745&4294967295,T.g[0]=T.g[0]+y&4294967295,T.g[1]=T.g[1]+(A+(C<<21&4294967295|C>>>11))&4294967295,T.g[2]=T.g[2]+A&4294967295,T.g[3]=T.g[3]+P&4294967295}r.prototype.u=function(T,y){y===void 0&&(y=T.length);for(var I=y-this.blockSize,R=this.B,A=this.h,P=0;P<y;){if(A==0)for(;P<=I;)s(this,T,P),P+=this.blockSize;if(typeof T=="string"){for(;P<y;)if(R[A++]=T.charCodeAt(P++),A==this.blockSize){s(this,R),A=0;break}}else for(;P<y;)if(R[A++]=T[P++],A==this.blockSize){s(this,R),A=0;break}}this.h=A,this.o+=y},r.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var y=1;y<T.length-8;++y)T[y]=0;var I=8*this.o;for(y=T.length-8;y<T.length;++y)T[y]=I&255,I/=256;for(this.u(T),T=Array(16),y=I=0;4>y;++y)for(var R=0;32>R;R+=8)T[I++]=this.g[y]>>>R&255;return T};function i(T,y){var I=l;return Object.prototype.hasOwnProperty.call(I,T)?I[T]:I[T]=y(T)}function o(T,y){this.h=y;for(var I=[],R=!0,A=T.length-1;0<=A;A--){var P=T[A]|0;R&&P==y||(I[A]=P,R=!1)}this.g=I}var l={};function u(T){return-128<=T&&128>T?i(T,function(y){return new o([y|0],0>y?-1:0)}):new o([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return m;if(0>T)return N(c(-T));for(var y=[],I=1,R=0;T>=I;R++)y[R]=T/I|0,I*=4294967296;return new o(y,0)}function p(T,y){if(T.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(T.charAt(0)=="-")return N(p(T.substring(1),y));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=c(Math.pow(y,8)),R=m,A=0;A<T.length;A+=8){var P=Math.min(8,T.length-A),C=parseInt(T.substring(A,A+P),y);8>P?(P=c(Math.pow(y,P)),R=R.j(P).add(c(C))):(R=R.j(I),R=R.add(c(C)))}return R}var m=u(0),g=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(k(this))return-N(this).m();for(var T=0,y=1,I=0;I<this.g.length;I++){var R=this.i(I);T+=(0<=R?R:4294967296+R)*y,y*=4294967296}return T},t.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(b(this))return"0";if(k(this))return"-"+N(this).toString(T);for(var y=c(Math.pow(T,6)),I=this,R="";;){var A=O(I,y).g;I=w(I,A.j(y));var P=((0<I.g.length?I.g[0]:I.h)>>>0).toString(T);if(I=A,b(I))return P+R;for(;6>P.length;)P="0"+P;R=P+R}},t.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function b(T){if(T.h!=0)return!1;for(var y=0;y<T.g.length;y++)if(T.g[y]!=0)return!1;return!0}function k(T){return T.h==-1}t.l=function(T){return T=w(this,T),k(T)?-1:b(T)?0:1};function N(T){for(var y=T.g.length,I=[],R=0;R<y;R++)I[R]=~T.g[R];return new o(I,~T.h).add(g)}t.abs=function(){return k(this)?N(this):this},t.add=function(T){for(var y=Math.max(this.g.length,T.g.length),I=[],R=0,A=0;A<=y;A++){var P=R+(this.i(A)&65535)+(T.i(A)&65535),C=(P>>>16)+(this.i(A)>>>16)+(T.i(A)>>>16);R=C>>>16,P&=65535,C&=65535,I[A]=C<<16|P}return new o(I,I[I.length-1]&-2147483648?-1:0)};function w(T,y){return T.add(N(y))}t.j=function(T){if(b(this)||b(T))return m;if(k(this))return k(T)?N(this).j(N(T)):N(N(this).j(T));if(k(T))return N(this.j(N(T)));if(0>this.l(_)&&0>T.l(_))return c(this.m()*T.m());for(var y=this.g.length+T.g.length,I=[],R=0;R<2*y;R++)I[R]=0;for(R=0;R<this.g.length;R++)for(var A=0;A<T.g.length;A++){var P=this.i(R)>>>16,C=this.i(R)&65535,St=T.i(A)>>>16,bn=T.i(A)&65535;I[2*R+2*A]+=C*bn,E(I,2*R+2*A),I[2*R+2*A+1]+=P*bn,E(I,2*R+2*A+1),I[2*R+2*A+1]+=C*St,E(I,2*R+2*A+1),I[2*R+2*A+2]+=P*St,E(I,2*R+2*A+2)}for(R=0;R<y;R++)I[R]=I[2*R+1]<<16|I[2*R];for(R=y;R<2*y;R++)I[R]=0;return new o(I,0)};function E(T,y){for(;(T[y]&65535)!=T[y];)T[y+1]+=T[y]>>>16,T[y]&=65535,y++}function S(T,y){this.g=T,this.h=y}function O(T,y){if(b(y))throw Error("division by zero");if(b(T))return new S(m,m);if(k(T))return y=O(N(T),y),new S(N(y.g),N(y.h));if(k(y))return y=O(T,N(y)),new S(N(y.g),y.h);if(30<T.g.length){if(k(T)||k(y))throw Error("slowDivide_ only works with positive integers.");for(var I=g,R=y;0>=R.l(T);)I=L(I),R=L(R);var A=M(I,1),P=M(R,1);for(R=M(R,2),I=M(I,2);!b(R);){var C=P.add(R);0>=C.l(T)&&(A=A.add(I),P=C),R=M(R,1),I=M(I,1)}return y=w(T,A.j(y)),new S(A,y)}for(A=m;0<=T.l(y);){for(I=Math.max(1,Math.floor(T.m()/y.m())),R=Math.ceil(Math.log(I)/Math.LN2),R=48>=R?1:Math.pow(2,R-48),P=c(I),C=P.j(y);k(C)||0<C.l(T);)I-=R,P=c(I),C=P.j(y);b(P)&&(P=g),A=A.add(P),T=w(T,C)}return new S(A,T)}t.A=function(T){return O(this,T).h},t.and=function(T){for(var y=Math.max(this.g.length,T.g.length),I=[],R=0;R<y;R++)I[R]=this.i(R)&T.i(R);return new o(I,this.h&T.h)},t.or=function(T){for(var y=Math.max(this.g.length,T.g.length),I=[],R=0;R<y;R++)I[R]=this.i(R)|T.i(R);return new o(I,this.h|T.h)},t.xor=function(T){for(var y=Math.max(this.g.length,T.g.length),I=[],R=0;R<y;R++)I[R]=this.i(R)^T.i(R);return new o(I,this.h^T.h)};function L(T){for(var y=T.g.length+1,I=[],R=0;R<y;R++)I[R]=T.i(R)<<1|T.i(R-1)>>>31;return new o(I,T.h)}function M(T,y){var I=y>>5;y%=32;for(var R=T.g.length-I,A=[],P=0;P<R;P++)A[P]=0<y?T.i(P+I)>>>y|T.i(P+I+1)<<32-y:T.i(P+I);return new o(A,T.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,g1=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=p,rs=o}).apply(typeof r0<"u"?r0:typeof self<"u"?self:typeof window<"u"?window:{});var Za=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var v1,ro,y1,wl,od,_1,w1,E1;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,d,f){return a==Array.prototype||a==Object.prototype||(a[d]=f.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Za=="object"&&Za];for(var d=0;d<a.length;++d){var f=a[d];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function s(a,d){if(d)e:{var f=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var D=a[v];if(!(D in f))break e;f=f[D]}a=a[a.length-1],v=f[a],d=d(v),d!=v&&d!=null&&e(f,a,{configurable:!0,writable:!0,value:d})}}function i(a,d){a instanceof String&&(a+="");var f=0,v=!1,D={next:function(){if(!v&&f<a.length){var j=f++;return{value:d(j,a[j]),done:!1}}return v=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(a){return a||function(){return i(this,function(d,f){return f})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var d=typeof a;return d=d!="object"?d:a?Array.isArray(a)?"array":d:"null",d=="array"||d=="object"&&typeof a.length=="number"}function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function p(a,d,f){return a.call.apply(a.bind,arguments)}function m(a,d,f){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,v),a.apply(d,D)}}return function(){return a.apply(d,arguments)}}function g(a,d,f){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?p:m,g.apply(null,arguments)}function _(a,d){var f=Array.prototype.slice.call(arguments,1);return function(){var v=f.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function b(a,d){function f(){}f.prototype=d.prototype,a.aa=d.prototype,a.prototype=new f,a.prototype.constructor=a,a.Qb=function(v,D,j){for(var $=Array(arguments.length-2),me=2;me<arguments.length;me++)$[me-2]=arguments[me];return d.prototype[D].apply(v,$)}}function k(a){const d=a.length;if(0<d){const f=Array(d);for(let v=0;v<d;v++)f[v]=a[v];return f}return[]}function N(a,d){for(let f=1;f<arguments.length;f++){const v=arguments[f];if(u(v)){const D=a.length||0,j=v.length||0;a.length=D+j;for(let $=0;$<j;$++)a[D+$]=v[$]}else a.push(v)}}class w{constructor(d,f){this.i=d,this.j=f,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function E(a){return/^[\s\xa0]*$/.test(a)}function S(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function O(a){return O[" "](a),a}O[" "]=function(){};var L=S().indexOf("Gecko")!=-1&&!(S().toLowerCase().indexOf("webkit")!=-1&&S().indexOf("Edge")==-1)&&!(S().indexOf("Trident")!=-1||S().indexOf("MSIE")!=-1)&&S().indexOf("Edge")==-1;function M(a,d,f){for(const v in a)d.call(f,a[v],v,a)}function T(a,d){for(const f in a)d.call(void 0,a[f],f,a)}function y(a){const d={};for(const f in a)d[f]=a[f];return d}const I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function R(a,d){let f,v;for(let D=1;D<arguments.length;D++){v=arguments[D];for(f in v)a[f]=v[f];for(let j=0;j<I.length;j++)f=I[j],Object.prototype.hasOwnProperty.call(v,f)&&(a[f]=v[f])}}function A(a){var d=1;a=a.split(":");const f=[];for(;0<d&&a.length;)f.push(a.shift()),d--;return a.length&&f.push(a.join(":")),f}function P(a){l.setTimeout(()=>{throw a},0)}function C(){var a=K;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class St{constructor(){this.h=this.g=null}add(d,f){const v=bn.get();v.set(d,f),this.h?this.h.next=v:this.g=v,this.h=v}}var bn=new w(()=>new Ur,a=>a.reset());class Ur{constructor(){this.next=this.g=this.h=null}set(d,f){this.h=d,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let Xt,z=!1,K=new St,Q=()=>{const a=l.Promise.resolve(void 0);Xt=()=>{a.then(ve)}};var ve=()=>{for(var a;a=C();){try{a.h.call(a.g)}catch(f){P(f)}var d=bn;d.j(a),100>d.h&&(d.h++,a.next=d.g,d.g=a)}z=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var Jt=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};l.addEventListener("test",f,d),l.removeEventListener("test",f,d)}catch{}return a}();function Ft(a,d){if(Se.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var f=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget){if(L){e:{try{O(d.nodeName);var D=!0;break e}catch{}D=!1}D||(d=null)}}else f=="mouseover"?d=a.fromElement:f=="mouseout"&&(d=a.toElement);this.relatedTarget=d,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Zt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ft.aa.h.call(this)}}b(Ft,Se);var Zt={2:"touch",3:"pen",4:"mouse"};Ft.prototype.h=function(){Ft.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ut="closure_listenable_"+(1e6*Math.random()|0),B=0;function se(a,d,f,v,D){this.listener=a,this.proxy=null,this.src=d,this.type=f,this.capture=!!v,this.ha=D,this.key=++B,this.da=this.fa=!1}function ee(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function he(a){this.src=a,this.g={},this.h=0}he.prototype.add=function(a,d,f,v,D){var j=a.toString();a=this.g[j],a||(a=this.g[j]=[],this.h++);var $=ye(a,d,v,D);return-1<$?(d=a[$],f||(d.fa=!1)):(d=new se(d,this.src,j,!!v,D),d.fa=f,a.push(d)),d};function xe(a,d){var f=d.type;if(f in a.g){var v=a.g[f],D=Array.prototype.indexOf.call(v,d,void 0),j;(j=0<=D)&&Array.prototype.splice.call(v,D,1),j&&(ee(d),a.g[f].length==0&&(delete a.g[f],a.h--))}}function ye(a,d,f,v){for(var D=0;D<a.length;++D){var j=a[D];if(!j.da&&j.listener==d&&j.capture==!!f&&j.ha==v)return D}return-1}var te="closure_lm_"+(1e6*Math.random()|0),Ae={};function Xe(a,d,f,v,D){if(Array.isArray(d)){for(var j=0;j<d.length;j++)Xe(a,d[j],f,v,D);return null}return f=Zn(f),a&&a[Ut]?a.K(d,f,c(v)?!!v.capture:!1,D):ot(a,d,f,!1,v,D)}function ot(a,d,f,v,D,j){if(!d)throw Error("Invalid event type");var $=c(D)?!!D.capture:!!D,me=Bt(a);if(me||(a[te]=me=new he(a)),f=me.add(d,f,v,$,j),f.proxy)return f;if(v=An(),f.proxy=v,v.src=a,v.listener=f,a.addEventListener)Jt||(D=$),D===void 0&&(D=!1),a.addEventListener(d.toString(),v,D);else if(a.attachEvent)a.attachEvent(at(d.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return f}function An(){function a(f){return d.call(a.src,a.listener,f)}const d=yt;return a}function Nt(a,d,f,v,D){if(Array.isArray(d))for(var j=0;j<d.length;j++)Nt(a,d[j],f,v,D);else v=c(v)?!!v.capture:!!v,f=Zn(f),a&&a[Ut]?(a=a.i,d=String(d).toString(),d in a.g&&(j=a.g[d],f=ye(j,f,v,D),-1<f&&(ee(j[f]),Array.prototype.splice.call(j,f,1),j.length==0&&(delete a.g[d],a.h--)))):a&&(a=Bt(a))&&(d=a.g[d.toString()],a=-1,d&&(a=ye(d,f,v,D)),(f=-1<a?d[a]:null)&&Ne(f))}function Ne(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[Ut])xe(d.i,a);else{var f=a.type,v=a.proxy;d.removeEventListener?d.removeEventListener(f,v,a.capture):d.detachEvent?d.detachEvent(at(f),v):d.addListener&&d.removeListener&&d.removeListener(v),(f=Bt(d))?(xe(f,a),f.h==0&&(f.src=null,d[te]=null)):ee(a)}}}function at(a){return a in Ae?Ae[a]:Ae[a]="on"+a}function yt(a,d){if(a.da)a=!0;else{d=new Ft(d,this);var f=a.listener,v=a.ha||a.src;a.fa&&Ne(a),a=f.call(v,d)}return a}function Bt(a){return a=a[te],a instanceof he?a:null}var fn="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zn(a){return typeof a=="function"?a:(a[fn]||(a[fn]=function(d){return a.handleEvent(d)}),a[fn])}function Pe(){ce.call(this),this.i=new he(this),this.M=this,this.F=null}b(Pe,ce),Pe.prototype[Ut]=!0,Pe.prototype.removeEventListener=function(a,d,f,v){Nt(this,a,d,f,v)};function Ye(a,d){var f,v=a.F;if(v)for(f=[];v;v=v.F)f.push(v);if(a=a.M,v=d.type||d,typeof d=="string")d=new Se(d,a);else if(d instanceof Se)d.target=d.target||a;else{var D=d;d=new Se(v,a),R(d,D)}if(D=!0,f)for(var j=f.length-1;0<=j;j--){var $=d.g=f[j];D=_a($,v,!0,d)&&D}if($=d.g=a,D=_a($,v,!0,d)&&D,D=_a($,v,!1,d)&&D,f)for(j=0;j<f.length;j++)$=d.g=f[j],D=_a($,v,!1,d)&&D}Pe.prototype.N=function(){if(Pe.aa.N.call(this),this.i){var a=this.i,d;for(d in a.g){for(var f=a.g[d],v=0;v<f.length;v++)ee(f[v]);delete a.g[d],a.h--}}this.F=null},Pe.prototype.K=function(a,d,f,v){return this.i.add(String(a),d,!1,f,v)},Pe.prototype.L=function(a,d,f,v){return this.i.add(String(a),d,!0,f,v)};function _a(a,d,f,v){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();for(var D=!0,j=0;j<d.length;++j){var $=d[j];if($&&!$.da&&$.capture==f){var me=$.listener,Je=$.ha||$.src;$.fa&&xe(a.i,$),D=me.call(Je,v)!==!1&&D}}return D&&!v.defaultPrevented}function vp(a,d,f){if(typeof a=="function")f&&(a=g(a,f));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:l.setTimeout(a,d||0)}function yp(a){a.g=vp(()=>{a.g=null,a.i&&(a.i=!1,yp(a))},a.l);const d=a.h;a.h=null,a.m.apply(null,d)}class Xw extends ce{constructor(d,f){super(),this.m=d,this.l=f,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:yp(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ci(a){ce.call(this),this.h=a,this.g={}}b(Ci,ce);var _p=[];function wp(a){M(a.g,function(d,f){this.g.hasOwnProperty(f)&&Ne(d)},a),a.g={}}Ci.prototype.N=function(){Ci.aa.N.call(this),wp(this)},Ci.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ju=l.JSON.stringify,Jw=l.JSON.parse,Zw=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function Zu(){}Zu.prototype.h=null;function Ep(a){return a.h||(a.h=a.i())}function xp(){}var Ri={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ec(){Se.call(this,"d")}b(ec,Se);function tc(){Se.call(this,"c")}b(tc,Se);var Br={},Tp=null;function wa(){return Tp=Tp||new Pe}Br.La="serverreachability";function Ip(a){Se.call(this,Br.La,a)}b(Ip,Se);function bi(a){const d=wa();Ye(d,new Ip(d))}Br.STAT_EVENT="statevent";function Sp(a,d){Se.call(this,Br.STAT_EVENT,a),this.stat=d}b(Sp,Se);function _t(a){const d=wa();Ye(d,new Sp(d,a))}Br.Ma="timingevent";function kp(a,d){Se.call(this,Br.Ma,a),this.size=d}b(kp,Se);function Ai(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},d)}function Ni(){this.g=!0}Ni.prototype.xa=function(){this.g=!1};function e2(a,d,f,v,D,j){a.info(function(){if(a.g)if(j)for(var $="",me=j.split("&"),Je=0;Je<me.length;Je++){var le=me[Je].split("=");if(1<le.length){var lt=le[0];le=le[1];var ut=lt.split("_");$=2<=ut.length&&ut[1]=="type"?$+(lt+"="+le+"&"):$+(lt+"=redacted&")}}else $=null;else $=j;return"XMLHTTP REQ ("+v+") [attempt "+D+"]: "+d+`
`+f+`
`+$})}function t2(a,d,f,v,D,j,$){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+D+"]: "+d+`
`+f+`
`+j+" "+$})}function Es(a,d,f,v){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+r2(a,f)+(v?" "+v:"")})}function n2(a,d){a.info(function(){return"TIMEOUT: "+d})}Ni.prototype.info=function(){};function r2(a,d){if(!a.g)return d;if(!d)return null;try{var f=JSON.parse(d);if(f){for(a=0;a<f.length;a++)if(Array.isArray(f[a])){var v=f[a];if(!(2>v.length)){var D=v[1];if(Array.isArray(D)&&!(1>D.length)){var j=D[0];if(j!="noop"&&j!="stop"&&j!="close")for(var $=1;$<D.length;$++)D[$]=""}}}}return Ju(f)}catch{return d}}var Ea={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Cp={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},nc;function xa(){}b(xa,Zu),xa.prototype.g=function(){return new XMLHttpRequest},xa.prototype.i=function(){return{}},nc=new xa;function er(a,d,f,v){this.j=a,this.i=d,this.l=f,this.R=v||1,this.U=new Ci(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rp}function Rp(){this.i=null,this.g="",this.h=!1}var bp={},rc={};function sc(a,d,f){a.L=1,a.v=ka(Nn(d)),a.m=f,a.P=!0,Ap(a,null)}function Ap(a,d){a.F=Date.now(),Ta(a),a.A=Nn(a.v);var f=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),Wp(f.i,"t",v),a.C=0,f=a.j.J,a.h=new Rp,a.g=lm(a.j,f?d:null,!a.m),0<a.O&&(a.M=new Xw(g(a.Y,a,a.g),a.O)),d=a.U,f=a.g,v=a.ca;var D="readystatechange";Array.isArray(D)||(D&&(_p[0]=D.toString()),D=_p);for(var j=0;j<D.length;j++){var $=Xe(f,D[j],v||d.handleEvent,!1,d.h||d);if(!$)break;d.g[$.key]=$}d=a.H?y(a.H):{},a.m?(a.u||(a.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,d)):(a.u="GET",a.g.ea(a.A,a.u,null,d)),bi(),e2(a.i,a.u,a.A,a.l,a.R,a.m)}er.prototype.ca=function(a){a=a.target;const d=this.M;d&&Pn(a)==3?d.j():this.Y(a)},er.prototype.Y=function(a){try{if(a==this.g)e:{const ut=Pn(this.g);var d=this.g.Ba();const Is=this.g.Z();if(!(3>ut)&&(ut!=3||this.g&&(this.h.h||this.g.oa()||Xp(this.g)))){this.J||ut!=4||d==7||(d==8||0>=Is?bi(3):bi(2)),ic(this);var f=this.g.Z();this.X=f;t:if(Np(this)){var v=Xp(this.g);a="";var D=v.length,j=Pn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){$r(this),Pi(this);var $="";break t}this.h.i=new l.TextDecoder}for(d=0;d<D;d++)this.h.h=!0,a+=this.h.i.decode(v[d],{stream:!(j&&d==D-1)});v.length=0,this.h.g+=a,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=f==200,t2(this.i,this.u,this.A,this.l,this.R,ut,f),this.o){if(this.T&&!this.K){t:{if(this.g){var me,Je=this.g;if((me=Je.g?Je.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!E(me)){var le=me;break t}}le=null}if(f=le)Es(this.i,this.l,f,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,oc(this,f);else{this.o=!1,this.s=3,_t(12),$r(this),Pi(this);break e}}if(this.P){f=!0;let en;for(;!this.J&&this.C<$.length;)if(en=s2(this,$),en==rc){ut==4&&(this.s=4,_t(14),f=!1),Es(this.i,this.l,null,"[Incomplete Response]");break}else if(en==bp){this.s=4,_t(15),Es(this.i,this.l,$,"[Invalid Chunk]"),f=!1;break}else Es(this.i,this.l,en,null),oc(this,en);if(Np(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ut!=4||$.length!=0||this.h.h||(this.s=1,_t(16),f=!1),this.o=this.o&&f,!f)Es(this.i,this.l,$,"[Invalid Chunked Response]"),$r(this),Pi(this);else if(0<$.length&&!this.W){this.W=!0;var lt=this.j;lt.g==this&&lt.ba&&!lt.M&&(lt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),dc(lt),lt.M=!0,_t(11))}}else Es(this.i,this.l,$,null),oc(this,$);ut==4&&$r(this),this.o&&!this.J&&(ut==4?sm(this.j,this):(this.o=!1,Ta(this)))}else E2(this.g),f==400&&0<$.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),$r(this),Pi(this)}}}catch{}finally{}};function Np(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function s2(a,d){var f=a.C,v=d.indexOf(`
`,f);return v==-1?rc:(f=Number(d.substring(f,v)),isNaN(f)?bp:(v+=1,v+f>d.length?rc:(d=d.slice(v,v+f),a.C=v+f,d)))}er.prototype.cancel=function(){this.J=!0,$r(this)};function Ta(a){a.S=Date.now()+a.I,Pp(a,a.I)}function Pp(a,d){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Ai(g(a.ba,a),d)}function ic(a){a.B&&(l.clearTimeout(a.B),a.B=null)}er.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(n2(this.i,this.A),this.L!=2&&(bi(),_t(17)),$r(this),this.s=2,Pi(this)):Pp(this,this.S-a)};function Pi(a){a.j.G==0||a.J||sm(a.j,a)}function $r(a){ic(a);var d=a.M;d&&typeof d.ma=="function"&&d.ma(),a.M=null,wp(a.U),a.g&&(d=a.g,a.g=null,d.abort(),d.ma())}function oc(a,d){try{var f=a.j;if(f.G!=0&&(f.g==a||ac(f.h,a))){if(!a.K&&ac(f.h,a)&&f.G==3){try{var v=f.Da.g.parse(d)}catch{v=null}if(Array.isArray(v)&&v.length==3){var D=v;if(D[0]==0){e:if(!f.u){if(f.g)if(f.g.F+3e3<a.F)Pa(f),Aa(f);else break e;hc(f),_t(18)}}else f.za=D[1],0<f.za-f.T&&37500>D[2]&&f.F&&f.v==0&&!f.C&&(f.C=Ai(g(f.Za,f),6e3));if(1>=jp(f.h)&&f.ca){try{f.ca()}catch{}f.ca=void 0}}else Wr(f,11)}else if((a.K||f.g==a)&&Pa(f),!E(d))for(D=f.Da.g.parse(d),d=0;d<D.length;d++){let le=D[d];if(f.T=le[0],le=le[1],f.G==2)if(le[0]=="c"){f.K=le[1],f.ia=le[2];const lt=le[3];lt!=null&&(f.la=lt,f.j.info("VER="+f.la));const ut=le[4];ut!=null&&(f.Aa=ut,f.j.info("SVER="+f.Aa));const Is=le[5];Is!=null&&typeof Is=="number"&&0<Is&&(v=1.5*Is,f.L=v,f.j.info("backChannelRequestTimeoutMs_="+v)),v=f;const en=a.g;if(en){const Oa=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Oa){var j=v.h;j.g||Oa.indexOf("spdy")==-1&&Oa.indexOf("quic")==-1&&Oa.indexOf("h2")==-1||(j.j=j.l,j.g=new Set,j.h&&(lc(j,j.h),j.h=null))}if(v.D){const fc=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;fc&&(v.ya=fc,_e(v.I,v.D,fc))}}f.G=3,f.l&&f.l.ua(),f.ba&&(f.R=Date.now()-a.F,f.j.info("Handshake RTT: "+f.R+"ms")),v=f;var $=a;if(v.qa=am(v,v.J?v.ia:null,v.W),$.K){Mp(v.h,$);var me=$,Je=v.L;Je&&(me.I=Je),me.B&&(ic(me),Ta(me)),v.g=$}else nm(v);0<f.i.length&&Na(f)}else le[0]!="stop"&&le[0]!="close"||Wr(f,7);else f.G==3&&(le[0]=="stop"||le[0]=="close"?le[0]=="stop"?Wr(f,7):cc(f):le[0]!="noop"&&f.l&&f.l.ta(le),f.v=0)}}bi(4)}catch{}}var i2=class{constructor(a,d){this.g=a,this.map=d}};function Dp(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Op(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function jp(a){return a.h?1:a.g?a.g.size:0}function ac(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function lc(a,d){a.g?a.g.add(d):a.h=d}function Mp(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}Dp.prototype.cancel=function(){if(this.i=Lp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Lp(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let d=a.i;for(const f of a.g.values())d=d.concat(f.D);return d}return k(a.i)}function o2(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var d=[],f=a.length,v=0;v<f;v++)d.push(a[v]);return d}d=[],f=0;for(v in a)d[f++]=a[v];return d}function a2(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var d=[];a=a.length;for(var f=0;f<a;f++)d.push(f);return d}d=[],f=0;for(const v in a)d[f++]=v;return d}}}function Vp(a,d){if(a.forEach&&typeof a.forEach=="function")a.forEach(d,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,d,void 0);else for(var f=a2(a),v=o2(a),D=v.length,j=0;j<D;j++)d.call(void 0,v[j],f&&f[j],a)}var Fp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function l2(a,d){if(a){a=a.split("&");for(var f=0;f<a.length;f++){var v=a[f].indexOf("="),D=null;if(0<=v){var j=a[f].substring(0,v);D=a[f].substring(v+1)}else j=a[f];d(j,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function zr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof zr){this.h=a.h,Ia(this,a.j),this.o=a.o,this.g=a.g,Sa(this,a.s),this.l=a.l;var d=a.i,f=new ji;f.i=d.i,d.g&&(f.g=new Map(d.g),f.h=d.h),Up(this,f),this.m=a.m}else a&&(d=String(a).match(Fp))?(this.h=!1,Ia(this,d[1]||"",!0),this.o=Di(d[2]||""),this.g=Di(d[3]||"",!0),Sa(this,d[4]),this.l=Di(d[5]||"",!0),Up(this,d[6]||"",!0),this.m=Di(d[7]||"")):(this.h=!1,this.i=new ji(null,this.h))}zr.prototype.toString=function(){var a=[],d=this.j;d&&a.push(Oi(d,Bp,!0),":");var f=this.g;return(f||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Oi(d,Bp,!0),"@"),a.push(encodeURIComponent(String(f)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.s,f!=null&&a.push(":",String(f))),(f=this.l)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(Oi(f,f.charAt(0)=="/"?h2:c2,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",Oi(f,f2)),a.join("")};function Nn(a){return new zr(a)}function Ia(a,d,f){a.j=f?Di(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function Sa(a,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);a.s=d}else a.s=null}function Up(a,d,f){d instanceof ji?(a.i=d,p2(a.i,a.h)):(f||(d=Oi(d,d2)),a.i=new ji(d,a.h))}function _e(a,d,f){a.i.set(d,f)}function ka(a){return _e(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Di(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Oi(a,d,f){return typeof a=="string"?(a=encodeURI(a).replace(d,u2),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function u2(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Bp=/[#\/\?@]/g,c2=/[#\?:]/g,h2=/[#\?]/g,d2=/[#\?@]/g,f2=/#/g;function ji(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function tr(a){a.g||(a.g=new Map,a.h=0,a.i&&l2(a.i,function(d,f){a.add(decodeURIComponent(d.replace(/\+/g," ")),f)}))}t=ji.prototype,t.add=function(a,d){tr(this),this.i=null,a=xs(this,a);var f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(d),this.h+=1,this};function $p(a,d){tr(a),d=xs(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function zp(a,d){return tr(a),d=xs(a,d),a.g.has(d)}t.forEach=function(a,d){tr(this),this.g.forEach(function(f,v){f.forEach(function(D){a.call(d,D,v,this)},this)},this)},t.na=function(){tr(this);const a=Array.from(this.g.values()),d=Array.from(this.g.keys()),f=[];for(let v=0;v<d.length;v++){const D=a[v];for(let j=0;j<D.length;j++)f.push(d[v])}return f},t.V=function(a){tr(this);let d=[];if(typeof a=="string")zp(this,a)&&(d=d.concat(this.g.get(xs(this,a))));else{a=Array.from(this.g.values());for(let f=0;f<a.length;f++)d=d.concat(a[f])}return d},t.set=function(a,d){return tr(this),this.i=null,a=xs(this,a),zp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=this.V(a),0<a.length?String(a[0]):d):d};function Wp(a,d,f){$p(a,d),0<f.length&&(a.i=null,a.g.set(xs(a,d),k(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],d=Array.from(this.g.keys());for(var f=0;f<d.length;f++){var v=d[f];const j=encodeURIComponent(String(v)),$=this.V(v);for(v=0;v<$.length;v++){var D=j;$[v]!==""&&(D+="="+encodeURIComponent(String($[v]))),a.push(D)}}return this.i=a.join("&")};function xs(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function p2(a,d){d&&!a.j&&(tr(a),a.i=null,a.g.forEach(function(f,v){var D=v.toLowerCase();v!=D&&($p(this,v),Wp(this,D,f))},a)),a.j=d}function m2(a,d){const f=new Ni;if(l.Image){const v=new Image;v.onload=_(nr,f,"TestLoadImage: loaded",!0,d,v),v.onerror=_(nr,f,"TestLoadImage: error",!1,d,v),v.onabort=_(nr,f,"TestLoadImage: abort",!1,d,v),v.ontimeout=_(nr,f,"TestLoadImage: timeout",!1,d,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else d(!1)}function g2(a,d){const f=new Ni,v=new AbortController,D=setTimeout(()=>{v.abort(),nr(f,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:v.signal}).then(j=>{clearTimeout(D),j.ok?nr(f,"TestPingServer: ok",!0,d):nr(f,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(D),nr(f,"TestPingServer: error",!1,d)})}function nr(a,d,f,v,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),v(f)}catch{}}function v2(){this.g=new Zw}function y2(a,d,f){const v=f||"";try{Vp(a,function(D,j){let $=D;c(D)&&($=Ju(D)),d.push(v+j+"="+encodeURIComponent($))})}catch(D){throw d.push(v+"type="+encodeURIComponent("_badmap")),D}}function Ca(a){this.l=a.Ub||null,this.j=a.eb||!1}b(Ca,Zu),Ca.prototype.g=function(){return new Ra(this.l,this.j)},Ca.prototype.i=function(a){return function(){return a}}({});function Ra(a,d){Pe.call(this),this.D=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Ra,Pe),t=Ra.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=d,this.readyState=1,Li(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(d.body=a),(this.D||l).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mi(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Li(this)),this.g&&(this.readyState=3,Li(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Hp(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Hp(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?Mi(this):Li(this),this.readyState==3&&Hp(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,Mi(this))},t.Qa=function(a){this.g&&(this.response=a,Mi(this))},t.ga=function(){this.g&&Mi(this)};function Mi(a){a.readyState=4,a.l=null,a.j=null,a.v=null,Li(a)}t.setRequestHeader=function(a,d){this.u.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],d=this.h.entries();for(var f=d.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=d.next();return a.join(`\r
`)};function Li(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Ra.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function qp(a){let d="";return M(a,function(f,v){d+=v,d+=":",d+=f,d+=`\r
`}),d}function uc(a,d,f){e:{for(v in f){var v=!1;break e}v=!0}v||(f=qp(f),typeof a=="string"?f!=null&&encodeURIComponent(String(f)):_e(a,d,f))}function De(a){Pe.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(De,Pe);var _2=/^https?$/i,w2=["POST","PUT"];t=De.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,d,f,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():nc.g(),this.v=this.o?Ep(this.o):Ep(nc),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(j){Yp(this,j);return}if(a=f||"",f=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var D in v)f.set(D,v[D]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const j of v.keys())f.set(j,v.get(j));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(f.keys()).find(j=>j.toLowerCase()=="content-type"),D=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(w2,d,void 0))||v||D||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[j,$]of f)this.g.setRequestHeader(j,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Qp(this),this.u=!0,this.g.send(a),this.u=!1}catch(j){Yp(this,j)}};function Yp(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.m=5,Kp(a),ba(a)}function Kp(a){a.A||(a.A=!0,Ye(a,"complete"),Ye(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Ye(this,"complete"),Ye(this,"abort"),ba(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ba(this,!0)),De.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Gp(this):this.bb())},t.bb=function(){Gp(this)};function Gp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Pn(a)!=4||a.Z()!=2)){if(a.u&&Pn(a)==4)vp(a.Ea,0,a);else if(Ye(a,"readystatechange"),Pn(a)==4){a.h=!1;try{const $=a.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var f;if(!(f=d)){var v;if(v=$===0){var D=String(a.D).match(Fp)[1]||null;!D&&l.self&&l.self.location&&(D=l.self.location.protocol.slice(0,-1)),v=!_2.test(D?D.toLowerCase():"")}f=v}if(f)Ye(a,"complete"),Ye(a,"success");else{a.m=6;try{var j=2<Pn(a)?a.g.statusText:""}catch{j=""}a.l=j+" ["+a.Z()+"]",Kp(a)}}finally{ba(a)}}}}function ba(a,d){if(a.g){Qp(a);const f=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,d||Ye(a,"ready");try{f.onreadystatechange=v}catch{}}}function Qp(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Pn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Pn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),Jw(d)}};function Xp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function E2(a){const d={};a=(a.g&&2<=Pn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(E(a[v]))continue;var f=A(a[v]);const D=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const j=d[D]||[];d[D]=j,j.push(f)}T(d,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Vi(a,d,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||d}function Jp(a){this.Aa=0,this.i=[],this.j=new Ni,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Vi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Vi("baseRetryDelayMs",5e3,a),this.cb=Vi("retryDelaySeedMs",1e4,a),this.Wa=Vi("forwardChannelMaxRetries",2,a),this.wa=Vi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Dp(a&&a.concurrentRequestLimit),this.Da=new v2,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Jp.prototype,t.la=8,t.G=1,t.connect=function(a,d,f,v){_t(0),this.W=a,this.H=d||{},f&&v!==void 0&&(this.H.OSID=f,this.H.OAID=v),this.F=this.X,this.I=am(this,null,this.W),Na(this)};function cc(a){if(Zp(a),a.G==3){var d=a.U++,f=Nn(a.I);if(_e(f,"SID",a.K),_e(f,"RID",d),_e(f,"TYPE","terminate"),Fi(a,f),d=new er(a,a.j,d),d.L=2,d.v=ka(Nn(f)),f=!1,l.navigator&&l.navigator.sendBeacon)try{f=l.navigator.sendBeacon(d.v.toString(),"")}catch{}!f&&l.Image&&(new Image().src=d.v,f=!0),f||(d.g=lm(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Ta(d)}om(a)}function Aa(a){a.g&&(dc(a),a.g.cancel(),a.g=null)}function Zp(a){Aa(a),a.u&&(l.clearTimeout(a.u),a.u=null),Pa(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Na(a){if(!Op(a.h)&&!a.s){a.s=!0;var d=a.Ga;Xt||Q(),z||(Xt(),z=!0),K.add(d,a),a.B=0}}function x2(a,d){return jp(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=d.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Ai(g(a.Ga,a,d),im(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const D=new er(this,this.j,a);let j=this.o;if(this.S&&(j?(j=y(j),R(j,this.S)):j=this.S),this.m!==null||this.O||(D.H=j,j=null),this.P)e:{for(var d=0,f=0;f<this.i.length;f++){t:{var v=this.i[f];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(d+=v,4096<d){d=f;break e}if(d===4096||f===this.i.length-1){d=f+1;break e}}d=1e3}else d=1e3;d=tm(this,D,d),f=Nn(this.I),_e(f,"RID",a),_e(f,"CVER",22),this.D&&_e(f,"X-HTTP-Session-Id",this.D),Fi(this,f),j&&(this.O?d="headers="+encodeURIComponent(String(qp(j)))+"&"+d:this.m&&uc(f,this.m,j)),lc(this.h,D),this.Ua&&_e(f,"TYPE","init"),this.P?(_e(f,"$req",d),_e(f,"SID","null"),D.T=!0,sc(D,f,null)):sc(D,f,d),this.G=2}}else this.G==3&&(a?em(this,a):this.i.length==0||Op(this.h)||em(this))};function em(a,d){var f;d?f=d.l:f=a.U++;const v=Nn(a.I);_e(v,"SID",a.K),_e(v,"RID",f),_e(v,"AID",a.T),Fi(a,v),a.m&&a.o&&uc(v,a.m,a.o),f=new er(a,a.j,f,a.B+1),a.m===null&&(f.H=a.o),d&&(a.i=d.D.concat(a.i)),d=tm(a,f,1e3),f.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),lc(a.h,f),sc(f,v,d)}function Fi(a,d){a.H&&M(a.H,function(f,v){_e(d,v,f)}),a.l&&Vp({},function(f,v){_e(d,v,f)})}function tm(a,d,f){f=Math.min(a.i.length,f);var v=a.l?g(a.l.Na,a.l,a):null;e:{var D=a.i;let j=-1;for(;;){const $=["count="+f];j==-1?0<f?(j=D[0].g,$.push("ofs="+j)):j=0:$.push("ofs="+j);let me=!0;for(let Je=0;Je<f;Je++){let le=D[Je].g;const lt=D[Je].map;if(le-=j,0>le)j=Math.max(0,D[Je].g-100),me=!1;else try{y2(lt,$,"req"+le+"_")}catch{v&&v(lt)}}if(me){v=$.join("&");break e}}}return a=a.i.splice(0,f),d.D=a,v}function nm(a){if(!a.g&&!a.u){a.Y=1;var d=a.Fa;Xt||Q(),z||(Xt(),z=!0),K.add(d,a),a.v=0}}function hc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Ai(g(a.Fa,a),im(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,rm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Ai(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),Aa(this),rm(this))};function dc(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function rm(a){a.g=new er(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var d=Nn(a.qa);_e(d,"RID","rpc"),_e(d,"SID",a.K),_e(d,"AID",a.T),_e(d,"CI",a.F?"0":"1"),!a.F&&a.ja&&_e(d,"TO",a.ja),_e(d,"TYPE","xmlhttp"),Fi(a,d),a.m&&a.o&&uc(d,a.m,a.o),a.L&&(a.g.I=a.L);var f=a.g;a=a.ia,f.L=1,f.v=ka(Nn(d)),f.m=null,f.P=!0,Ap(f,a)}t.Za=function(){this.C!=null&&(this.C=null,Aa(this),hc(this),_t(19))};function Pa(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function sm(a,d){var f=null;if(a.g==d){Pa(a),dc(a),a.g=null;var v=2}else if(ac(a.h,d))f=d.D,Mp(a.h,d),v=1;else return;if(a.G!=0){if(d.o)if(v==1){f=d.m?d.m.length:0,d=Date.now()-d.F;var D=a.B;v=wa(),Ye(v,new kp(v,f)),Na(a)}else nm(a);else if(D=d.s,D==3||D==0&&0<d.X||!(v==1&&x2(a,d)||v==2&&hc(a)))switch(f&&0<f.length&&(d=a.h,d.i=d.i.concat(f)),D){case 1:Wr(a,5);break;case 4:Wr(a,10);break;case 3:Wr(a,6);break;default:Wr(a,2)}}}function im(a,d){let f=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(f*=2),f*d}function Wr(a,d){if(a.j.info("Error code "+d),d==2){var f=g(a.fb,a),v=a.Xa;const D=!v;v=new zr(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ia(v,"https"),ka(v),D?m2(v.toString(),f):g2(v.toString(),f)}else _t(2);a.G=0,a.l&&a.l.sa(d),om(a),Zp(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function om(a){if(a.G=0,a.ka=[],a.l){const d=Lp(a.h);(d.length!=0||a.i.length!=0)&&(N(a.ka,d),N(a.ka,a.i),a.h.i.length=0,k(a.i),a.i.length=0),a.l.ra()}}function am(a,d,f){var v=f instanceof zr?Nn(f):new zr(f);if(v.g!="")d&&(v.g=d+"."+v.g),Sa(v,v.s);else{var D=l.location;v=D.protocol,d=d?d+"."+D.hostname:D.hostname,D=+D.port;var j=new zr(null);v&&Ia(j,v),d&&(j.g=d),D&&Sa(j,D),f&&(j.l=f),v=j}return f=a.D,d=a.ya,f&&d&&_e(v,f,d),_e(v,"VER",a.la),Fi(a,v),v}function lm(a,d,f){if(d&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Ca&&!a.pa?new De(new Ca({eb:f})):new De(a.pa),d.Ha(a.J),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function um(){}t=um.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Da(){}Da.prototype.g=function(a,d){return new Pt(a,d)};function Pt(a,d){Pe.call(this),this.g=new Jp(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(a?a["X-WebChannel-Client-Profile"]=d.va:a={"X-WebChannel-Client-Profile":d.va}),this.g.S=a,(a=d&&d.Sb)&&!E(a)&&(this.g.m=a),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!E(d)&&(this.g.D=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Ts(this)}b(Pt,Pe),Pt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){cc(this.g)},Pt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.u&&(f={},f.__data__=Ju(a),a=f);d.i.push(new i2(d.Ya++,a)),d.G==3&&Na(d)},Pt.prototype.N=function(){this.g.l=null,delete this.j,cc(this.g),delete this.g,Pt.aa.N.call(this)};function cm(a){ec.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(const f in d){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}b(cm,ec);function hm(){tc.call(this),this.status=1}b(hm,tc);function Ts(a){this.g=a}b(Ts,um),Ts.prototype.ua=function(){Ye(this.g,"a")},Ts.prototype.ta=function(a){Ye(this.g,new cm(a))},Ts.prototype.sa=function(a){Ye(this.g,new hm)},Ts.prototype.ra=function(){Ye(this.g,"b")},Da.prototype.createWebChannel=Da.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,E1=function(){return new Da},w1=function(){return wa()},_1=Br,od={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ea.NO_ERROR=0,Ea.TIMEOUT=8,Ea.HTTP_ERROR=6,wl=Ea,Cp.COMPLETE="complete",y1=Cp,xp.EventType=Ri,Ri.OPEN="a",Ri.CLOSE="b",Ri.ERROR="c",Ri.MESSAGE="d",Pe.prototype.listen=Pe.prototype.K,ro=xp,De.prototype.listenOnce=De.prototype.L,De.prototype.getLastError=De.prototype.Ka,De.prototype.getLastErrorCode=De.prototype.Ba,De.prototype.getStatus=De.prototype.Z,De.prototype.getResponseJson=De.prototype.Oa,De.prototype.getResponseText=De.prototype.oa,De.prototype.send=De.prototype.ea,De.prototype.setWithCredentials=De.prototype.Ha,v1=De}).apply(typeof Za<"u"?Za:typeof self<"u"?self:typeof window<"u"?window:{});const s0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ft.UNAUTHENTICATED=new ft(null),ft.GOOGLE_CREDENTIALS=new ft("google-credentials-uid"),ft.FIRST_PARTY=new ft("first-party-uid"),ft.MOCK_USER=new ft("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs=new Ef("@firebase/firestore");function Ki(){return cs.logLevel}function H(t,...e){if(cs.logLevel<=ie.DEBUG){const n=e.map(Of);cs.debug(`Firestore (${xi}): ${t}`,...n)}}function Qn(t,...e){if(cs.logLevel<=ie.ERROR){const n=e.map(Of);cs.error(`Firestore (${xi}): ${t}`,...n)}}function ai(t,...e){if(cs.logLevel<=ie.WARN){const n=e.map(Of);cs.warn(`Firestore (${xi}): ${t}`,...n)}}function Of(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X(t="Unexpected state"){const e=`FIRESTORE (${xi}) INTERNAL ASSERTION FAILED: `+t;throw Qn(e),new Error(e)}function pe(t,e){t||X()}function Z(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class q extends Cn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x1{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ak{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ft.UNAUTHENTICATED))}shutdown(){}}class Nk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Pk{constructor(e){this.t=e,this.currentUser=ft.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){pe(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new br;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new br,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new br)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pe(typeof r.accessToken=="string"),new x1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return pe(e===null||typeof e=="string"),new ft(e)}}class Dk{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ft.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Ok{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Dk(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ft.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Mk{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){pe(this.o===void 0);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(pe(typeof n.token=="string"),this.R=n.token,new jk(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lk(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Lk(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ue(t,e){return t<e?-1:t>e?1:0}function li(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return He.fromMillis(Date.now())}static fromDate(e){return He.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new He(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ue(this.nanoseconds,e.nanoseconds):ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.timestamp=e}static fromTimestamp(e){return new J(e)}static min(){return new J(new He(0,0))}static max(){return new J(new He(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zo{constructor(e,n,r){n===void 0?n=0:n>e.length&&X(),r===void 0?r=e.length-n:r>e.length-n&&X(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return zo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof zo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class je extends zo{construct(e,n,r){return new je(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new q(F.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new je(n)}static emptyPath(){return new je([])}}const Vk=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class tt extends zo{construct(e,n,r){return new tt(e,n,r)}static isValidIdentifier(e){return Vk.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),tt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new tt(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new tt(n)}static emptyPath(){return new tt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.path=e}static fromPath(e){return new Y(je.fromString(e))}static fromName(e){return new Y(je.fromString(e).popFirst(5))}static empty(){return new Y(je.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&je.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return je.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Y(new je(e.slice()))}}function Fk(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=J.fromTimestamp(r===1e9?new He(n+1,0):new He(n,r));return new Dr(s,Y.empty(),e)}function Uk(t){return new Dr(t.readTime,t.key,-1)}class Dr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Dr(J.min(),Y.empty(),-1)}static max(){return new Dr(J.max(),Y.empty(),-1)}}function Bk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Y.comparator(t.documentKey,e.documentKey),n!==0?n:ue(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class zk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function da(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==$k)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&X(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(s=>s?V.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new V((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const c=u;n(e[c]).next(p=>{o[c]=p,++l,l===i&&r(o)},p=>s(p))}})}static doWhile(e,n){return new V((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function Wk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function fa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}jf.oe=-1;function Uu(t){return t==null}function ru(t){return t===0&&1/t==-1/0}function Hk(t){return typeof t=="number"&&Number.isInteger(t)&&!ru(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ti(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function I1(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.comparator=e,this.root=n||et.EMPTY}insert(e,n){return new be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,et.BLACK,null,null))}remove(e){return new be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new el(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new el(this.root,e,this.comparator,!1)}getReverseIterator(){return new el(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new el(this.root,e,this.comparator,!0)}}class el{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class et{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??et.RED,this.left=s??et.EMPTY,this.right=i??et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new et(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return et.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw X();const e=this.left.check();if(e!==this.right.check())throw X();return e+(this.isRed()?0:1)}}et.EMPTY=null,et.RED=!0,et.BLACK=!1;et.EMPTY=new class{constructor(){this.size=0}get key(){throw X()}get value(){throw X()}get color(){throw X()}get left(){throw X()}get right(){throw X()}copy(e,n,r,s,i){return this}insert(e,n,r){return new et(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new o0(this.data.getIterator())}getIteratorFrom(e){return new o0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new rt(this.comparator);return n.data=e,n}}class o0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e){this.fields=e,e.sort(tt.comparator)}static empty(){return new an([])}unionWith(e){let n=new rt(tt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new an(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return li(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new S1("Invalid base64 string: "+i):i}}(e);return new it(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new it(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}it.EMPTY_BYTE_STRING=new it("");const qk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(t){if(pe(!!t),typeof t=="string"){let e=0;const n=qk.exec(t);if(pe(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Me(t.seconds),nanos:Me(t.nanos)}}function Me(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function hs(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mf(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Lf(t){const e=t.mapValue.fields.__previous_value__;return Mf(e)?Lf(e):e}function Wo(t){const e=Or(t.mapValue.fields.__local_write_time__.timestampValue);return new He(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e,n,r,s,i,o,l,u,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=c}}class Ho{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ho("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ho&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tl={mapValue:{}};function ds(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Mf(t)?4:Gk(t)?9007199254740991:Kk(t)?10:11:X()}function In(t,e){if(t===e)return!0;const n=ds(t);if(n!==ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Wo(t).isEqual(Wo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Or(s.timestampValue),l=Or(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return hs(s.bytesValue).isEqual(hs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Me(s.geoPointValue.latitude)===Me(i.geoPointValue.latitude)&&Me(s.geoPointValue.longitude)===Me(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Me(s.integerValue)===Me(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Me(s.doubleValue),l=Me(i.doubleValue);return o===l?ru(o)===ru(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return li(t.arrayValue.values||[],e.arrayValue.values||[],In);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(i0(o)!==i0(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!In(o[u],l[u])))return!1;return!0}(t,e);default:return X()}}function qo(t,e){return(t.values||[]).find(n=>In(n,e))!==void 0}function ui(t,e){if(t===e)return 0;const n=ds(t),r=ds(e);if(n!==r)return ue(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ue(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Me(i.integerValue||i.doubleValue),u=Me(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return a0(t.timestampValue,e.timestampValue);case 4:return a0(Wo(t),Wo(e));case 5:return ue(t.stringValue,e.stringValue);case 6:return function(i,o){const l=hs(i),u=hs(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let c=0;c<l.length&&c<u.length;c++){const p=ue(l[c],u[c]);if(p!==0)return p}return ue(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=ue(Me(i.latitude),Me(o.latitude));return l!==0?l:ue(Me(i.longitude),Me(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return l0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,c,p;const m=i.fields||{},g=o.fields||{},_=(l=m.value)===null||l===void 0?void 0:l.arrayValue,b=(u=g.value)===null||u===void 0?void 0:u.arrayValue,k=ue(((c=_==null?void 0:_.values)===null||c===void 0?void 0:c.length)||0,((p=b==null?void 0:b.values)===null||p===void 0?void 0:p.length)||0);return k!==0?k:l0(_,b)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===tl.mapValue&&o===tl.mapValue)return 0;if(i===tl.mapValue)return 1;if(o===tl.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),c=o.fields||{},p=Object.keys(c);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const g=ue(u[m],p[m]);if(g!==0)return g;const _=ui(l[u[m]],c[p[m]]);if(_!==0)return _}return ue(u.length,p.length)}(t.mapValue,e.mapValue);default:throw X()}}function a0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ue(t,e);const n=Or(t),r=Or(e),s=ue(n.seconds,r.seconds);return s!==0?s:ue(n.nanos,r.nanos)}function l0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=ui(n[s],r[s]);if(i)return i}return ue(n.length,r.length)}function ci(t){return ad(t)}function ad(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Or(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return hs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return Y.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=ad(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${ad(n.fields[o])}`;return s+"}"}(t.mapValue):X()}function ld(t){return!!t&&"integerValue"in t}function Vf(t){return!!t&&"arrayValue"in t}function u0(t){return!!t&&"nullValue"in t}function c0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function El(t){return!!t&&"mapValue"in t}function Kk(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function vo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ti(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=vo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=vo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function Gk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.value=e}static empty(){return new Wt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!El(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=vo(n)}setAll(e){let n=tt.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=vo(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());El(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return In(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];El(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ti(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Wt(vo(this.value))}}function k1(t){const e=[];return Ti(t.fields,(n,r)=>{const s=new tt([n]);if(El(r)){const i=k1(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new an(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new mt(e,0,J.min(),J.min(),J.min(),Wt.empty(),0)}static newFoundDocument(e,n,r,s){return new mt(e,1,n,J.min(),r,s,0)}static newNoDocument(e,n){return new mt(e,2,n,J.min(),J.min(),Wt.empty(),0)}static newUnknownDocument(e,n){return new mt(e,3,n,J.min(),J.min(),Wt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(J.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=J.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(e,n){this.position=e,this.inclusive=n}}function h0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=Y.comparator(Y.fromName(o.referenceValue),n.key):r=ui(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function d0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!In(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n="asc"){this.field=e,this.dir=n}}function Qk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C1{}class ze extends C1{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new Jk(e,n,r):n==="array-contains"?new tC(e,r):n==="in"?new nC(e,r):n==="not-in"?new rC(e,r):n==="array-contains-any"?new sC(e,r):new ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Zk(e,r):new eC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ui(n,this.value)):n!==null&&ds(this.value)===ds(n)&&this.matchesComparison(ui(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return X()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Sn extends C1{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new Sn(e,n)}matches(e){return R1(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function R1(t){return t.op==="and"}function b1(t){return Xk(t)&&R1(t)}function Xk(t){for(const e of t.filters)if(e instanceof Sn)return!1;return!0}function ud(t){if(t instanceof ze)return t.field.canonicalString()+t.op.toString()+ci(t.value);if(b1(t))return t.filters.map(e=>ud(e)).join(",");{const e=t.filters.map(n=>ud(n)).join(",");return`${t.op}(${e})`}}function A1(t,e){return t instanceof ze?function(r,s){return s instanceof ze&&r.op===s.op&&r.field.isEqual(s.field)&&In(r.value,s.value)}(t,e):t instanceof Sn?function(r,s){return s instanceof Sn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&A1(o,s.filters[l]),!0):!1}(t,e):void X()}function N1(t){return t instanceof ze?function(n){return`${n.field.canonicalString()} ${n.op} ${ci(n.value)}`}(t):t instanceof Sn?function(n){return n.op.toString()+" {"+n.getFilters().map(N1).join(" ,")+"}"}(t):"Filter"}class Jk extends ze{constructor(e,n,r){super(e,n,r),this.key=Y.fromName(r.referenceValue)}matches(e){const n=Y.comparator(e.key,this.key);return this.matchesComparison(n)}}class Zk extends ze{constructor(e,n){super(e,"in",n),this.keys=P1("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class eC extends ze{constructor(e,n){super(e,"not-in",n),this.keys=P1("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function P1(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Y.fromName(r.referenceValue))}class tC extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Vf(n)&&qo(n.arrayValue,this.value)}}class nC extends ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&qo(this.value.arrayValue,n)}}class rC extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(qo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!qo(this.value.arrayValue,n)}}class sC extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Vf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>qo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function f0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new iC(t,e,n,r,s,i,o)}function Ff(t){const e=Z(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>ud(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Uu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ci(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ci(r)).join(",")),e.ue=n}return e.ue}function Uf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Qk(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!A1(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!d0(t.startAt,e.startAt)&&d0(t.endAt,e.endAt)}function cd(t){return Y.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function oC(t,e,n,r,s,i,o,l){return new Bu(t,e,n,r,s,i,o,l)}function Bf(t){return new Bu(t)}function p0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function aC(t){return t.collectionGroup!==null}function yo(t){const e=Z(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new rt(tt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(l=l.add(c.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new iu(i,r))}),n.has(tt.keyField().canonicalString())||e.ce.push(new iu(tt.keyField(),r))}return e.ce}function En(t){const e=Z(t);return e.le||(e.le=lC(e,yo(t))),e.le}function lC(t,e){if(t.limitType==="F")return f0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new iu(s.field,i)});const n=t.endAt?new su(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new su(t.startAt.position,t.startAt.inclusive):null;return f0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function hd(t,e,n){return new Bu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function $u(t,e){return Uf(En(t),En(e))&&t.limitType===e.limitType}function D1(t){return`${Ff(En(t))}|lt:${t.limitType}`}function Cs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>N1(s)).join(", ")}]`),Uu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ci(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ci(s)).join(",")),`Target(${r})`}(En(t))}; limitType=${t.limitType})`}function zu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):Y.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of yo(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const c=h0(o,l,u);return o.inclusive?c<=0:c<0}(r.startAt,yo(r),s)||r.endAt&&!function(o,l,u){const c=h0(o,l,u);return o.inclusive?c>=0:c>0}(r.endAt,yo(r),s))}(t,e)}function uC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function O1(t){return(e,n)=>{let r=!1;for(const s of yo(t)){const i=cC(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function cC(t,e,n){const r=t.field.isKeyField()?Y.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),c=l.data.field(i);return u!==null&&c!==null?ui(u,c):X()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return X()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ti(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return I1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=new be(Y.comparator);function Xn(){return hC}const j1=new be(Y.comparator);function so(...t){let e=j1;for(const n of t)e=e.insert(n.key,n);return e}function M1(t){let e=j1;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function es(){return _o()}function L1(){return _o()}function _o(){return new Ii(t=>t.toString(),(t,e)=>t.isEqual(e))}const dC=new be(Y.comparator),fC=new rt(Y.comparator);function re(...t){let e=fC;for(const n of t)e=e.add(n);return e}const pC=new rt(ue);function mC(){return pC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $f(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ru(e)?"-0":e}}function V1(t){return{integerValue:""+t}}function gC(t,e){return Hk(e)?V1(e):$f(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(){this._=void 0}}function vC(t,e,n){return t instanceof ou?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Mf(i)&&(i=Lf(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Yo?U1(t,e):t instanceof Ko?B1(t,e):function(s,i){const o=F1(s,i),l=m0(o)+m0(s.Pe);return ld(o)&&ld(s.Pe)?V1(l):$f(s.serializer,l)}(t,e)}function yC(t,e,n){return t instanceof Yo?U1(t,e):t instanceof Ko?B1(t,e):n}function F1(t,e){return t instanceof au?function(r){return ld(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ou extends Wu{}class Yo extends Wu{constructor(e){super(),this.elements=e}}function U1(t,e){const n=$1(e);for(const r of t.elements)n.some(s=>In(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ko extends Wu{constructor(e){super(),this.elements=e}}function B1(t,e){let n=$1(e);for(const r of t.elements)n=n.filter(s=>!In(s,r));return{arrayValue:{values:n}}}class au extends Wu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function m0(t){return Me(t.integerValue||t.doubleValue)}function $1(t){return Vf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function _C(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Yo&&s instanceof Yo||r instanceof Ko&&s instanceof Ko?li(r.elements,s.elements,In):r instanceof au&&s instanceof au?In(r.Pe,s.Pe):r instanceof ou&&s instanceof ou}(t.transform,e.transform)}class wC{constructor(e,n){this.version=e,this.transformResults=n}}class $n{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $n}static exists(e){return new $n(void 0,e)}static updateTime(e){return new $n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function xl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Hu{}function z1(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new H1(t.key,$n.none()):new pa(t.key,t.data,$n.none());{const n=t.data,r=Wt.empty();let s=new rt(tt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ys(t.key,r,new an(s.toArray()),$n.none())}}function EC(t,e,n){t instanceof pa?function(s,i,o){const l=s.value.clone(),u=v0(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof ys?function(s,i,o){if(!xl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=v0(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(W1(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function wo(t,e,n,r){return t instanceof pa?function(i,o,l,u){if(!xl(i.precondition,o))return l;const c=i.value.clone(),p=y0(i.fieldTransforms,u,o);return c.setAll(p),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ys?function(i,o,l,u){if(!xl(i.precondition,o))return l;const c=y0(i.fieldTransforms,u,o),p=o.data;return p.setAll(W1(i)),p.setAll(c),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(i,o,l){return xl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function xC(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=F1(r.transform,s||null);i!=null&&(n===null&&(n=Wt.empty()),n.set(r.field,i))}return n||null}function g0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&li(r,s,(i,o)=>_C(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class pa extends Hu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ys extends Hu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function W1(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function v0(t,e,n){const r=new Map;pe(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,yC(o,l,n[s]))}return r}function y0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,vC(i,o,e))}return r}class H1 extends Hu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class TC extends Hu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&EC(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=wo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=wo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=L1();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=z1(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(J.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),re())}isEqual(e){return this.batchId===e.batchId&&li(this.mutations,e.mutations,(n,r)=>g0(n,r))&&li(this.baseMutations,e.baseMutations,(n,r)=>g0(n,r))}}class zf{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){pe(e.mutations.length===r.length);let s=function(){return dC}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new zf(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve,oe;function CC(t){switch(t){default:return X();case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0}}function q1(t){if(t===void 0)return Qn("GRPC error has no .code"),F.UNKNOWN;switch(t){case Ve.OK:return F.OK;case Ve.CANCELLED:return F.CANCELLED;case Ve.UNKNOWN:return F.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return F.INTERNAL;case Ve.UNAVAILABLE:return F.UNAVAILABLE;case Ve.UNAUTHENTICATED:return F.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case Ve.NOT_FOUND:return F.NOT_FOUND;case Ve.ALREADY_EXISTS:return F.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return F.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case Ve.ABORTED:return F.ABORTED;case Ve.OUT_OF_RANGE:return F.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return F.UNIMPLEMENTED;case Ve.DATA_LOSS:return F.DATA_LOSS;default:return X()}}(oe=Ve||(Ve={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC=new rs([4294967295,4294967295],0);function _0(t){const e=RC().encode(t),n=new g1;return n.update(e),new Uint8Array(n.digest())}function w0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new rs([n,r],0),new rs([s,i],0)]}class Wf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new io(`Invalid padding: ${n}`);if(r<0)throw new io(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new io(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new io(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=rs.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(rs.fromNumber(r)));return s.compare(bC)===1&&(s=new rs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=_0(e),[r,s]=w0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Wf(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=_0(e),[r,s]=w0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class io extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,ma.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new qu(J.min(),s,new be(ue),Xn(),re())}}class ma{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ma(r,n,re(),re(),re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class Y1{constructor(e,n){this.targetId=e,this.me=n}}class K1{constructor(e,n,r=it.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class E0{constructor(){this.fe=0,this.ge=T0(),this.pe=it.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=re(),n=re(),r=re();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:X()}}),new ma(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=T0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,pe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class AC{constructor(e){this.Le=e,this.Be=new Map,this.ke=Xn(),this.qe=x0(),this.Qe=new be(ue)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:X()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(cd(i))if(r===0){const o=new Y(i.path);this.Ue(n,o,mt.newNoDocument(o,J.min()))}else pe(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,c)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=hs(r).toUint8Array()}catch(u){if(u instanceof S1)return ai("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Wf(o,s,i)}catch(u){return ai(u instanceof io?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&cd(l.target)){const u=new Y(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,mt.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=re();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const c=this.Je(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new qu(e,n,this.Qe,this.ke,r);return this.ke=Xn(),this.qe=x0(),this.Qe=new be(ue),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new E0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new rt(ue),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new E0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function x0(){return new be(Y.comparator)}function T0(){return new be(Y.comparator)}const NC={asc:"ASCENDING",desc:"DESCENDING"},PC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},DC={and:"AND",or:"OR"};class OC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function dd(t,e){return t.useProto3Json||Uu(e)?e:{value:e}}function lu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function G1(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function jC(t,e){return lu(t,e.toTimestamp())}function xn(t){return pe(!!t),J.fromTimestamp(function(n){const r=Or(n);return new He(r.seconds,r.nanos)}(t))}function Hf(t,e){return fd(t,e).canonicalString()}function fd(t,e){const n=function(s){return new je(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Q1(t){const e=je.fromString(t);return pe(tw(e)),e}function pd(t,e){return Hf(t.databaseId,e.path)}function Kc(t,e){const n=Q1(e);if(n.get(1)!==t.databaseId.projectId)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Y(J1(n))}function X1(t,e){return Hf(t.databaseId,e)}function MC(t){const e=Q1(t);return e.length===4?je.emptyPath():J1(e)}function md(t){return new je(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function J1(t){return pe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function I0(t,e,n){return{name:pd(t,e),fields:n.value.mapValue.fields}}function LC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:X()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(c,p){return c.useProto3Json?(pe(p===void 0||typeof p=="string"),it.fromBase64String(p||"")):(pe(p===void 0||p instanceof Buffer||p instanceof Uint8Array),it.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const p=c.code===void 0?F.UNKNOWN:q1(c.code);return new q(p,c.message||"")}(o);n=new K1(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Kc(t,r.document.name),i=xn(r.document.updateTime),o=r.document.createTime?xn(r.document.createTime):J.min(),l=new Wt({mapValue:{fields:r.document.fields}}),u=mt.newFoundDocument(s,i,o,l),c=r.targetIds||[],p=r.removedTargetIds||[];n=new Tl(c,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Kc(t,r.document),i=r.readTime?xn(r.readTime):J.min(),o=mt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Tl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Kc(t,r.document),i=r.removedTargetIds||[];n=new Tl([],i,s,null)}else{if(!("filter"in e))return X();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new kC(s,i),l=r.targetId;n=new Y1(l,o)}}return n}function VC(t,e){let n;if(e instanceof pa)n={update:I0(t,e.key,e.value)};else if(e instanceof H1)n={delete:pd(t,e.key)};else if(e instanceof ys)n={update:I0(t,e.key,e.data),updateMask:YC(e.fieldMask)};else{if(!(e instanceof TC))return X();n={verify:pd(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof ou)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Yo)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ko)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof au)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw X()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:jC(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:X()}(t,e.precondition)),n}function FC(t,e){return t&&t.length>0?(pe(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?xn(s.updateTime):xn(i);return o.isEqual(J.min())&&(o=xn(i)),new wC(o,s.transformResults||[])}(n,e))):[]}function UC(t,e){return{documents:[X1(t,e.path)]}}function BC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=X1(t,s);const i=function(c){if(c.length!==0)return ew(Sn.create(c,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(c){if(c.length!==0)return c.map(p=>function(g){return{field:Rs(g.field),direction:WC(g.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=dd(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{_t:n,parent:s}}function $C(t){let e=MC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){pe(r===1);const p=n.from[0];p.allDescendants?s=p.collectionId:e=e.child(p.collectionId)}let i=[];n.where&&(i=function(m){const g=Z1(m);return g instanceof Sn&&b1(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(g=>function(b){return new iu(bs(b.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(m){let g;return g=typeof m=="object"?m.value:m,Uu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(m){const g=!!m.before,_=m.values||[];return new su(_,g)}(n.startAt));let c=null;return n.endAt&&(c=function(m){const g=!m.before,_=m.values||[];return new su(_,g)}(n.endAt)),oC(e,s,o,i,l,"F",u,c)}function zC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return X()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Z1(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=bs(n.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=bs(n.unaryFilter.field);return ze.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=bs(n.unaryFilter.field);return ze.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=bs(n.unaryFilter.field);return ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return X()}}(t):t.fieldFilter!==void 0?function(n){return ze.create(bs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return X()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Sn.create(n.compositeFilter.filters.map(r=>Z1(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return X()}}(n.compositeFilter.op))}(t):X()}function WC(t){return NC[t]}function HC(t){return PC[t]}function qC(t){return DC[t]}function Rs(t){return{fieldPath:t.canonicalString()}}function bs(t){return tt.fromServerFormat(t.fieldPath)}function ew(t){return t instanceof ze?function(n){if(n.op==="=="){if(c0(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NAN"}};if(u0(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(c0(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NOT_NAN"}};if(u0(n.value))return{unaryFilter:{field:Rs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Rs(n.field),op:HC(n.op),value:n.value}}}(t):t instanceof Sn?function(n){const r=n.getFilters().map(s=>ew(s));return r.length===1?r[0]:{compositeFilter:{op:qC(n.op),filters:r}}}(t):X()}function YC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function tw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n,r,s,i=J.min(),o=J.min(),l=it.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new gr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC{constructor(e){this.ct=e}}function GC(t){const e=$C({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?hd(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(){this.un=new XC}addToCollectionParentIndex(e,n){return this.un.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}deleteAllFieldIndexes(e){return V.resolve()}createTargetIndexes(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Dr.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Dr.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class XC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new rt(je.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new rt(je.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new hi(0)}static kn(){return new hi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(){this.changes=new Ii(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,mt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&wo(r.mutation,s,an.empty(),He.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=re()){const s=es();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=so();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=es();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,re()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Xn();const o=_o(),l=function(){return _o()}();return n.forEach((u,c)=>{const p=r.get(c.key);s.has(c.key)&&(p===void 0||p.mutation instanceof ys)?i=i.insert(c.key,c):p!==void 0?(o.set(c.key,p.mutation.getFieldMask()),wo(p.mutation,c,p.mutation.getFieldMask(),He.now())):o.set(c.key,an.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((c,p)=>o.set(c,p)),n.forEach((c,p)=>{var m;return l.set(c,new ZC(p,(m=o.get(c))!==null&&m!==void 0?m:null))}),l))}recalculateAndSaveOverlays(e,n){const r=_o();let s=new be((o,l)=>o-l),i=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let p=r.get(u)||an.empty();p=l.applyToLocalView(c,p),r.set(u,p);const m=(s.get(l.batchId)||re()).add(u);s=s.insert(l.batchId,m)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),c=u.key,p=u.value,m=L1();p.forEach(g=>{if(!i.has(g)){const _=z1(n.get(g),r.get(g));_!==null&&m.set(g,_),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,m))}return V.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):aC(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):V.resolve(es());let l=-1,u=i;return o.next(c=>V.forEach(c,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),i.get(p)?V.resolve():this.remoteDocumentCache.getEntry(e,p).next(g=>{u=u.insert(p,g)}))).next(()=>this.populateOverlays(e,c,i)).next(()=>this.computeViews(e,u,c,re())).next(p=>({batchId:l,changes:M1(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Y(n)).next(r=>{let s=so();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=so();return this.indexManager.getCollectionParents(e,i).next(l=>V.forEach(l,u=>{const c=function(m,g){return new Bu(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,c,r,s).next(p=>{p.forEach((m,g)=>{o=o.insert(m,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,c)=>{const p=c.getKey();o.get(p)===null&&(o=o.insert(p,mt.newInvalidDocument(p)))});let l=so();return o.forEach((u,c)=>{const p=i.get(u);p!==void 0&&wo(p.mutation,c,an.empty(),He.now()),zu(n,c)&&(l=l.insert(u,c))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return V.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:xn(s.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:GC(s.bundledQuery),readTime:xn(s.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(){this.overlays=new be(Y.comparator),this.Ir=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=es();return V.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const s=es(),i=n.length+1,o=new Y(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return V.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new be((c,p)=>c-p);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let p=i.get(c.largestBatchId);p===null&&(p=es(),i=i.insert(c.largestBatchId,p)),p.set(c.getKey(),c)}}const l=es(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,p)=>l.set(c,p)),!(l.size()>=s)););return V.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new SC(n,r));let i=this.Ir.get(n);i===void 0&&(i=re(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return V.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,V.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qf{constructor(){this.Tr=new rt(Ke.Er),this.dr=new rt(Ke.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Ke(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Ke(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new Y(new je([])),r=new Ke(n,e),s=new Ke(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new Y(new je([])),r=new Ke(n,e),s=new Ke(n,e+1);let i=re();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Ke(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Ke{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return Y.comparator(e.key,n.key)||ue(e.wr,n.wr)}static Ar(e,n){return ue(e.wr,n.wr)||Y.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new rt(Ke.Er)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new IC(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new Ke(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return V.resolve(o)}lookupMutationBatch(e,n){return V.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return V.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Ke(n,0),s=new Ke(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),V.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new rt(ue);return n.forEach(s=>{const i=new Ke(s,0),o=new Ke(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),V.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;Y.isDocumentKey(i)||(i=i.child(""));const o=new Ke(new Y(i),0);let l=new rt(ue);return this.br.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===s&&(l=l.add(u.wr)),!0)},o),V.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){pe(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return V.forEach(n.mutations,s=>{const i=new Ke(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Ke(n,0),s=this.br.firstAfterOrEqual(r);return V.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e){this.Mr=e,this.docs=function(){return new be(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():mt.newInvalidDocument(n))}getEntries(e,n){let r=Xn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():mt.newInvalidDocument(s))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Xn();const o=n.path,l=new Y(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:c,value:{document:p}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Bk(Uk(p),r)<=0||(s.has(p.key)||zu(n,p))&&(i=i.insert(p.key,p.mutableCopy()))}return V.resolve(i)}getAllFromCollectionGroup(e,n,r,s){X()}Or(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new oR(this)}getSize(e){return V.resolve(this.size)}}class oR extends JC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(e){this.persistence=e,this.Nr=new Ii(n=>Ff(n),Uf),this.lastRemoteSnapshotVersion=J.min(),this.highestTargetId=0,this.Lr=0,this.Br=new qf,this.targetCount=0,this.kr=hi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),V.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new hi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.Kn(n),V.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),V.waitFor(i).next(()=>s)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),V.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new jf(0),this.Kr=!1,this.Kr=!0,this.$r=new rR,this.referenceDelegate=e(this),this.Ur=new aR(this),this.indexManager=new QC,this.remoteDocumentCache=function(s){return new iR(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new KC(n),this.Gr=new tR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new nR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new sR(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new uR(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return V.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class uR extends zk{constructor(e){super(),this.currentSequenceNumber=e}}class Yf{constructor(e){this.persistence=e,this.Jr=new qf,this.Yr=null}static Zr(e){return new Yf(e)}get Xr(){if(this.Yr)return this.Yr;throw X()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),V.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Xr,r=>{const s=Y.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,J.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return V.or([()=>V.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kf{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=re(),s=re();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Kf(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return pI()?8:Wk(vt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new cR;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Ki()<=ie.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Cs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),V.resolve()):(Ki()<=ie.DEBUG&&H("QueryEngine","Query:",Cs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Ki()<=ie.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Cs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,En(n))):V.resolve())}Yi(e,n){if(p0(n))return V.resolve(null);let r=En(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=hd(n,null,"F"),r=En(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=re(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.ts(n,l);return this.ns(n,c,o,u.readTime)?this.Yi(e,hd(n,null,"F")):this.rs(e,c,n,u)}))})))}Zi(e,n,r,s){return p0(n)||s.isEqual(J.min())?V.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?V.resolve(null):(Ki()<=ie.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Cs(n)),this.rs(e,o,n,Fk(s,-1)).next(l=>l))})}ts(e,n){let r=new rt(O1(e));return n.forEach((s,i)=>{zu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Ki()<=ie.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Cs(n)),this.Ji.getDocumentsMatchingQuery(e,n,Dr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new be(ue),this._s=new Ii(i=>Ff(i),Uf),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new eR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function fR(t,e,n,r){return new dR(t,e,n,r)}async function nw(t,e){const n=Z(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=re();for(const c of s){o.push(c.batchId);for(const p of c.mutations)u=u.add(p.key)}for(const c of i){l.push(c.batchId);for(const p of c.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(c=>({hs:c,removedBatchIds:o,addedBatchIds:l}))})})}function pR(t,e){const n=Z(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,c,p){const m=c.batch,g=m.keys();let _=V.resolve();return g.forEach(b=>{_=_.next(()=>p.getEntry(u,b)).next(k=>{const N=c.docVersions.get(b);pe(N!==null),k.version.compareTo(N)<0&&(m.applyToRemoteDocument(k,c),k.isValidDocument()&&(k.setReadTime(c.commitVersion),p.addEntry(k)))})}),_.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=re();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(u=u.add(l.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function rw(t){const e=Z(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function mR(t,e){const n=Z(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((p,m)=>{const g=s.get(m);if(!g)return;l.push(n.Ur.removeMatchingKeys(i,p.removedDocuments,m).next(()=>n.Ur.addMatchingKeys(i,p.addedDocuments,m)));let _=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(m)!==null?_=_.withResumeToken(it.EMPTY_BYTE_STRING,J.min()).withLastLimboFreeSnapshotVersion(J.min()):p.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(p.resumeToken,r)),s=s.insert(m,_),function(k,N,w){return k.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-k.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(g,_,p)&&l.push(n.Ur.updateTargetData(i,_))});let u=Xn(),c=re();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,p))}),l.push(gR(i,o,e.documentUpdates).next(p=>{u=p.Ps,c=p.Is})),!r.isEqual(J.min())){const p=n.Ur.getLastRemoteSnapshotVersion(i).next(m=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(p)}return V.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,c)).next(()=>u)}).then(i=>(n.os=s,i))}function gR(t,e,n){let r=re(),s=re();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Xn();return n.forEach((l,u)=>{const c=i.get(l);u.isFoundDocument()!==c.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(J.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):H("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function vR(t,e){const n=Z(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function yR(t,e){const n=Z(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,V.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new gr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function gd(t,e,n){const r=Z(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!fa(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function S0(t,e,n){const r=Z(t);let s=J.min(),i=re();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,p){const m=Z(u),g=m._s.get(p);return g!==void 0?V.resolve(m.os.get(g)):m.Ur.getTargetData(c,p)}(r,o,En(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:J.min(),n?i:re())).next(l=>(_R(r,uC(e),l),{documents:l,Ts:i})))}function _R(t,e,n){let r=t.us.get(e)||J.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class k0{constructor(){this.activeTargetIds=mC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class wR{constructor(){this.so=new k0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new k0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ER{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nl=null;function Gc(){return nl===null?nl=function(){return 268435456+Math.round(2147483648*Math.random())}():nl++,"0x"+nl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt="WebChannelConnection";class IR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=Gc(),u=this.xo(n,r.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const c={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(c,i,o),this.No(n,u,c,s).then(p=>(H("RestConnection",`Received RPC '${n}' ${l}: `,p),p),p=>{throw ai("RestConnection",`RPC '${n}' ${l} failed with error: `,p,"url: ",u,"request:",s),p})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+xi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=xR[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=Gc();return new Promise((o,l)=>{const u=new v1;u.setWithCredentials(!0),u.listenOnce(y1.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case wl.NO_ERROR:const p=u.getResponseJson();H(dt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(p)),o(p);break;case wl.TIMEOUT:H(dt,`RPC '${e}' ${i} timed out`),l(new q(F.DEADLINE_EXCEEDED,"Request time out"));break;case wl.HTTP_ERROR:const m=u.getStatus();if(H(dt,`RPC '${e}' ${i} failed with status:`,m,"response text:",u.getResponseText()),m>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g==null?void 0:g.error;if(_&&_.status&&_.message){const b=function(N){const w=N.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(w)>=0?w:F.UNKNOWN}(_.status);l(new q(b,_.message))}else l(new q(F.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new q(F.UNAVAILABLE,"Connection failed."));break;default:X()}}finally{H(dt,`RPC '${e}' ${i} completed.`)}});const c=JSON.stringify(s);H(dt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",c,r,15)})}Bo(e,n,r){const s=Gc(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=E1(),l=w1(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const p=i.join("");H(dt,`Creating RPC '${e}' stream ${s}: ${p}`,u);const m=o.createWebChannel(p,u);let g=!1,_=!1;const b=new TR({Io:N=>{_?H(dt,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(g||(H(dt,`Opening RPC '${e}' stream ${s} transport.`),m.open(),g=!0),H(dt,`RPC '${e}' stream ${s} sending:`,N),m.send(N))},To:()=>m.close()}),k=(N,w,E)=>{N.listen(w,S=>{try{E(S)}catch(O){setTimeout(()=>{throw O},0)}})};return k(m,ro.EventType.OPEN,()=>{_||(H(dt,`RPC '${e}' stream ${s} transport opened.`),b.yo())}),k(m,ro.EventType.CLOSE,()=>{_||(_=!0,H(dt,`RPC '${e}' stream ${s} transport closed`),b.So())}),k(m,ro.EventType.ERROR,N=>{_||(_=!0,ai(dt,`RPC '${e}' stream ${s} transport errored:`,N),b.So(new q(F.UNAVAILABLE,"The operation could not be completed")))}),k(m,ro.EventType.MESSAGE,N=>{var w;if(!_){const E=N.data[0];pe(!!E);const S=E,O=S.error||((w=S[0])===null||w===void 0?void 0:w.error);if(O){H(dt,`RPC '${e}' stream ${s} received error:`,O);const L=O.status;let M=function(I){const R=Ve[I];if(R!==void 0)return q1(R)}(L),T=O.message;M===void 0&&(M=F.INTERNAL,T="Unknown error status: "+L+" with message "+O.message),_=!0,b.So(new q(M,T)),m.close()}else H(dt,`RPC '${e}' stream ${s} received:`,E),b.bo(E)}}),k(l,_1.STAT_EVENT,N=>{N.stat===od.PROXY?H(dt,`RPC '${e}' stream ${s} detected buffering proxy`):N.stat===od.NOPROXY&&H(dt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function Qc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yu(t){return new OC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new sw(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===F.RESOURCE_EXHAUSTED?(Qn(n.toString()),Qn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new q(F.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class SR extends iw{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=LC(this.serializer,e),r=function(i){if(!("targetChange"in i))return J.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?J.min():o.readTime?xn(o.readTime):J.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=md(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=cd(u)?{documents:UC(i,u)}:{query:BC(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=G1(i,o.resumeToken);const c=dd(i,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(J.min())>0){l.readTime=lu(i,o.snapshotVersion.toTimestamp());const c=dd(i,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=zC(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=md(this.serializer),n.removeTarget=e,this.a_(n)}}class kR extends iw{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return pe(!!e.streamToken),this.lastStreamToken=e.streamToken,pe(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){pe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=FC(e.writeResults,e.commitTime),r=xn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=md(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>VC(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,fd(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new q(F.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,fd(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(F.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class RR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Qn(n),this.D_=!1):H("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{_s(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(u){const c=Z(u);c.L_.add(4),await ga(c),c.q_.set("Unknown"),c.L_.delete(4),await Ku(c)}(this))})}),this.q_=new RR(r,s)}}async function Ku(t){if(_s(t))for(const e of t.B_)await e(!0)}async function ga(t){for(const e of t.B_)await e(!1)}function ow(t,e){const n=Z(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Jf(n)?Xf(n):Si(n).r_()&&Qf(n,e))}function Gf(t,e){const n=Z(t),r=Si(n);n.N_.delete(e),r.r_()&&aw(n,e),n.N_.size===0&&(r.r_()?r.o_():_s(n)&&n.q_.set("Unknown"))}function Qf(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(J.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Si(t).A_(e)}function aw(t,e){t.Q_.xe(e),Si(t).R_(e)}function Xf(t){t.Q_=new AC({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Si(t).start(),t.q_.v_()}function Jf(t){return _s(t)&&!Si(t).n_()&&t.N_.size>0}function _s(t){return Z(t).L_.size===0}function lw(t){t.Q_=void 0}async function AR(t){t.q_.set("Online")}async function NR(t){t.N_.forEach((e,n)=>{Qf(t,e)})}async function PR(t,e){lw(t),Jf(t)?(t.q_.M_(e),Xf(t)):t.q_.set("Unknown")}async function DR(t,e,n){if(t.q_.set("Online"),e instanceof K1&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await uu(t,r)}else if(e instanceof Tl?t.Q_.Ke(e):e instanceof Y1?t.Q_.He(e):t.Q_.We(e),!n.isEqual(J.min()))try{const r=await rw(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const p=i.N_.get(c);p&&i.N_.set(c,p.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,c)=>{const p=i.N_.get(u);if(!p)return;i.N_.set(u,p.withResumeToken(it.EMPTY_BYTE_STRING,p.snapshotVersion)),aw(i,u);const m=new gr(p.target,u,c,p.sequenceNumber);Qf(i,m)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){H("RemoteStore","Failed to raise snapshot:",r),await uu(t,r)}}async function uu(t,e,n){if(!fa(e))throw e;t.L_.add(1),await ga(t),t.q_.set("Offline"),n||(n=()=>rw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Ku(t)})}function uw(t,e){return e().catch(n=>uu(t,n,e))}async function Gu(t){const e=Z(t),n=jr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;OR(e);)try{const s=await vR(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,jR(e,s)}catch(s){await uu(e,s)}cw(e)&&hw(e)}function OR(t){return _s(t)&&t.O_.length<10}function jR(t,e){t.O_.push(e);const n=jr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function cw(t){return _s(t)&&!jr(t).n_()&&t.O_.length>0}function hw(t){jr(t).start()}async function MR(t){jr(t).p_()}async function LR(t){const e=jr(t);for(const n of t.O_)e.m_(n.mutations)}async function VR(t,e,n){const r=t.O_.shift(),s=zf.from(r,e,n);await uw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Gu(t)}async function FR(t,e){e&&jr(t).V_&&await async function(r,s){if(function(o){return CC(o)&&o!==F.ABORTED}(s.code)){const i=r.O_.shift();jr(r).s_(),await uw(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Gu(r)}}(t,e),cw(t)&&hw(t)}async function R0(t,e){const n=Z(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const r=_s(n);n.L_.add(3),await ga(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Ku(n)}async function UR(t,e){const n=Z(t);e?(n.L_.delete(2),await Ku(n)):e||(n.L_.add(2),await ga(n),n.q_.set("Unknown"))}function Si(t){return t.K_||(t.K_=function(n,r,s){const i=Z(n);return i.w_(),new SR(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:AR.bind(null,t),Ro:NR.bind(null,t),mo:PR.bind(null,t),d_:DR.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Jf(t)?Xf(t):t.q_.set("Unknown")):(await t.K_.stop(),lw(t))})),t.K_}function jr(t){return t.U_||(t.U_=function(n,r,s){const i=Z(n);return i.w_(),new kR(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:MR.bind(null,t),mo:FR.bind(null,t),f_:LR.bind(null,t),g_:VR.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Gu(t)):(await t.U_.stop(),t.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new br,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Zf(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ep(t,e){if(Qn("AsyncQueue",`${e}: ${t}`),fa(t))return new q(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xs{constructor(e){this.comparator=e?(n,r)=>e(n,r)||Y.comparator(n.key,r.key):(n,r)=>Y.comparator(n.key,r.key),this.keyedMap=so(),this.sortedSet=new be(this.comparator)}static emptySet(e){return new Xs(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Xs)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Xs;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b0{constructor(){this.W_=new be(Y.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):X():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class di{constructor(e,n,r,s,i,o,l,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new di(e,n,Xs.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&$u(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class $R{constructor(){this.queries=A0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=Z(n),i=s.queries;s.queries=A0(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new q(F.ABORTED,"Firestore shutting down"))}}function A0(){return new Ii(t=>D1(t),$u)}async function zR(t,e){const n=Z(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new BR,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=ep(o,`Initialization of query '${Cs(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&tp(n)}async function WR(t,e){const n=Z(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function HR(t,e){const n=Z(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&tp(n)}function qR(t,e,n){const r=Z(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function tp(t){t.Y_.forEach(e=>{e.next()})}var vd,N0;(N0=vd||(vd={})).ea="default",N0.Cache="cache";class YR{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new di(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=di.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==vd.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw{constructor(e){this.key=e}}class fw{constructor(e){this.key=e}}class KR{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=re(),this.mutatedKeys=re(),this.Aa=O1(e),this.Ra=new Xs(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new b0,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,c=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((p,m)=>{const g=s.get(p),_=zu(this.query,m)?m:null,b=!!g&&this.mutatedKeys.has(g.key),k=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let N=!1;g&&_?g.data.isEqual(_.data)?b!==k&&(r.track({type:3,doc:_}),N=!0):this.ga(g,_)||(r.track({type:2,doc:_}),N=!0,(u&&this.Aa(_,u)>0||c&&this.Aa(_,c)<0)&&(l=!0)):!g&&_?(r.track({type:0,doc:_}),N=!0):g&&!_&&(r.track({type:1,doc:g}),N=!0,(u||c)&&(l=!0)),N&&(_?(o=o.add(_),i=k?i.add(p):i.delete(p)):(o=o.delete(p),i=i.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),i=i.delete(p.key),r.track({type:1,doc:p})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((p,m)=>function(_,b){const k=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return X()}};return k(_)-k(b)}(p.type,m.type)||this.Aa(p.doc,m.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,c=u!==this.Ea;return this.Ea=u,o.length!==0||c?{snapshot:new di(this.query,e.Ra,i,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new b0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=re(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new fw(r))}),this.da.forEach(r=>{e.has(r)||n.push(new dw(r))}),n}ba(e){this.Ta=e.Ts,this.da=re();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return di.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class GR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class QR{constructor(e){this.key=e,this.va=!1}}class XR{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ii(l=>D1(l),$u),this.Ma=new Map,this.xa=new Set,this.Oa=new be(Y.comparator),this.Na=new Map,this.La=new qf,this.Ba={},this.ka=new Map,this.qa=hi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function JR(t,e,n=!0){const r=_w(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await pw(r,e,n,!0),s}async function ZR(t,e){const n=_w(t);await pw(n,e,!0,!1)}async function pw(t,e,n,r){const s=await yR(t.localStore,En(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await eb(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&ow(t.remoteStore,s),l}async function eb(t,e,n,r,s){t.Ka=(m,g,_)=>async function(k,N,w,E){let S=N.view.ma(w);S.ns&&(S=await S0(k.localStore,N.query,!1).then(({documents:T})=>N.view.ma(T,S)));const O=E&&E.targetChanges.get(N.targetId),L=E&&E.targetMismatches.get(N.targetId)!=null,M=N.view.applyChanges(S,k.isPrimaryClient,O,L);return D0(k,N.targetId,M.wa),M.snapshot}(t,m,g,_);const i=await S0(t.localStore,e,!0),o=new KR(e,i.Ts),l=o.ma(i.documents),u=ma.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),c=o.applyChanges(l,t.isPrimaryClient,u);D0(t,n,c.wa);const p=new GR(e,n,o);return t.Fa.set(e,p),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),c.snapshot}async function tb(t,e,n){const r=Z(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!$u(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await gd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Gf(r.remoteStore,s.targetId),yd(r,s.targetId)}).catch(da)):(yd(r,s.targetId),await gd(r.localStore,s.targetId,!0))}async function nb(t,e){const n=Z(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Gf(n.remoteStore,r.targetId))}async function rb(t,e,n){const r=cb(t);try{const s=await function(o,l){const u=Z(o),c=He.now(),p=l.reduce((_,b)=>_.add(b.key),re());let m,g;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let b=Xn(),k=re();return u.cs.getEntries(_,p).next(N=>{b=N,b.forEach((w,E)=>{E.isValidDocument()||(k=k.add(w))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,b)).next(N=>{m=N;const w=[];for(const E of l){const S=xC(E,m.get(E.key).overlayedDocument);S!=null&&w.push(new ys(E.key,S,k1(S.value.mapValue),$n.exists(!0)))}return u.mutationQueue.addMutationBatch(_,c,w,l)}).next(N=>{g=N;const w=N.applyToLocalDocumentSet(m,k);return u.documentOverlayCache.saveOverlays(_,N.batchId,w)})}).then(()=>({batchId:g.batchId,changes:M1(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let c=o.Ba[o.currentUser.toKey()];c||(c=new be(ue)),c=c.insert(l,u),o.Ba[o.currentUser.toKey()]=c}(r,s.batchId,n),await va(r,s.changes),await Gu(r.remoteStore)}catch(s){const i=ep(s,"Failed to persist write");n.reject(i)}}async function mw(t,e){const n=Z(t);try{const r=await mR(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(pe(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?pe(o.va):s.removedDocuments.size>0&&(pe(o.va),o.va=!1))}),await va(n,r,e)}catch(r){await da(r)}}function P0(t,e,n){const r=Z(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=Z(o);u.onlineState=l;let c=!1;u.queries.forEach((p,m)=>{for(const g of m.j_)g.Z_(l)&&(c=!0)}),c&&tp(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function sb(t,e,n){const r=Z(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new be(Y.comparator);o=o.insert(i,mt.newNoDocument(i,J.min()));const l=re().add(i),u=new qu(J.min(),new Map,new be(ue),o,l);await mw(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),np(r)}else await gd(r.localStore,e,!1).then(()=>yd(r,e,n)).catch(da)}async function ib(t,e){const n=Z(t),r=e.batch.batchId;try{const s=await pR(n.localStore,e);vw(n,r,null),gw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await va(n,s)}catch(s){await da(s)}}async function ob(t,e,n){const r=Z(t);try{const s=await function(o,l){const u=Z(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let p;return u.mutationQueue.lookupMutationBatch(c,l).next(m=>(pe(m!==null),p=m.keys(),u.mutationQueue.removeMutationBatch(c,m))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,p)).next(()=>u.localDocuments.getDocuments(c,p))})}(r.localStore,e);vw(r,e,n),gw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await va(r,s)}catch(s){await da(s)}}function gw(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function vw(t,e,n){const r=Z(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function yd(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||yw(t,r)})}function yw(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(Gf(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),np(t))}function D0(t,e,n){for(const r of n)r instanceof dw?(t.La.addReference(r.key,e),ab(t,r)):r instanceof fw?(H("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||yw(t,r.key)):X()}function ab(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(H("SyncEngine","New document in limbo: "+n),t.xa.add(r),np(t))}function np(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new Y(je.fromString(e)),r=t.qa.next();t.Na.set(r,new QR(n)),t.Oa=t.Oa.insert(n,r),ow(t.remoteStore,new gr(En(Bf(n.path)),r,"TargetPurposeLimboResolution",jf.oe))}}async function va(t,e,n){const r=Z(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(c=>{var p;if((c||n)&&r.isPrimaryClient){const m=c?!c.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))===null||p===void 0?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(c){s.push(c);const m=Kf.Wi(u.targetId,c);i.push(m)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,c){const p=Z(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>V.forEach(c,g=>V.forEach(g.$i,_=>p.persistence.referenceDelegate.addReference(m,g.targetId,_)).next(()=>V.forEach(g.Ui,_=>p.persistence.referenceDelegate.removeReference(m,g.targetId,_)))))}catch(m){if(!fa(m))throw m;H("LocalStore","Failed to update sequence numbers: "+m)}for(const m of c){const g=m.targetId;if(!m.fromCache){const _=p.os.get(g),b=_.snapshotVersion,k=_.withLastLimboFreeSnapshotVersion(b);p.os=p.os.insert(g,k)}}}(r.localStore,i))}async function lb(t,e){const n=Z(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const r=await nw(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new q(F.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await va(n,r.hs)}}function ub(t,e){const n=Z(t),r=n.Na.get(e);if(r&&r.va)return re().add(r.key);{let s=re();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function _w(t){const e=Z(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=mw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=ub.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sb.bind(null,e),e.Ca.d_=HR.bind(null,e.eventManager),e.Ca.$a=qR.bind(null,e.eventManager),e}function cb(t){const e=Z(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=ib.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=ob.bind(null,e),e}class cu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return fR(this.persistence,new hR,e.initialUser,this.serializer)}Ga(e){return new lR(Yf.Zr,this.serializer)}Wa(e){return new wR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}cu.provider={build:()=>new cu};class _d{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>P0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=lb.bind(null,this.syncEngine),await UR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new $R}()}createDatastore(e){const n=Yu(e.databaseInfo.databaseId),r=function(i){return new IR(i)}(e.databaseInfo);return function(i,o,l,u){return new CR(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new bR(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>P0(this.syncEngine,n,0),function(){return C0.D()?new C0:new ER}())}createSyncEngine(e,n){return function(s,i,o,l,u,c,p){const m=new XR(s,i,o,l,u,c);return p&&(m.Qa=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=Z(s);H("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await ga(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}_d.provider={build:()=>new _d};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Qn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ft.UNAUTHENTICATED,this.clientId=T1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new br;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=ep(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Xc(t,e){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await nw(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function O0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await fb(t);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>R0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>R0(e.remoteStore,s)),t._onlineComponents=e}async function fb(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await Xc(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ai("Error using user provided cache. Falling back to memory cache: "+n),await Xc(t,new cu)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await Xc(t,new cu);return t._offlineComponents}async function ww(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await O0(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await O0(t,new _d))),t._onlineComponents}function pb(t){return ww(t).then(e=>e.syncEngine)}async function mb(t){const e=await ww(t),n=e.eventManager;return n.onListen=JR.bind(null,e.syncEngine),n.onUnlisten=tb.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=ZR.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=nb.bind(null,e.syncEngine),n}function gb(t,e,n={}){const r=new br;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,c){const p=new hb({next:g=>{p.Za(),o.enqueueAndForget(()=>WR(i,m));const _=g.docs.has(l);!_&&g.fromCache?c.reject(new q(F.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&u&&u.source==="server"?c.reject(new q(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(g)},error:g=>c.reject(g)}),m=new YR(Bf(l.path),p,{includeMetadataChanges:!0,_a:!0});return zR(i,m)}(await mb(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ew(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vb(t,e,n){if(!n)throw new q(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function yb(t,e,n,r){if(e===!0&&r===!0)throw new q(F.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function M0(t){if(!Y.isDocumentKey(t))throw new q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function rp(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":X()}function Go(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=rp(t);throw new q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}yb("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Ew((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class sp{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new L0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new L0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Ak;switch(r.type){case"firstParty":return new Ok(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=j0.get(n);r&&(H("ComponentProvider","Removing Datastore"),j0.delete(n),r.terminate())}(this),Promise.resolve()}}function _b(t,e,n,r={}){var s;const i=(t=Go(t,sp))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ai("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=ft.MOCK_USER;else{l=A_(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ft(c)}t._authCredentials=new Nk(new x1(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ip(this.firestore,e,this._query)}}class Kt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Qo(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Kt(this.firestore,e,this._key)}}class Qo extends ip{constructor(e,n,r){super(e,n,Bf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Kt(this.firestore,null,new Y(e))}withConverter(e){return new Qo(this.firestore,e,this._path)}}function fi(t,e,...n){if(t=xt(t),arguments.length===1&&(e=T1.newId()),vb("doc","path",e),t instanceof sp){const r=je.fromString(e,...n);return M0(r),new Kt(t,null,new Y(r))}{if(!(t instanceof Kt||t instanceof Qo))throw new q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(je.fromString(e,...n));return M0(r),new Kt(t.firestore,t instanceof Qo?t.converter:null,new Y(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new sw(this,"async_queue_retry"),this.Vu=()=>{const r=Qc();r&&H("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=Qc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=Qc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new br;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!fa(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Qn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Zf.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&X()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class op extends sp{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new V0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new V0(e),this._firestoreClient=void 0,await e}}}function wb(t,e){const n=typeof t=="object"?t:Mu(),r=typeof t=="string"?t:"(default)",s=la(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=wf("firestore");i&&_b(s,...i)}return s}function xw(t){if(t._terminated)throw new q(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||Eb(t),t._firestoreClient}function Eb(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,c,p){return new Yk(l,u,c,p.host,p.ssl,p.experimentalForceLongPolling,p.experimentalAutoDetectLongPolling,Ew(p.experimentalLongPollingOptions),p.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new db(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pi(it.fromBase64String(e))}catch(n){throw new q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new pi(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new tt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ue(this._lat,e._lat)||ue(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xb=/^__.*__$/;class Tb{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ys(e,this.data,this.fieldMask,n,this.fieldTransforms):new pa(e,this.data,n,this.fieldTransforms)}}function Iw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw X()}}class cp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new cp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return hu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(Iw(this.Cu)&&xb.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class Ib{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Yu(e)}Qu(e,n,r,s=!1){return new cp({Cu:e,methodName:n,qu:r,path:tt.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Sb(t){const e=t._freezeSettings(),n=Yu(t._databaseId);return new Ib(t._databaseId,!!e.ignoreUndefinedProperties,n)}function kb(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Rw("Data must be an object, but it was:",o,r);const l=kw(r,o);let u,c;if(i.merge)u=new an(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const p=[];for(const m of i.mergeFields){const g=Cb(e,m,n);if(!o.contains(g))throw new q(F.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);bb(p,g)||p.push(g)}u=new an(p),c=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,c=o.fieldTransforms;return new Tb(new Wt(l),u,c)}function Sw(t,e){if(Cw(t=xt(t)))return Rw("Unsupported field value:",e,t),kw(t,e);if(t instanceof Tw)return function(r,s){if(!Iw(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=Sw(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=xt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return gC(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=He.fromDate(r);return{timestampValue:lu(s.serializer,i)}}if(r instanceof He){const i=new He(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:lu(s.serializer,i)}}if(r instanceof lp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof pi)return{bytesValue:G1(s.serializer,r._byteString)};if(r instanceof Kt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Hf(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof up)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return $f(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${rp(r)}`)}(t,e)}function kw(t,e){const n={};return I1(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ti(t,(r,s)=>{const i=Sw(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Cw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof He||t instanceof lp||t instanceof pi||t instanceof Kt||t instanceof Tw||t instanceof up)}function Rw(t,e,n){if(!Cw(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=rp(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Cb(t,e,n){if((e=xt(e))instanceof ap)return e._internalPath;if(typeof e=="string")return bw(t,e);throw hu("Field path arguments must be of type string or ",t,!1,void 0,n)}const Rb=new RegExp("[~\\*/\\[\\]]");function bw(t,e,n){if(e.search(Rb)>=0)throw hu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ap(...e.split("."))._internalPath}catch{throw hu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function hu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new q(F.INVALID_ARGUMENT,l+t+u)}function bb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Ab(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Nw("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Ab extends Aw{data(){return super.data()}}function Nw(t,e){return typeof e=="string"?bw(t,e):e instanceof ap?e._internalPath:e._delegate._internalPath}class Nb{convertValue(e,n="none"){switch(ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Me(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(hs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw X()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ti(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Me(o.doubleValue));return new up(i)}convertGeoPoint(e){return new lp(Me(e.latitude),Me(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Lf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Wo(e));default:return null}}convertTimestamp(e){const n=Or(e);return new He(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=je.fromString(e);pe(tw(r));const s=new Ho(r.get(1),r.get(3)),i=new Y(r.popFirst(5));return s.isEqual(n)||Qn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pb(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Pw extends Aw{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ob(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Nw("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ob extends Pw{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hp(t){t=Go(t,Kt);const e=Go(t.firestore,op);return gb(xw(e),t._key).then(n=>Lb(e,t,n))}class jb extends Nb{constructor(e){super(),this.firestore=e}convertBytes(e){return new pi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Kt(this.firestore,null,n)}}function dp(t,e,n){t=Go(t,Kt);const r=Go(t.firestore,op),s=Pb(t.converter,e,n);return Mb(r,[kb(Sb(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,$n.none())])}function Mb(t,e){return function(r,s){const i=new br;return r.asyncQueue.enqueueAndForget(async()=>rb(await pb(r),s,i)),i.promise}(xw(t),e)}function Lb(t,e,n){const r=n.docs.get(e._key),s=new jb(t);return new Pw(t,s,e._key,r,new Db(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(s){xi=s})(vs),Pr(new Yn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new op(new Pk(r.getProvider("auth-internal")),new Mk(r.getProvider("app-check-internal")),function(c,p){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ho(c.options.projectId,p)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Yt(s0,"4.7.3",e),Yt(s0,"4.7.3","esm2017")})();var Vb="firebase",Fb="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Yt(Vb,Fb,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="firebasestorage.googleapis.com",Ub="storageBucket",Bb=2*60*1e3,$b=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn extends Cn{constructor(e,n,r=0){super(Jc(e),`Firebase Storage: ${n} (${Jc(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Rn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Jc(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var kn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(kn||(kn={}));function Jc(t){return"storage/"+t}function zb(){const t="An unknown error occurred, please check the error payload for server response.";return new Rn(kn.UNKNOWN,t)}function Wb(){return new Rn(kn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Hb(){return new Rn(kn.CANCELED,"User canceled the upload/download.")}function qb(t){return new Rn(kn.INVALID_URL,"Invalid URL '"+t+"'.")}function Yb(t){return new Rn(kn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function F0(t){return new Rn(kn.INVALID_ARGUMENT,t)}function Ow(){return new Rn(kn.APP_DELETED,"The Firebase app was deleted.")}function Kb(t){return new Rn(kn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ln.makeFromUrl(e,n)}catch{return new ln(e,"")}if(r.path==="")return r;throw Yb(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function c(O){O.path_=decodeURIComponent(O.path)}const p="v[A-Za-z0-9_]+",m=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",_=new RegExp(`^https?://${m}/${p}/b/${s}/o${g}`,"i"),b={bucket:1,path:3},k=n===Dw?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",w=new RegExp(`^https?://${k}/${s}/${N}`,"i"),S=[{regex:l,indices:u,postModify:i},{regex:_,indices:b,postModify:c},{regex:w,indices:{bucket:1,path:2},postModify:c}];for(let O=0;O<S.length;O++){const L=S[O],M=L.regex.exec(e);if(M){const T=M[L.indices.bucket];let y=M[L.indices.path];y||(y=""),r=new ln(T,y),L.postModify(r);break}}if(r==null)throw qb(e);return r}}class Gb{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function u(){return l===2}let c=!1;function p(...N){c||(c=!0,e.apply(null,N))}function m(N){s=setTimeout(()=>{s=null,t(_,u())},N)}function g(){i&&clearTimeout(i)}function _(N,...w){if(c){g();return}if(N){g(),p.call(null,N,...w);return}if(u()||o){g(),p.call(null,N,...w);return}r<64&&(r*=2);let S;l===1?(l=2,S=0):S=(r+Math.random())*1e3,m(S)}let b=!1;function k(N){b||(b=!0,g(),!c&&(s!==null?(N||(l=2),clearTimeout(s),m(0)):N||(l=1)))}return m(0),i=setTimeout(()=>{o=!0,k(!0)},n),k}function Xb(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jb(t){return t!==void 0}function U0(t,e,n,r){if(r<e)throw F0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw F0(`Invalid value for '${t}'. Expected ${n} or less.`)}function Zb(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var du;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(du||(du={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(e,n,r,s,i,o,l,u,c,p,m,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=p,this.connectionFactory_=m,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,b)=>{this.resolve_=_,this.reject_=b,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new rl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const u=l.loaded,c=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===du.NO_ERROR,u=i.getStatus();if(!l||eA(u,this.additionalRetryCodes_)&&this.retry){const p=i.getErrorCode()===du.ABORT;r(!1,new rl(!1,null,p));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new rl(c,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());Jb(u)?i(u):i()}catch(u){o(u)}else if(l!==null){const u=zb();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?Ow():Hb();o(u)}else{const u=Wb();o(u)}};this.canceled_?n(!1,new rl(!1,null,!0)):this.backoffId_=Qb(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Xb(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class rl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function nA(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function rA(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function sA(t,e){e&&(t["X-Firebase-GMPID"]=e)}function iA(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function oA(t,e,n,r,s,i,o=!0){const l=Zb(t.urlParams),u=t.url+l,c=Object.assign({},t.headers);return sA(c,e),nA(c,n),rA(c,i),iA(c,r),new tA(u,t.method,c,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function lA(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,n){this._service=e,n instanceof ln?this._location=n:this._location=ln.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new fu(e,n)}get root(){const e=new ln(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lA(this._location.path)}get storage(){return this._service}get parent(){const e=aA(this._location.path);if(e===null)return null;const n=new ln(this._location.bucket,e);return new fu(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw Kb(e)}}function B0(t,e){const n=e==null?void 0:e[Ub];return n==null?null:ln.makeFromBucketSpec(n,t)}function uA(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:A_(s,t.app.options.projectId))}class cA{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=Dw,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Bb,this._maxUploadRetryTime=$b,this._requests=new Set,s!=null?this._bucket=ln.makeFromBucketSpec(s,this._host):this._bucket=B0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ln.makeFromBucketSpec(this._url,e):this._bucket=B0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){U0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){U0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new fu(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new Gb(Ow());{const o=oA(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const $0="@firebase/storage",z0="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jw="storage";function hA(t=Mu(),e){t=xt(t);const r=la(t,jw).getImmediate({identifier:e}),s=wf("storage");return s&&dA(r,...s),r}function dA(t,e,n,r={}){uA(t,e,n,r)}function fA(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new cA(n,r,s,e,vs)}function pA(){Pr(new Yn(jw,fA,"PUBLIC").setMultipleInstances(!0)),Yt($0,z0,""),Yt($0,z0,"esm2017")}pA();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(e,n,r){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=e.getImmediate({optional:!0}),this.messaging=n.getImmediate({optional:!0}),this.auth||e.get().then(s=>this.auth=s,()=>{}),this.messaging||n.get().then(s=>this.messaging=s,()=>{}),this.appCheck||r.get().then(s=>this.appCheck=s,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.appCheck){const n=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return n.error?null:n.token}return null}async getContext(e){const n=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:n,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wd="us-central1";class gA{constructor(e,n,r,s,i=wd,o){this.app=e,this.fetchImpl=o,this.emulatorOrigin=null,this.contextProvider=new mA(n,r,s),this.cancelAllRequests=new Promise(l=>{this.deleteService=()=>Promise.resolve(l())});try{const l=new URL(i);this.customDomain=l.origin+(l.pathname==="/"?"":l.pathname),this.region=wd}catch{this.customDomain=null,this.region=i}}_delete(){return this.deleteService()}_url(e){const n=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${n}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${n}.cloudfunctions.net/${e}`}}function vA(t,e,n){t.emulatorOrigin=`http://${e}:${n}`}const W0="@firebase/functions",H0="0.11.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yA="auth-internal",_A="app-check-internal",wA="messaging-internal";function EA(t,e){const n=(r,{instanceIdentifier:s})=>{const i=r.getProvider("app").getImmediate(),o=r.getProvider(yA),l=r.getProvider(wA),u=r.getProvider(_A);return new gA(i,o,l,u,s,t)};Pr(new Yn(Mw,n,"PUBLIC").setMultipleInstances(!0)),Yt(W0,H0,e),Yt(W0,H0,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(t=Mu(),e=wd){const r=la(xt(t),Mw).getImmediate({identifier:e}),s=wf("functions");return s&&TA(r,...s),r}function TA(t,e,n){vA(xt(t),e,n)}EA(fetch.bind(self));const IA={apiKey:"AIzaSyAe4FRLA-9Dn20eB90qbDPIx7cMtBirpKs",authDomain:"mestory-46f40.firebaseapp.com",projectId:"mestory-46f40",storageBucket:"mestory-46f40.firebasestorage.app",messagingSenderId:"634298359695",appId:"1:634298359695:web:cfe81a24ea2caf385535fa"},Qu=D_(IA),Js=Rk(Qu),mi=wb(Qu);hA(Qu);xA(Qu);const fp=()=>{const t=navigator.userAgent.toLowerCase();return["kakao","naver","whale","instagram","facebook","twitter","line","wechat","micromessenger","webview","fb_iab","fbios","fban","trill","bytedance"].some(n=>t.includes(n))},SA=()=>{const t=navigator.userAgent.toLowerCase();return["mobile","android","iphone","ipad","ipod","blackberry","windows phone"].some(n=>t.includes(n))},kA=()=>{const t=navigator.userAgent.toLowerCase();return{isInApp:fp(),isMobile:SA(),userAgent:navigator.userAgent,isChrome:t.includes("chrome")&&!t.includes("edge"),isSafari:t.includes("safari")&&!t.includes("chrome"),isFirefox:t.includes("firefox"),isEdge:t.includes("edge")}},CA=()=>{const t=kA();return t.isInApp?t.isMobile?'앱 내 브라우저에서는 로그인이 제한됩니다. "Safari에서 열기" 또는 "Chrome에서 열기"를 선택해 주세요.':"현재 브라우저에서는 로그인이 제한됩니다. Chrome, Safari, Firefox 등의 기본 브라우저를 사용해 주세요.":""},Zc=new jn,RA=async()=>{try{const t=await W5(Js);if(t!=null&&t.user){if(!(await hp(fi(mi,"users",t.user.uid))).exists()){const n={uid:t.user.uid,email:t.user.email,displayName:t.user.displayName||"익명",photoURL:t.user.photoURL||void 0,createdAt:new Date,updatedAt:new Date,settings:{theme:"light",notifications:!0}};await dp(fi(mi,"users",t.user.uid),n)}return t.user}return null}catch(t){throw console.error("리다이렉트 결과 처리 오류:",t),t}},Lw=async()=>{var t;try{if(fp())return console.log("인앱 브라우저 감지 - 리다이렉트 방식 사용"),await Gg(Js,Zc),null;{const{user:e}=await L5(Js,Zc);if(!(await hp(fi(mi,"users",e.uid))).exists()){const r={uid:e.uid,email:e.email,displayName:e.displayName||"익명",photoURL:e.photoURL||void 0,createdAt:new Date,updatedAt:new Date,settings:{theme:"light",notifications:!0}};await dp(fi(mi,"users",e.uid),r)}return e}}catch(e){if(console.error("Google 로그인 오류:",e),e.code==="auth/popup-blocked"||e.code==="auth/popup-closed-by-user"||(t=e.message)!=null&&t.includes("disallowed_useragent"))return console.log("팝업 차단 또는 User-Agent 문제 감지 - 리다이렉트 방식으로 재시도"),await Gg(Js,Zc),null;throw e}},Vw=async()=>{try{await v5(Js)}catch(t){throw console.error("로그아웃 오류:",t),t}},bA=async t=>{try{const e=await hp(fi(mi,"users",t));return e.exists()?e.data():null}catch(e){throw console.error("프로필 가져오기 오류:",e),e}},AA=async(t,e)=>{try{const n=fi(mi,"users",t);await dp(n,{...e,updatedAt:new Date},{merge:!0})}catch(n){throw console.error("프로필 업데이트 오류:",n),n}},NA=t=>g5(Js,t),Fw=x.createContext(void 0),ws=()=>{const t=x.useContext(Fw);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},PA=({children:t})=>{const[e,n]=x.useState(null),[r,s]=x.useState(!0),[i,o]=x.useState(!1);x.useEffect(()=>{(async()=>{try{const m=await RA();m&&console.log("리다이렉트 로그인 성공:",m.displayName)}catch(m){console.error("리다이렉트 처리 오류:",m)}})();const p=NA(m=>{n(m),s(!1),m&&o(!1)});return()=>p()},[]);const u={user:e,loading:r,isAuthenticated:!!e,isDemoMode:i,setDemoMode:c=>{o(c)}};return h.jsx(Fw.Provider,{value:u,children:t})},ki=[{id:"1",date:"2025-05-25",title:"2D 타임라인 다중 연도 뷰 완성",content:`오늘은 ME.STORY의 2D 타임라인에서 중요한 개선을 이뤘다!

사용자가 지적한 문제를 해결했다:
- 연도 범위를 2020-2035년으로 확장
- 다중 연도가 한눈에 보이도록 레이아웃 개선
- 데이터 소스 일관성 문제 해결

이제 Timeline2D와 DiaryPage가 모두 동일한 mockData를 참조한다. 버그 수정과 동시에 사용자 경험도 크게 개선되었다.

정말 뿌듯한 하루! 🎉`,photos:["https://images.unsplash.com/photo-1461749280684-dccba630e2f6?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1555949963-aa79dcee981c?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=500&h=300&fit=crop"],mood:"great",weather:"맑음",tags:["개발","ME.STORY","버그수정","UX개선"],wordCount:150,createdAt:"2025-05-25T19:30:00Z",updatedAt:"2025-05-25T19:30:00Z"},{id:"2",date:"2025-05-24",title:"ME.STORY 프로토타입 완성",content:`오늘은 ME.STORY 프로젝트의 프로토타입을 완성한 날이다!

2D 타임라인이 정말 멋지게 구현되었고, 수평(월일) × 수직(연도) 방식으로 원하던 대로 만들어졌다.

주요 완성된 기능들:
- 2D 타임라인 네비게이션
- 일기 작성 및 편집
- 사진 업로드 인터페이스
- 깔끔한 UI/UX

앞으로 Firebase 연동과 실제 데이터 저장 기능을 추가하면 완전한 100년 일기 앱이 될 것 같다. 정말 뿌듯한 하루였다! 🎉`,photos:["https://images.unsplash.com/photo-1517180102446-f3ece451e9d8?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1498050108023-c5249f4df085?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1555949963-f1fba6fdd5ff?w=500&h=300&fit=crop"],mood:"great",weather:"맑음",tags:["개발","프로젝트","성과"],wordCount:240,createdAt:"2025-05-24T21:30:00Z",updatedAt:"2025-05-24T21:30:00Z"},{id:"3",date:"2025-05-23",title:"카페에서의 집중 코딩",content:`오늘은 홍대 근처 조용한 카페에서 하루 종일 코딩을 했다.

Timeline2D 컴포넌트를 구현하는데 생각보다 복잡했다. 특히 년도별 데이터를 수평으로 배치하면서 성능을 최적화하는 부분이 까다로웠다.

하지만 결국 해냈다! 마우스 드래그, 줌, 그리고 범례까지 모든 기능이 원활하게 작동한다.

카페 아메리카노 3잔과 크로와상 하나로 버틴 하루. 집중력이 정말 좋았다.

내일은 일기 작성 기능을 완성해야겠다.`,photos:["https://images.unsplash.com/photo-1554118811-1e0d58224f24?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1521017432531-fbd92d768814?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1559496417-e7f25cb247cd?w=500&h=300&fit=crop"],mood:"good",weather:"흐림",tags:["개발","카페","집중"],wordCount:198,createdAt:"2025-05-23T22:15:00Z",updatedAt:"2025-05-23T22:15:00Z"},{id:"4",date:"2025-05-22",title:"프로젝트 기획 회의",content:`ME.STORY 프로젝트의 전체적인 방향을 정하는 중요한 하루였다.

아침에 PRD를 작성하면서 프로젝트의 핵심 가치를 다시 한번 명확히 했다:
1. 개인의 삶을 완전히 기록
2. 시대적 맥락과 함께 보기
3. 100년 아카이브의 가능성

특히 "편년체"와 "기전체" 뷰 모드 아이디어가 정말 마음에 든다. 시간순으로 보다가 토픽별로도 볼 수 있다는 게 혁신적이다.

기술 스택도 Vite + React + Firebase로 확정. 빠른 프로토타이핑에 최적인 조합이다.`,photos:["https://images.unsplash.com/photo-1552664730-d307ca884978?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1559136555-9303baea8ebd?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=500&h=300&fit=crop"],mood:"good",weather:"맑음",tags:["기획","회의","아이디어"],wordCount:187,createdAt:"2025-05-22T19:45:00Z",updatedAt:"2025-05-22T19:45:00Z"},{id:"5",date:"2025-05-21",title:"영감을 얻은 하루",content:`오늘 GitHub에서 정말 흥미로운 프로젝트들을 발견했다.

특히 시간 시각화 관련 프로젝트들을 보면서 ME.STORY의 2D 타임라인 아이디어가 떠올랐다. 기존의 달력 UI는 너무 제한적이다. 

수평으로는 월/일을, 수직으로는 연도를 배치하면 어떨까? 그러면 같은 날짜의 여러 해를 한눈에 비교할 수 있을 것이다.

예를 들어, 내 생일인 3월 15일의 2020년, 2021년, 2022년을 세로로 쭉 볼 수 있다면? 정말 흥미로울 것 같다.

이 아이디어를 바탕으로 내일부터 본격적인 개발에 들어가야겠다.`,photos:["https://images.unsplash.com/photo-1618477388954-7852f32655ec?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1556075798-4825dfaaf498?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1607799279861-4dd421887fb3?w=500&h=300&fit=crop"],mood:"great",weather:"맑음",tags:["영감","아이디어","개발"],wordCount:203,createdAt:"2025-05-21T23:20:00Z",updatedAt:"2025-05-21T23:20:00Z"},{id:"11",date:"2025-05-18",title:"일요일 산책과 독서",content:`일요일 오후, 한강공원을 따라 산책했다. 날씨가 정말 좋아서 많은 사람들이 나와 있었다.

산책하면서 ME.STORY 프로젝트의 미래에 대해 생각해봤다. 단순히 일기 앱이 아니라, 사람들이 자신의 삶을 더 의미 있게 기록하고 돌아볼 수 있는 도구가 되었으면 좋겠다.

집에 돌아와서 "사용자 경험 디자인" 책을 읽었다. 특히 "감정적 디자인"에 대한 부분이 인상 깊었다. ME.STORY도 사용자의 감정과 추억을 잘 담아낼 수 있는 인터페이스를 만들어야겠다.

저녁에는 가족들과 함께 영화를 봤다. 평범하지만 소중한 일요일이었다.

내일부터 또 한 주가 시작된다. 화이팅!`,photos:["https://images.unsplash.com/photo-1544911845-1f34cdc447cd?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=500&h=300&fit=crop"],mood:"good",weather:"맑음",tags:["산책","한강","독서","UX","가족"],wordCount:210,createdAt:"2025-05-18T20:15:00Z",updatedAt:"2025-05-18T20:15:00Z"},{id:"12",date:"2025-05-17",title:"주말 휴식과 계획",content:`오늘은 주말이라 좀 더 여유롭게 시간을 보냈다.

아침에 늦잠을 자고, 브런치를 천천히 먹으면서 ME.STORY 프로젝트의 다음 단계를 구상했다.

다음 주에 집중할 것들:
1. Firebase 연동 완료
2. 실제 일기 데이터 저장/불러오기
3. 사진 업로드 기능 구현
4. 사용자 인증 시스템

오후에는 서점에 가서 UX 디자인 관련 책을 좀 봤다. 사용자 중심의 인터페이스 설계에 대한 인사이트를 얻을 수 있었다.

저녁에는 친구들과 맥주 한 잔 하면서 프로젝트 아이디어를 공유했는데, 반응이 좋았다.`,photos:["https://images.unsplash.com/photo-1551218808-94e220e084d2?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1481627834876-b7833e8f5570?w=500&h=300&fit=crop"],mood:"good",weather:"흐림",tags:["주말","휴식","계획","친구"],wordCount:178,createdAt:"2025-05-17T20:30:00Z",updatedAt:"2025-05-17T20:30:00Z"},{id:"17",date:"2025-05-16",title:"버그 수정의 하루",content:`오늘은 하루 종일 Timeline2D 컴포넌트의 버그를 잡는데 매달렸다.

주요 해결한 문제들:
- 초기 로드 시 중앙 정렬 문제
- "오늘" 버튼 클릭 시 이동 오류
- useCallback 순환 의존성 문제

특히 transform과 scrollIntoView가 충돌하는 문제가 까다로웠는데, 수학적 계산 기반으로 완전히 새로 구현해서 해결했다.

디버깅 과정에서 콘솔 로그를 상세하게 남겨두니 문제 파악이 훨씬 쉬워졌다. 좋은 습관인 것 같다.

저녁에는 코드 리팩토링도 조금 해서 가독성을 높였다. 내일은 더 안정적인 버전이 될 것 같다.`,photos:["https://images.unsplash.com/photo-1517077304055-6e89abbf09b0?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1555949963-aa79dcee981c?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1515879218367-8466d910aaa4?w=500&h=300&fit=crop"],mood:"good",weather:"맑음",tags:["개발","버그수정","디버깅","리팩토링"],wordCount:192,createdAt:"2025-05-16T21:45:00Z",updatedAt:"2025-05-16T21:45:00Z"},{id:"13",date:"2025-05-13",title:"화요일 개발 집중",content:`화요일이라 그런지 집중이 잘 된다. 월요일에 세운 계획대로 하나씩 진행해나가고 있다.

오늘 진행한 작업:
1. Timeline2D 컴포넌트 마무리 터치
2. Firebase 프로젝트 설정 시작
3. 사용자 인증 시스템 설계

특히 Firebase Authentication 부분을 집중적으로 공부했다. 이메일/비밀번호 로그인은 기본이고, 구글 소셜 로그인도 추가하면 사용자 경험이 좋을 것 같다.

오후에는 팀 미팅이 있어서 ME.STORY 프로젝트 진행상황을 공유했다. 모든 팀원들이 긍정적인 반응을 보여줘서 뿌듯했다.

내일부터는 본격적인 백엔드 작업에 들어갈 예정이다.`,photos:["https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1584697964358-3e14ca57658b?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1552664730-d307ca884978?w=500&h=300&fit=crop"],mood:"good",weather:"맑음",tags:["개발","계획","Firebase","팀미팅"],wordCount:195,createdAt:"2025-05-13T18:45:00Z",updatedAt:"2025-05-13T18:45:00Z"},{id:"15",date:"2025-05-12",title:"새로운 기능 구상",content:`오늘은 ME.STORY에 추가할 새로운 기능들을 구상하는 시간을 가졌다.

흥미로운 아이디어들:
1. 날씨/뉴스 API 연동으로 시대적 맥락 제공
2. SNS 데이터 수집해서 일기와 연결
3. 사진의 메타데이터 분석으로 위치/시간 자동 태그
4. AI 기반 일기 요약 및 감정 분석

특히 "기전체 뷰" 아이디어가 흥미롭다. 토픽별로 일기를 분류해서 보여주는 것인데, 예를 들어 "여행", "개발", "인간관계" 같은 테마로 묶어서 볼 수 있다면 정말 유용할 것 같다.

사용자가 자신의 삶의 패턴을 더 잘 이해할 수 있을 것이다.`,photos:["https://images.unsplash.com/photo-1553484771-371a605b060b?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1559136555-9303baea8ebd?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1552581234-26160f608093?w=500&h=300&fit=crop"],mood:"great",weather:"맑음",tags:["기획","아이디어","기능설계","AI"],wordCount:195,createdAt:"2025-05-12T18:20:00Z",updatedAt:"2025-05-12T18:20:00Z"},{id:"16",date:"2025-05-11",title:"코딩 마라톤",content:`오늘은 정말 집중해서 코딩했다. 아침 9시부터 밤 11시까지 거의 쉬지 않고 Timeline2D 컴포넌트를 구현했다.

가장 까다로웠던 부분:
- 366일 전체를 렌더링하면서 성능 유지하기
- 줌/드래그 기능과 날짜 선택 기능 조화
- 년도별 레이아웃 계산 로직

React의 useCallback과 useMemo를 적극 활용해서 불필요한 리렌더링을 방지했다. 특히 년도 배열 생성 로직을 메모이제이션해서 성능이 크게 개선되었다.

저녁에는 피자를 시켜먹으면서 코딩을 계속했는데, 이런 몰입감이 개발의 매력인 것 같다.

내일은 버그 테스트와 사용성 개선에 집중해야겠다.`,photos:["https://images.unsplash.com/photo-1517180102446-f3ece451e9d8?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1513475382585-d06e58bcb0e0?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=500&h=300&fit=crop"],mood:"good",weather:"비",tags:["개발","몰입","성능최적화","코딩마라톤"],wordCount:208,createdAt:"2025-05-11T23:30:00Z",updatedAt:"2025-05-11T23:30:00Z"},{id:"6",date:"2025-04-15",title:"벚꽃 구경",content:`오늘은 여의도 한강공원에 벚꽃 구경을 갔다.

코로나 이후 오랜만에 이렇게 많은 사람들과 함께 야외 활동을 했다. 벚꽃이 정말 예뻤고, 사진도 많이 찍었다.

친구들과 함께 돗자리 깔고 치킨과 맥주를 먹으면서 이런저런 이야기를 나눴다. 일상의 소중함을 다시 한번 느꼈다.

이런 순간들을 기록으로 남기고 싶다는 생각이 들었다. 나중에 몇 년 후에 이 날을 돌아보면 어떨까?

ME.STORY 아이디어의 출발점이 된 소중한 하루였다.`,photos:["https://images.unsplash.com/photo-1522383225653-ed111181a951?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1587573089615-0da723936ed3?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1517639493569-5666b8b1f1c3?w=500&h=300&fit=crop"],mood:"great",weather:"맑음",tags:["벚꽃","친구","한강","봄"],wordCount:178,createdAt:"2025-04-15T20:30:00Z",updatedAt:"2025-04-15T20:30:00Z"},{id:"14",date:"2025-03-15",title:"생일 맞이",content:`오늘은 내 생일이다. 32살이 되었다.

아침에 가족들과 함께 브런치를 먹고, 오후에는 친구들과 영화를 봤다. 저녁에는 연인과 함께 근사한 레스토랑에서 디너를 했다.

생일을 맞아 지난 한 해를 돌아보니 정말 많은 일들이 있었다. 새로운 회사로 이직하고, 여러 프로젝트를 성공적으로 완료했다.

32살의 목표는 더 의미 있는 프로젝트를 만드는 것이다. 사람들의 삶에 실질적인 도움이 되는 것들을 만들고 싶다.

올해도 건강하고 행복하게 보내자!`,photos:["https://images.unsplash.com/photo-1464349153735-7db50ed83c84?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1558636508-e0db3814bd1d?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1551218808-94e220e084d2?w=500&h=300&fit=crop"],mood:"great",weather:"맑음",tags:["생일","가족","친구","회고"],wordCount:176,createdAt:"2025-03-15T23:45:00Z",updatedAt:"2025-03-15T23:45:00Z"},{id:"7",date:"2025-01-01",title:"새해 첫날",content:`2025년이 시작되었다!

작년을 돌아보니 개인적으로나 전문적으로나 많은 성장이 있었던 해였다. 새로운 기술들을 배웠고, 좋은 사람들을 만났다.

올해의 목표:
1. 개인 프로젝트 3개 이상 완성하기
2. 새로운 기술 스택 마스터하기 (Firebase, Three.js)
3. 건강 관리 - 주 3회 이상 운동하기
4. 독서 월 2권 이상
5. 여행 2회 이상

특히 올해는 "ME.STORY" 같은 개인적인 프로젝트에 더 집중하고 싶다. 기술을 활용해서 사람들의 일상을 더 풍부하게 만드는 도구를 만들어보자.

새해 복 많이 받으세요! 🎉`,photos:["https://images.unsplash.com/photo-1546195643-70986d8b4d04?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1577653726617-33edddf63ae9?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1609171880736-3a4b22b8ce84?w=500&h=300&fit=crop"],mood:"great",weather:"추움",tags:["새해","목표","다짐"],wordCount:189,createdAt:"2025-01-01T23:59:00Z",updatedAt:"2025-01-01T23:59:00Z"},{id:"8",date:"2024-12-25",title:"크리스마스",content:`메리 크리스마스! 🎄

오늘은 가족들과 함께 조용한 크리스마스를 보냈다. 아침에 선물 교환을 하고, 어머니가 해주신 특제 크리스마스 브런치를 먹었다.

오후에는 친구들과 카페에서 만나 올 한 해를 정리하는 시간을 가졌다. 다들 각자의 자리에서 열심히 살아가고 있다는 것이 대견하고 고마웠다.

저녁에는 혼자만의 시간을 가지며 책을 읽었다. "디지털 미니멀리즘"이라는 책인데, 기술과 인간의 관계에 대해 생각해볼 수 있는 좋은 내용이었다.

평화롭고 따뜻한 크리스마스였다.`,photos:["https://images.unsplash.com/photo-1512389142860-9c449e58a543?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1544946503-7ad5ac882d5d?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1576919228236-a097c32a5cd4?w=500&h=300&fit=crop"],mood:"good",weather:"눈",tags:["크리스마스","가족","친구","독서"],wordCount:167,createdAt:"2024-12-25T22:00:00Z",updatedAt:"2024-12-25T22:00:00Z"},{id:"9",date:"2024-11-15",title:"단풍구경 여행",content:`경주로 단풍구경 여행을 다녀왔다.

불국사와 석굴암을 둘러보며 가을의 정취를 만끽했다. 특히 불국사의 단풍이 정말 아름다웠다. 빨강, 노랑, 주황색이 조화롭게 어우러진 모습이 마치 자연이 그린 그림 같았다.

첨성대 주변에서 야경도 보고, 황리단길에서 맛있는 음식도 먹었다. 경주 빵과 찰보리빵이 특히 인상적이었다.

2박 3일의 짧은 여행이었지만 정말 알찬 시간이었다. 일상에서 벗어나 자연과 역사를 느낄 수 있어서 좋았다.

다음에는 봄에 벚꽃 필 때 다시 와봐야겠다.`,photos:["https://images.unsplash.com/photo-1570979342785-ddd65daf17d4?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1572635196237-14b3f281503f?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1603794067602-9feaa4ba150e?w=500&h=300&fit=crop"],mood:"great",weather:"맑음",tags:["여행","경주","단풍","힐링"],wordCount:185,createdAt:"2024-11-15T21:30:00Z",updatedAt:"2024-11-15T21:30:00Z"},{id:"10",date:"2024-10-31",title:"할로윈 코스튬 파티",content:`오늘은 친구들과 할로윈 파티를 했다!

나는 해리포터 코스튬을 입고 갔는데, 생각보다 반응이 좋았다. 친구들도 각자 창의적인 코스튬을 준비해와서 정말 재미있었다.

가장 인상적이었던 건 민수가 준비한 좀비 메이크업이었다. 진짜 무서워서 처음에 깜짝 놀랐다. ㅋㅋ

홍대 클럽가에서 할로윈 분위기를 만끽하고, 새벽까지 춤을 추며 놀았다. 오랜만에 이렇게 신나게 논 것 같다.

어른이 되어서도 이런 이벤트를 즐길 수 있다는 게 참 좋다. 내 나이에도 동심을 잃지 않고 살아가고 싶다.`,photos:["https://images.unsplash.com/photo-1509557965043-6e4954b14e04?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1571945153237-4929e783af4a?w=500&h=300&fit=crop","https://images.unsplash.com/photo-1601584115197-04ecc0da31d7?w=500&h=300&fit=crop"],mood:"great",weather:"맑음",tags:["할로윈","파티","친구","코스튬"],wordCount:179,createdAt:"2024-10-31T23:45:00Z",updatedAt:"2024-10-31T23:45:00Z"}],Uw=[{date:"2025-05-24",weather:{temperature:22,condition:"맑음",humidity:45},news:["IT 업계 새로운 AI 도구 출시","한국 경제 성장률 전망 발표","서울시 친환경 교통정책 시행"],events:["ME.STORY 프로토타입 완성"]},{date:"2025-05-23",weather:{temperature:19,condition:"흐림",humidity:65},news:["글로벌 기업 원격근무 정책 변화","새로운 카페 프랜차이즈 급성장","개발자 채용 시장 동향"],events:["홍대 카페 코딩 세션"]},{date:"2025-04-15",weather:{temperature:18,condition:"맑음",humidity:40},news:["전국 벚꽃 개화 현황","봄 나들이 관련 교통 정보","한강공원 이용객 증가"],events:["여의도 벚꽃축제 개최"]},{date:"2025-03-15",weather:{temperature:15,condition:"맑음",humidity:35},news:["3월 취업 시장 동향","봄 시즌 레스토랑 예약 증가","생일 선물 트렌드 변화"],events:["개인 생일"]}],DA=t=>ki.find(e=>e.date===t),OA=t=>Uw.find(e=>e.date===t),jA=(t=5)=>ki.sort((e,n)=>new Date(n.date).getTime()-new Date(e.date).getTime()).slice(0,t),MA=(t,e)=>ki.filter(n=>{const r=new Date(n.date),s=new Date(t),i=new Date(e);return r>=s&&r<=i}),LA=t=>{const e=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`;return ki.some(n=>n.date===e)},VA=(t,e)=>ki.filter(n=>{const r=new Date(n.date);return r.getFullYear()===t&&r.getMonth()===e-1}).length,Bw=x.createContext(void 0),ya=()=>{const t=x.useContext(Bw);if(t===void 0)throw new Error("useData must be used within a DataProvider");return t},FA=({children:t})=>{const{isAuthenticated:e,isDemoMode:n}=ws(),r=n||!e,s={isUsingMockData:r,diaryEntries:r?ki:[],contextData:r?Uw:[],getDiaryByDate:r?DA:()=>{},getContextByDate:r?OA:()=>{},getRecentDiaries:r?jA:()=>[],getDiariesByDateRange:r?MA:()=>[],hasDataForDate:r?LA:()=>!1,getDiaryCountByMonth:r?VA:()=>0};return h.jsx(Bw.Provider,{value:s,children:t})};function UA({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))}const $w=x.forwardRef(UA);function BA({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M14.857 17.082a23.848 23.848 0 0 0 5.454-1.31A8.967 8.967 0 0 1 18 9.75V9A6 6 0 0 0 6 9v.75a8.967 8.967 0 0 1-2.312 6.022c1.733.64 3.56 1.085 5.455 1.31m5.714 0a24.255 24.255 0 0 1-5.714 0m5.714 0a3 3 0 1 1-5.714 0"}))}const $A=x.forwardRef(BA);function zA({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinejoin:"round",d:"M6.75 3.744h-.753v8.25h7.125a4.125 4.125 0 0 0 0-8.25H6.75Zm0 0v.38m0 16.122h6.747a4.5 4.5 0 0 0 0-9.001h-7.5v9h.753Zm0 0v-.37m0-15.751h6a3.75 3.75 0 1 1 0 7.5h-6m0-7.5v7.5m0 0v8.25m0-8.25h6.375a4.125 4.125 0 0 1 0 8.25H6.75m.747-15.38h4.875a3.375 3.375 0 0 1 0 6.75H7.497v-6.75Zm0 7.5h5.25a3.75 3.75 0 0 1 0 7.5h-5.25v-7.5Z"}))}const WA=x.forwardRef(zA);function HA({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"}))}const zw=x.forwardRef(HA);function qA({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"}))}const Xo=x.forwardRef(qA);function YA({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const Ww=x.forwardRef(YA);function KA({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const GA=x.forwardRef(KA);function QA({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const XA=x.forwardRef(QA);function JA({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 19.5 8.25 12l7.5-7.5"}))}const Ed=x.forwardRef(JA);function ZA({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"}))}const Hw=x.forwardRef(ZA);function eN({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16.5V9.75m0 0 3 3m-3-3-3 3M6.75 19.5a4.5 4.5 0 0 1-1.41-8.775 5.25 5.25 0 0 1 10.233-2.33 3 3 0 0 1 3.758 3.848A3.752 3.752 0 0 1 18 19.5H6.75Z"}))}const tN=x.forwardRef(eN);function nN({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12a7.5 7.5 0 0 0 15 0m-15 0a7.5 7.5 0 1 1 15 0m-15 0H3m16.5 0H21m-1.5 0H12m-8.457 3.077 1.41-.513m14.095-5.13 1.41-.513M5.106 17.785l1.15-.964m11.49-9.642 1.149-.964M7.501 19.795l.75-1.3m7.5-12.99.75-1.3m-6.063 16.658.26-1.477m2.605-14.772.26-1.477m0 17.726-.26-1.477M10.698 4.614l-.26-1.477M16.5 19.794l-.75-1.299M7.5 4.205 12 12m6.894 5.785-1.149-.964M6.256 7.178l-1.15-.964m15.352 8.864-1.41-.513M4.954 9.435l-1.41-.514M12.002 12l-3.75 6.495"}))}const pp=x.forwardRef(nN);function rN({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))}const sN=x.forwardRef(rN);function iN({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.248 20.246H9.05m0 0h3.696m-3.696 0 5.893-16.502m0 0h-3.697m3.697 0h3.803"}))}const oN=x.forwardRef(iN);function aN({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"}))}const lN=x.forwardRef(aN);function uN({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 6.75h12M8.25 12h12m-12 5.25h12M3.75 6.75h.007v.008H3.75V6.75Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0ZM3.75 12h.007v.008H3.75V12Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm-.375 5.25h.007v.008H3.75v-.008Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const cN=x.forwardRef(uN);function hN({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.242 5.992h12m-12 6.003H20.24m-12 5.999h12M4.117 7.495v-3.75H2.99m1.125 3.75H2.99m1.125 0H5.24m-1.92 2.577a1.125 1.125 0 1 1 1.591 1.59l-1.83 1.83h2.16M2.99 15.745h1.125a1.125 1.125 0 0 1 0 2.25H3.74m0-.002h.375a1.125 1.125 0 0 1 0 2.25H2.99"}))}const dN=x.forwardRef(hN);function fN({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const qw=x.forwardRef(fN);function pN({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4.5v15m7.5-7.5h-15"}))}const mN=x.forwardRef(pN);function gN({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h16.5m-16.5 3.75h16.5M3.75 19.5h16.5M5.625 4.5h12.75a1.875 1.875 0 0 1 0 3.75H5.625a1.875 1.875 0 0 1 0-3.75Z"}))}const vN=x.forwardRef(gN);function yN({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75m-3-7.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.749c0 5.592 3.824 10.29 9 11.623 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.571-.598-3.751h-.152c-3.196 0-6.1-1.248-8.25-3.285Z"}))}const _N=x.forwardRef(yN);function wN({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 0 1-1.125-1.125M3.375 19.5h7.5c.621 0 1.125-.504 1.125-1.125m-9.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-7.5A1.125 1.125 0 0 1 12 18.375m9.75-12.75c0-.621-.504-1.125-1.125-1.125H3.375c-.621 0-1.125.504-1.125 1.125m19.5 0v1.5c0 .621-.504 1.125-1.125 1.125M2.25 5.625v1.5c0 .621.504 1.125 1.125 1.125m0 0h17.25m-17.25 0h7.5c.621 0 1.125.504 1.125 1.125M3.375 8.25c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m17.25-3.75h-7.5c-.621 0-1.125.504-1.125 1.125m8.625-1.125c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M12 10.875v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125M13.125 12h7.5m-7.5 0c-.621 0-1.125.504-1.125 1.125M20.625 12c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h7.5M12 14.625v-1.5m0 1.5c0 .621-.504 1.125-1.125 1.125M12 14.625c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m0 1.5v-1.5m0 0c0-.621.504-1.125 1.125-1.125m0 0h7.5"}))}const EN=x.forwardRef(wN);function xN({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"}))}const TN=x.forwardRef(xN);function IN({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const q0=x.forwardRef(IN);function SN({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"}))}const kN=x.forwardRef(SN);function CN({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 4.5v15m6-15v15m-10.875 0h15.75c.621 0 1.125-.504 1.125-1.125V5.625c0-.621-.504-1.125-1.125-1.125H4.125C3.504 4.5 3 5.004 3 5.625v12.75c0 .621.504 1.125 1.125 1.125Z"}))}const RN=x.forwardRef(CN);function bN({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const AN=x.forwardRef(bN);function NN({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const mp=x.forwardRef(NN);function pu(t){"@babel/helpers - typeof";return pu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pu(t)}function fs(t){if(t===null||t===!0||t===!1)return NaN;var e=Number(t);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function Ie(t,e){if(e.length<t)throw new TypeError(t+" argument"+(t>1?"s":"")+" required, but only "+e.length+" present")}function qe(t){Ie(1,arguments);var e=Object.prototype.toString.call(t);return t instanceof Date||pu(t)==="object"&&e==="[object Date]"?new Date(t.getTime()):typeof t=="number"||e==="[object Number]"?new Date(t):((typeof t=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function PN(t,e){Ie(2,arguments);var n=qe(t).getTime(),r=fs(e);return new Date(n+r)}var DN={};function Xu(){return DN}function xd(t){var e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),t.getTime()-e.getTime()}function mu(t){Ie(1,arguments);var e=qe(t);return e.setHours(0,0,0,0),e}var ON=864e5;function jN(t,e){Ie(2,arguments);var n=mu(t),r=mu(e),s=n.getTime()-xd(n),i=r.getTime()-xd(r);return Math.round((s-i)/ON)}function Eo(t,e){Ie(2,arguments);var n=mu(t),r=mu(e);return n.getTime()===r.getTime()}function MN(t){return Ie(1,arguments),t instanceof Date||pu(t)==="object"&&Object.prototype.toString.call(t)==="[object Date]"}function LN(t){if(Ie(1,arguments),!MN(t)&&typeof t!="number")return!1;var e=qe(t);return!isNaN(Number(e))}function VN(t){Ie(1,arguments);var e=qe(t),n=e.getMonth();return e.setFullYear(e.getFullYear(),n+1,0),e.setHours(23,59,59,999),e}function Yw(t,e){var n;Ie(1,arguments);var r=t||{},s=qe(r.start),i=qe(r.end),o=i.getTime();if(!(s.getTime()<=o))throw new RangeError("Invalid interval");var l=[],u=s;u.setHours(0,0,0,0);var c=Number((n=void 0)!==null&&n!==void 0?n:1);if(c<1||isNaN(c))throw new RangeError("`options.step` must be a number greater than 1");for(;u.getTime()<=o;)l.push(qe(u)),u.setDate(u.getDate()+c),u.setHours(0,0,0,0);return l}function FN(t){Ie(1,arguments);var e=qe(t);return e.setDate(1),e.setHours(0,0,0,0),e}function UN(t){Ie(1,arguments);var e=qe(t),n=e.getFullYear();return e.setFullYear(n+1,0,0),e.setHours(23,59,59,999),e}function gp(t){Ie(1,arguments);var e=qe(t),n=new Date(0);return n.setFullYear(e.getFullYear(),0,1),n.setHours(0,0,0,0),n}function BN(t,e){Ie(2,arguments);var n=fs(e);return PN(t,-n)}var $N=864e5;function zN(t){Ie(1,arguments);var e=qe(t),n=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var r=e.getTime(),s=n-r;return Math.floor(s/$N)+1}function gu(t){Ie(1,arguments);var e=1,n=qe(t),r=n.getUTCDay(),s=(r<e?7:0)+r-e;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function Kw(t){Ie(1,arguments);var e=qe(t),n=e.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=gu(r),i=new Date(0);i.setUTCFullYear(n,0,4),i.setUTCHours(0,0,0,0);var o=gu(i);return e.getTime()>=s.getTime()?n+1:e.getTime()>=o.getTime()?n:n-1}function WN(t){Ie(1,arguments);var e=Kw(t),n=new Date(0);n.setUTCFullYear(e,0,4),n.setUTCHours(0,0,0,0);var r=gu(n);return r}var HN=6048e5;function qN(t){Ie(1,arguments);var e=qe(t),n=gu(e).getTime()-WN(e).getTime();return Math.round(n/HN)+1}function vu(t,e){var n,r,s,i,o,l,u,c;Ie(1,arguments);var p=Xu(),m=fs((n=(r=(s=(i=e==null?void 0:e.weekStartsOn)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:p.weekStartsOn)!==null&&r!==void 0?r:(u=p.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var g=qe(t),_=g.getUTCDay(),b=(_<m?7:0)+_-m;return g.setUTCDate(g.getUTCDate()-b),g.setUTCHours(0,0,0,0),g}function Gw(t,e){var n,r,s,i,o,l,u,c;Ie(1,arguments);var p=qe(t),m=p.getUTCFullYear(),g=Xu(),_=fs((n=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:g.firstWeekContainsDate)!==null&&r!==void 0?r:(u=g.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(_>=1&&_<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var b=new Date(0);b.setUTCFullYear(m+1,0,_),b.setUTCHours(0,0,0,0);var k=vu(b,e),N=new Date(0);N.setUTCFullYear(m,0,_),N.setUTCHours(0,0,0,0);var w=vu(N,e);return p.getTime()>=k.getTime()?m+1:p.getTime()>=w.getTime()?m:m-1}function YN(t,e){var n,r,s,i,o,l,u,c;Ie(1,arguments);var p=Xu(),m=fs((n=(r=(s=(i=e==null?void 0:e.firstWeekContainsDate)!==null&&i!==void 0?i:e==null||(o=e.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:p.firstWeekContainsDate)!==null&&r!==void 0?r:(u=p.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&n!==void 0?n:1),g=Gw(t,e),_=new Date(0);_.setUTCFullYear(g,0,m),_.setUTCHours(0,0,0,0);var b=vu(_,e);return b}var KN=6048e5;function GN(t,e){Ie(1,arguments);var n=qe(t),r=vu(n,e).getTime()-YN(n,e).getTime();return Math.round(r/KN)+1}function de(t,e){for(var n=t<0?"-":"",r=Math.abs(t).toString();r.length<e;)r="0"+r;return n+r}var ir={y:function(e,n){var r=e.getUTCFullYear(),s=r>0?r:1-r;return de(n==="yy"?s%100:s,n.length)},M:function(e,n){var r=e.getUTCMonth();return n==="M"?String(r+1):de(r+1,2)},d:function(e,n){return de(e.getUTCDate(),n.length)},a:function(e,n){var r=e.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(e,n){return de(e.getUTCHours()%12||12,n.length)},H:function(e,n){return de(e.getUTCHours(),n.length)},m:function(e,n){return de(e.getUTCMinutes(),n.length)},s:function(e,n){return de(e.getUTCSeconds(),n.length)},S:function(e,n){var r=n.length,s=e.getUTCMilliseconds(),i=Math.floor(s*Math.pow(10,r-3));return de(i,n.length)}},ks={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},QN={G:function(e,n,r){var s=e.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(e,n,r){if(n==="yo"){var s=e.getUTCFullYear(),i=s>0?s:1-s;return r.ordinalNumber(i,{unit:"year"})}return ir.y(e,n)},Y:function(e,n,r,s){var i=Gw(e,s),o=i>0?i:1-i;if(n==="YY"){var l=o%100;return de(l,2)}return n==="Yo"?r.ordinalNumber(o,{unit:"year"}):de(o,n.length)},R:function(e,n){var r=Kw(e);return de(r,n.length)},u:function(e,n){var r=e.getUTCFullYear();return de(r,n.length)},Q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return de(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,n,r){var s=Math.ceil((e.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return de(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,n,r){var s=e.getUTCMonth();switch(n){case"M":case"MM":return ir.M(e,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(e,n,r){var s=e.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return de(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(e,n,r,s){var i=GN(e,s);return n==="wo"?r.ordinalNumber(i,{unit:"week"}):de(i,n.length)},I:function(e,n,r){var s=qN(e);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):de(s,n.length)},d:function(e,n,r){return n==="do"?r.ordinalNumber(e.getUTCDate(),{unit:"date"}):ir.d(e,n)},D:function(e,n,r){var s=zN(e);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):de(s,n.length)},E:function(e,n,r){var s=e.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(e,n,r,s){var i=e.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(o);case"ee":return de(o,2);case"eo":return r.ordinalNumber(o,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,n,r,s){var i=e.getUTCDay(),o=(i-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(o);case"cc":return de(o,n.length);case"co":return r.ordinalNumber(o,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,n,r){var s=e.getUTCDay(),i=s===0?7:s;switch(n){case"i":return String(i);case"ii":return de(i,n.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(e,n,r){var s=e.getUTCHours(),i=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,n,r){var s=e.getUTCHours(),i;switch(s===12?i=ks.noon:s===0?i=ks.midnight:i=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,n,r){var s=e.getUTCHours(),i;switch(s>=17?i=ks.evening:s>=12?i=ks.afternoon:s>=4?i=ks.morning:i=ks.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,n,r){if(n==="ho"){var s=e.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return ir.h(e,n)},H:function(e,n,r){return n==="Ho"?r.ordinalNumber(e.getUTCHours(),{unit:"hour"}):ir.H(e,n)},K:function(e,n,r){var s=e.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):de(s,n.length)},k:function(e,n,r){var s=e.getUTCHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):de(s,n.length)},m:function(e,n,r){return n==="mo"?r.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):ir.m(e,n)},s:function(e,n,r){return n==="so"?r.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):ir.s(e,n)},S:function(e,n){return ir.S(e,n)},X:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();if(o===0)return"Z";switch(n){case"X":return K0(o);case"XXXX":case"XX":return Gr(o);case"XXXXX":case"XXX":default:return Gr(o,":")}},x:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"x":return K0(o);case"xxxx":case"xx":return Gr(o);case"xxxxx":case"xxx":default:return Gr(o,":")}},O:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Y0(o,":");case"OOOO":default:return"GMT"+Gr(o,":")}},z:function(e,n,r,s){var i=s._originalDate||e,o=i.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Y0(o,":");case"zzzz":default:return"GMT"+Gr(o,":")}},t:function(e,n,r,s){var i=s._originalDate||e,o=Math.floor(i.getTime()/1e3);return de(o,n.length)},T:function(e,n,r,s){var i=s._originalDate||e,o=i.getTime();return de(o,n.length)}};function Y0(t,e){var n=t>0?"-":"+",r=Math.abs(t),s=Math.floor(r/60),i=r%60;if(i===0)return n+String(s);var o=e;return n+String(s)+o+de(i,2)}function K0(t,e){if(t%60===0){var n=t>0?"-":"+";return n+de(Math.abs(t)/60,2)}return Gr(t,e)}function Gr(t,e){var n=e||"",r=t>0?"-":"+",s=Math.abs(t),i=de(Math.floor(s/60),2),o=de(s%60,2);return r+i+n+o}var G0=function(e,n){switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},Qw=function(e,n){switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},XN=function(e,n){var r=e.match(/(P+)(p+)?/)||[],s=r[1],i=r[2];if(!i)return G0(e,n);var o;switch(s){case"P":o=n.dateTime({width:"short"});break;case"PP":o=n.dateTime({width:"medium"});break;case"PPP":o=n.dateTime({width:"long"});break;case"PPPP":default:o=n.dateTime({width:"full"});break}return o.replace("{{date}}",G0(s,n)).replace("{{time}}",Qw(i,n))},JN={p:Qw,P:XN},ZN=["D","DD"],eP=["YY","YYYY"];function tP(t){return ZN.indexOf(t)!==-1}function nP(t){return eP.indexOf(t)!==-1}function Q0(t,e,n){if(t==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(t==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var rP={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},sP=function(e,n,r){var s,i=rP[e];return typeof i=="string"?s=i:n===1?s=i.one:s=i.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function eh(t){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.width?String(e.width):t.defaultWidth,r=t.formats[n]||t.formats[t.defaultWidth];return r}}var iP={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},oP={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},aP={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},lP={date:eh({formats:iP,defaultWidth:"full"}),time:eh({formats:oP,defaultWidth:"full"}),dateTime:eh({formats:aP,defaultWidth:"full"})},uP={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},cP=function(e,n,r,s){return uP[e]};function Gi(t){return function(e,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&t.formattingValues){var i=t.defaultFormattingWidth||t.defaultWidth,o=n!=null&&n.width?String(n.width):i;s=t.formattingValues[o]||t.formattingValues[i]}else{var l=t.defaultWidth,u=n!=null&&n.width?String(n.width):t.defaultWidth;s=t.values[u]||t.values[l]}var c=t.argumentCallback?t.argumentCallback(e):e;return s[c]}}var hP={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},dP={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},fP={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},pP={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},mP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},gP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},vP=function(e,n){var r=Number(e),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},yP={ordinalNumber:vP,era:Gi({values:hP,defaultWidth:"wide"}),quarter:Gi({values:dP,defaultWidth:"wide",argumentCallback:function(e){return e-1}}),month:Gi({values:fP,defaultWidth:"wide"}),day:Gi({values:pP,defaultWidth:"wide"}),dayPeriod:Gi({values:mP,defaultWidth:"wide",formattingValues:gP,defaultFormattingWidth:"wide"})};function Qi(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&t.matchPatterns[r]||t.matchPatterns[t.defaultMatchWidth],i=e.match(s);if(!i)return null;var o=i[0],l=r&&t.parsePatterns[r]||t.parsePatterns[t.defaultParseWidth],u=Array.isArray(l)?wP(l,function(m){return m.test(o)}):_P(l,function(m){return m.test(o)}),c;c=t.valueCallback?t.valueCallback(u):u,c=n.valueCallback?n.valueCallback(c):c;var p=e.slice(o.length);return{value:c,rest:p}}}function _P(t,e){for(var n in t)if(t.hasOwnProperty(n)&&e(t[n]))return n}function wP(t,e){for(var n=0;n<t.length;n++)if(e(t[n]))return n}function EP(t){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=e.match(t.matchPattern);if(!r)return null;var s=r[0],i=e.match(t.parsePattern);if(!i)return null;var o=t.valueCallback?t.valueCallback(i[0]):i[0];o=n.valueCallback?n.valueCallback(o):o;var l=e.slice(s.length);return{value:o,rest:l}}}var xP=/^(\d+)(th|st|nd|rd)?/i,TP=/\d+/i,IP={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},SP={any:[/^b/i,/^(a|c)/i]},kP={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},CP={any:[/1/i,/2/i,/3/i,/4/i]},RP={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},bP={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},AP={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},NP={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},PP={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},DP={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},OP={ordinalNumber:EP({matchPattern:xP,parsePattern:TP,valueCallback:function(e){return parseInt(e,10)}}),era:Qi({matchPatterns:IP,defaultMatchWidth:"wide",parsePatterns:SP,defaultParseWidth:"any"}),quarter:Qi({matchPatterns:kP,defaultMatchWidth:"wide",parsePatterns:CP,defaultParseWidth:"any",valueCallback:function(e){return e+1}}),month:Qi({matchPatterns:RP,defaultMatchWidth:"wide",parsePatterns:bP,defaultParseWidth:"any"}),day:Qi({matchPatterns:AP,defaultMatchWidth:"wide",parsePatterns:NP,defaultParseWidth:"any"}),dayPeriod:Qi({matchPatterns:PP,defaultMatchWidth:"any",parsePatterns:DP,defaultParseWidth:"any"})},jP={code:"en-US",formatDistance:sP,formatLong:lP,formatRelative:cP,localize:yP,match:OP,options:{weekStartsOn:0,firstWeekContainsDate:1}},MP=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,LP=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,VP=/^'([^]*?)'?$/,FP=/''/g,UP=/[a-zA-Z]/;function $e(t,e,n){var r,s,i,o,l,u,c,p,m,g,_,b,k,N;Ie(2,arguments);var w=String(e),E=Xu(),S=(r=(s=void 0)!==null&&s!==void 0?s:E.locale)!==null&&r!==void 0?r:jP,O=fs((i=(o=(l=(u=void 0)!==null&&u!==void 0?u:void 0)!==null&&l!==void 0?l:E.firstWeekContainsDate)!==null&&o!==void 0?o:(c=E.locale)===null||c===void 0||(p=c.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(O>=1&&O<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var L=fs((m=(g=(_=(b=void 0)!==null&&b!==void 0?b:void 0)!==null&&_!==void 0?_:E.weekStartsOn)!==null&&g!==void 0?g:(k=E.locale)===null||k===void 0||(N=k.options)===null||N===void 0?void 0:N.weekStartsOn)!==null&&m!==void 0?m:0);if(!(L>=0&&L<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!S.localize)throw new RangeError("locale must contain localize property");if(!S.formatLong)throw new RangeError("locale must contain formatLong property");var M=qe(t);if(!LN(M))throw new RangeError("Invalid time value");var T=xd(M),y=BN(M,T),I={firstWeekContainsDate:O,weekStartsOn:L,locale:S,_originalDate:M},R=w.match(LP).map(function(A){var P=A[0];if(P==="p"||P==="P"){var C=JN[P];return C(A,S.formatLong)}return A}).join("").match(MP).map(function(A){if(A==="''")return"'";var P=A[0];if(P==="'")return BP(A);var C=QN[P];if(C)return nP(A)&&Q0(A,e,String(t)),tP(A)&&Q0(A,e,String(t)),C(y,A,S.localize,I);if(P.match(UP))throw new RangeError("Format string contains an unescaped latin alphabet character `"+P+"`");return A}).join("");return R}function BP(t){var e=t.match(VP);return e?e[1].replace(FP,"'"):t}function Xi(t){Ie(1,arguments);var e=qe(t),n=jN(e,gp(e)),r=n+1;return r}function $P(){const{getRecentDiaries:t,isUsingMockData:e}=ya(),n=t(5),[r,s]=x.useState(null),i=(u,c,p)=>{s({diaryId:u,photoIndex:c,photos:p})},o=()=>{s(null)},l=u=>{r&&s(u==="prev"?{...r,photoIndex:r.photoIndex>0?r.photoIndex-1:r.photos.length-1}:{...r,photoIndex:r.photoIndex<r.photos.length-1?r.photoIndex+1:0})};return x.useEffect(()=>{const u=c=>{if(r)switch(c.key){case"Escape":o();break;case"ArrowLeft":l("prev");break;case"ArrowRight":l("next");break}};return window.addEventListener("keydown",u),()=>window.removeEventListener("keydown",u)},[r]),h.jsxs("div",{className:"max-w-6xl mx-auto",children:[h.jsxs("div",{className:"text-center mb-12",children:[h.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"ME.STORY"}),h.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"100년 일기 - 나의 이야기를 완전히 기록하고 맥락화하는 공간"}),h.jsxs(sn,{to:"/timeline",className:"btn-primary inline-flex items-center gap-2",children:[h.jsx(Xo,{className:"w-5 h-5"}),"타임라인 보기"]})]}),h.jsxs("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:[h.jsxs(sn,{to:"/diary",className:"card hover:shadow-md transition-shadow",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[h.jsx(zw,{className:"w-6 h-6 text-primary-600"}),h.jsx("h3",{className:"text-lg font-semibold",children:"오늘의 일기"})]}),h.jsx("p",{className:"text-gray-600",children:"오늘 하루를 기록하고 사진을 추가해보세요"})]}),h.jsxs(sn,{to:"/timeline",className:"card hover:shadow-md transition-shadow",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[h.jsx(Xo,{className:"w-6 h-6 text-primary-600"}),h.jsx("h3",{className:"text-lg font-semibold",children:"2D 타임라인"})]}),h.jsx("p",{className:"text-gray-600",children:"수평(월일) × 수직(연도) 네비게이션으로 과거 탐색"})]}),h.jsxs(sn,{to:"/analytics",className:"card hover:shadow-md transition-shadow",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[h.jsx(Ww,{className:"w-6 h-6 text-primary-600"}),h.jsx("h3",{className:"text-lg font-semibold",children:"데이터 분석"})]}),h.jsx("p",{className:"text-gray-600",children:"나의 패턴과 트렌드를 시각화해서 확인"})]}),h.jsxs(sn,{to:"/settings",className:"card hover:shadow-md transition-shadow",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[h.jsx(pp,{className:"w-6 h-6 text-primary-600"}),h.jsx("h3",{className:"text-lg font-semibold",children:"설정"})]}),h.jsx("p",{className:"text-gray-600",children:"계정, 백업, 연동 설정 관리"})]})]}),h.jsxs("div",{className:"card",children:[h.jsx("h2",{className:"text-xl font-semibold mb-4",children:"최근 기록"}),h.jsx("div",{className:"space-y-4",children:n.length>0?n.map(u=>h.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow",children:h.jsxs("div",{className:"flex gap-4",children:[u.photos.length>0&&h.jsxs("div",{className:"flex-shrink-0",children:[h.jsx("img",{src:u.photos[0],alt:`${u.title} 대표 사진`,className:"w-16 h-16 object-cover rounded-lg border border-gray-200 cursor-pointer hover:shadow-md transition-shadow",onClick:()=>i(u.id,0,u.photos)}),u.photos.length>1&&h.jsxs("div",{className:"text-xs text-gray-500 text-center mt-1",children:["+",u.photos.length-1]})]}),h.jsxs("div",{className:"flex-1 min-w-0",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("span",{className:"text-sm font-medium text-gray-900",children:$e(new Date(u.date),"yyyy.MM.dd")}),u.mood&&h.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${u.mood==="great"?"bg-green-100 text-green-700":u.mood==="good"?"bg-blue-100 text-blue-700":u.mood==="neutral"?"bg-gray-100 text-gray-700":u.mood==="bad"?"bg-yellow-100 text-yellow-700":"bg-red-100 text-red-700"}`,children:u.mood==="great"?"😊":u.mood==="good"?"🙂":u.mood==="neutral"?"😐":u.mood==="bad"?"😕":"😢"}),u.photos.length>0&&h.jsxs("span",{className:"text-xs px-2 py-1 rounded-full bg-purple-100 text-purple-700",children:["📷 ",u.photos.length]})]}),h.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:u.title}),h.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:u.content.length>100?u.content.substring(0,100)+"...":u.content}),h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("div",{className:"flex items-center gap-2",children:u.tags.slice(0,3).map((c,p)=>h.jsxs("span",{className:"text-xs px-2 py-1 bg-gray-100 text-gray-600 rounded",children:["#",c]},p))}),h.jsx(sn,{to:`/diary/${u.date}`,className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:"자세히 보기 →"})]})]})]})},u.id)):h.jsx("div",{className:"text-center py-8 text-gray-500",children:"아직 기록이 없습니다. 첫 일기를 작성해보세요!"})}),n.length>0&&h.jsx("div",{className:"mt-6 text-center",children:h.jsx(sn,{to:"/timeline",className:"text-primary-600 hover:text-primary-700 text-sm font-medium",children:"모든 기록 보기 →"})})]})]})}function zP({selectedDate:t,onDateSelect:e}){const{hasDataForDate:n,getDiaryByDate:r,isUsingMockData:s}=ya(),[i,o]=x.useState(new Date().getFullYear()),[l,u]=x.useState(2),[c,p]=x.useState({isDragging:!1,lastX:0,lastY:0}),[m,g]=x.useState({x:0,y:0}),[_,b]=x.useState(!1),k=x.useRef(null),N=x.useRef(null),w=12*l,E=1,S=["1","2","3","4","5","6","7","8","9","10","11","12"],O=new Date().getFullYear(),L=x.useMemo(()=>{const B=O-5,se=O+10,ee=Array.from({length:se-B+1},(he,xe)=>B+xe);return console.log("📅 Years array generated (expanded range):",{currentYearNum:O,startYear:B,endYear:se,yearArray:ee,totalYears:ee.length,currentYearPosition:ee.indexOf(O)+1,displayRange:`${B}-${se}`}),ee},[O]),M=366,[T,y]=x.useState(!1);x.useEffect(()=>{if(!_&&k.current){const B=new Date;t||e(B),o(B.getFullYear()),console.log("🚀 Enhanced initial positioning..."),y(!0),u(2);const se=()=>{if(console.log("🎯 First centerOnToday attempt (manual implementation)"),!k.current){console.log("❌ Container ref not available in manual implementation");return}const ee=new Date,he=ee.getFullYear(),xe=Xi(ee),ye=L.findIndex(Ae=>Ae===he),te=`${ee.getFullYear()}-${String(ee.getMonth()+1).padStart(2,"0")}-${String(ee.getDate()).padStart(2,"0")}`;if(console.log("📅 Manual Today details:",{today:te,todayYear:he,todayDayOfYear:xe,todayMonth:ee.getMonth()+1,todayDate:ee.getDate(),yearIndex:ye,totalYears:L.length}),ye!==-1){const Ae=k.current.getBoundingClientRect(),Xe=Ae.width/2,ot=Ae.height,An=32,Nt=26,Ne=64,at=12*2,yt=1,Bt=Ne+An+(xe-1)*(at+yt)+at/2,fn=An+Nt+ye*(at+yt)+at/2,Zn=ot*.33,Pe=Xe-Bt*2.5,Ye=Zn-fn*2.5;console.log("📊 Enhanced positioning calculation:",{containerSize:{width:Ae.width,height:ot},positioning:{centerX:Xe,targetY:Zn,strategy:"horizontal center + vertical 1/3"},cellPosition:{x:Bt,y:fn},targetOffset:{x:Pe,y:Ye},yearVisibility:{currentYearIndex:ye,totalYears:L.length,visibleYearsAbove:ye,visibleYearsBelow:L.length-ye-1}}),g({x:Pe,y:Ye}),console.log("✅ Enhanced positioning completed - multiple years should be visible")}else console.log("❌ Today year not found in years array:",{todayYear:he,years:L})};setTimeout(()=>{se()},100),setTimeout(()=>{console.log("🎯 Second centerOnToday attempt"),se(),b(!0),y(!1),console.log("✅ Initial positioning completed")},500)}},[_,t,e,L]),x.useEffect(()=>{if(_&&!T){console.log("🔄 Scale changed, re-centering...",l);const B=setTimeout(()=>{Ut()},50);return()=>clearTimeout(B)}},[l,_,T]);const I=x.useCallback(()=>{if(!k.current)return;const se=k.current.getBoundingClientRect().height/2,ee=32,he=26,xe=(se-m.y)/l,ye=w+E,te=Math.round((xe-ee-he)/ye);if(te>=0&&te<L.length){const Ae=L[te];Ae!==i&&(o(Ae),console.log("📅 Updated current view year:",Ae))}},[m.y,l,w,E,L,i]);x.useEffect(()=>{const B=setTimeout(()=>{I()},100);return()=>clearTimeout(B)},[m,l,I]);const R=B=>{y(!1),p({isDragging:!0,lastX:B.clientX,lastY:B.clientY})},A=B=>{if(!c.isDragging)return;const se=(B.clientX-c.lastX)*.8,ee=(B.clientY-c.lastY)*.8;g(he=>({x:he.x+se,y:he.y+ee})),p(he=>({...he,lastX:B.clientX,lastY:B.clientY}))},P=()=>{p(B=>({...B,isDragging:!1}))},C=100,St=()=>{g(B=>({...B,x:B.x+C}))},bn=()=>{g(B=>({...B,x:B.x-C}))},Ur=()=>{g(B=>({...B,y:B.y+C}))},Xt=()=>{g(B=>({...B,y:B.y-C}))},z=()=>{u(B=>Math.min(4,B*1.2))},K=()=>{u(B=>Math.max(1.5,B/1.2))},Q=B=>{const se=L.findIndex(ot=>ot===B);if(se===-1||!k.current)return;const he=k.current.getBoundingClientRect().height,te=32+26+se*(w+E)+w/2,Xe=he*.33-te*l;y(!0),g(ot=>({...ot,y:Xe})),o(B),setTimeout(()=>y(!1),300)},ve=B=>{B.preventDefault();const se=B.deltaY>0?.95:1.05;u(ee=>Math.max(1.5,Math.min(4,ee*se)))},ce=B=>{e(B)},Se=B=>t?Eo(B,t):!1,Jt=B=>{const se=`${B.getFullYear()}-${String(B.getMonth()+1).padStart(2,"0")}-${String(B.getDate()).padStart(2,"0")}`,ee=n(B);return B.getMonth()===4&&console.log(`📊 hasDataForDate ${se}:`,{hasData:ee,dateString:se,actualDay:B.getDate(),month:B.getMonth()+1,year:B.getFullYear()}),ee},Ft=B=>{const se=[];for(let ee=0;ee<12;ee++){const he=new Date(B,ee,1),xe=Xi(he);se.push(xe-1)}return se},Zt=x.useCallback(()=>{console.log("🔥 goToToday clicked - Enhanced version with force call");const B=new Date,se=`${B.getFullYear()}-${String(B.getMonth()+1).padStart(2,"0")}-${String(B.getDate()).padStart(2,"0")}`;console.log("📅 Today date:",se),console.log("📅 Today year:",B.getFullYear()),console.log("📅 Available years:",L),y(!0),o(B.getFullYear()),e(B),(l<2||l>4)&&u(3),setTimeout(()=>{if(console.log("🎯 Delayed centerOnToday call from goToToday"),k.current){const ee=new Date,he=ee.getFullYear(),xe=Xi(ee),ye=L.findIndex(te=>te===he);if(ye!==-1){const te=k.current.getBoundingClientRect(),Ae=te.width/2,Xe=te.height,ot=32,An=26,Nt=64,Ne=12*l,at=1,yt=Nt+ot+(xe-1)*(Ne+at)+Ne/2,Bt=ot+An+ye*(Ne+at)+Ne/2,fn=Xe*.33,Zn=Ae-yt*l,Pe=fn-Bt*l;console.log("🎯 Enhanced goToToday calculation:",{yearIndex:ye,positioning:"horizontal center + vertical 1/3",cellPosition:{x:yt,y:Bt},targetOffset:{x:Zn,y:Pe}}),g({x:Zn,y:Pe})}}setTimeout(()=>{y(!1),console.log("✅ goToToday completed smoothly")},150)},50)},[e,L,l]),Ut=x.useCallback(()=>{if(console.log("🎯 centerOnToday called (fully improved method)"),!k.current){console.log("❌ Container ref not available");return}const B=new Date,se=B.getFullYear(),ee=Xi(B),he=`${B.getFullYear()}-${String(B.getMonth()+1).padStart(2,"0")}-${String(B.getDate()).padStart(2,"0")}`;console.log("📅 Today details:",{today:he,todayYear:se,todayDayOfYear:ee,todayMonth:B.getMonth()+1,todayDate:B.getDate()});const xe=L.findIndex(fn=>fn===se);if(xe===-1){console.log("❌ Today year not found in years array",{todayYear:se,years:L});return}console.log("📊 Year index:",{yearIndex:xe,totalYears:L.length});const ye=k.current.getBoundingClientRect(),te=ye.width/2,Ae=ye.height,Xe=32,ot=26,Nt=64+Xe+(ee-1)*(w+E)+w/2,Ne=Xe+ot+xe*(w+E)+w/2,at=Ae*.33,yt=te-Nt*l,Bt=at-Ne*l;console.log("📊 Enhanced center calculation details:",{today:he,todayYear:se,todayDayOfYear:ee,yearIndex:xe,containerSize:{width:ye.width,height:Ae},positioning:{centerX:te,targetY:at,strategy:"horizontal center + vertical 1/3"},cellPosition:{x:Nt,y:Ne},cellSize:w,scale:l,targetOffset:{x:yt,y:Bt},yearVisibility:{currentYearIndex:xe,totalYears:L.length,visibleYearsAbove:xe,visibleYearsBelow:L.length-xe-1}}),g({x:yt,y:Bt}),console.log("✅ centerOnToday completed successfully")},[L,w,E,l]);return h.jsxs("div",{className:"relative w-full h-[500px] overflow-hidden border border-gray-200 rounded-lg bg-gray-50",children:[h.jsxs("div",{className:"absolute top-16 left-4 z-10 bg-white rounded-lg shadow-sm border border-gray-200 p-2 transition-all duration-200",children:[h.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"현재 보고 있는 년도"}),h.jsx("div",{className:"text-lg font-bold text-blue-700 transition-all duration-300",children:i}),h.jsx("div",{className:"text-xs text-gray-500 mt-1",children:i===new Date().getFullYear()?"(올해)":""})]}),h.jsxs("div",{className:"absolute top-4 left-4 z-10 bg-white rounded-lg shadow-sm border border-gray-200 p-3",children:[h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx("button",{onClick:Zt,className:"px-3 py-1 text-sm bg-blue-100 hover:bg-blue-200 text-blue-700 rounded font-medium",children:"오늘"}),h.jsx("button",{onClick:()=>{console.log("🔄 Reset button clicked"),y(!0),u(2),setTimeout(()=>{Ut(),setTimeout(()=>{y(!1),console.log("✅ Reset completed")},150)},50)},className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",children:"초기화"}),h.jsx("div",{className:"border-l border-gray-200 pl-2 ml-2",children:h.jsxs("span",{className:"text-xs text-gray-600",children:["줌: ",(l*100).toFixed(0),"%"]})})]}),h.jsxs("div",{className:"mb-3",children:[h.jsx("div",{className:"text-xs text-gray-600 mb-2",children:"이동 (키보드 방향키 방식)"}),h.jsxs("div",{className:"grid grid-cols-3 gap-1 w-fit",children:[h.jsx("div",{}),h.jsx("button",{onClick:Ur,className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded text-xs flex items-center justify-center transition-colors",title:"위로",children:"↑"}),h.jsx("div",{}),h.jsx("button",{onClick:St,className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded text-xs flex items-center justify-center transition-colors",title:"왼쪽",children:"←"}),h.jsx("div",{className:"w-8 h-8"}),h.jsx("button",{onClick:bn,className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded text-xs flex items-center justify-center transition-colors",title:"오른쪽",children:"→"}),h.jsx("div",{}),h.jsx("button",{onClick:Xt,className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded text-xs flex items-center justify-center transition-colors",title:"아래로",children:"↓"}),h.jsx("div",{})]})]}),h.jsxs("div",{className:"mb-3",children:[h.jsx("div",{className:"text-xs text-gray-600 mb-2",children:"줌"}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx("button",{onClick:K,className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",title:"축소",children:"줌 -"}),h.jsx("button",{onClick:z,className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",title:"확대",children:"줌 +"})]})]}),h.jsxs("div",{children:[h.jsx("div",{className:"text-xs text-gray-600 mb-2",children:"연도 이동"}),h.jsxs("div",{className:"flex gap-1",children:[h.jsx("button",{onClick:()=>Q(i-1),className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",title:"이전 해",children:i-1}),h.jsx("button",{onClick:()=>Q(new Date().getFullYear()),className:"px-2 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 rounded transition-colors",title:"올해",children:new Date().getFullYear()}),h.jsx("button",{onClick:()=>Q(i+1),className:"px-2 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors",title:"다음 해",children:i+1})]})]})]}),h.jsxs("div",{className:"absolute top-4 right-4 z-10 bg-white rounded-lg shadow-sm border border-gray-200 p-2 text-xs text-gray-600",children:[h.jsx("div",{className:"font-medium mb-1",children:"조작 방법"}),h.jsx("div",{children:"• 버튼: 정확한 이동/줌"}),h.jsx("div",{children:"• 드래그: 자유 이동 (감도 조정됨)"}),h.jsx("div",{children:"• 휠: 부드러운 줌"})]}),h.jsx("div",{ref:k,className:`w-full h-full cursor-grab active:cursor-grabbing ${T?"transition-transform duration-300 ease-out":""}`,onMouseDown:R,onMouseMove:A,onMouseUp:P,onMouseLeave:P,onWheel:ve,style:{transform:`translate(${m.x}px, ${m.y}px) scale(${l})`,transformOrigin:"0 0"},children:h.jsxs("div",{className:"p-8",children:[h.jsxs("div",{className:"flex mb-2 sticky top-0 bg-gray-50 z-30 border-b border-gray-300",children:[h.jsx("div",{className:"w-16 bg-gray-50 border-r border-gray-300"})," ",h.jsx("div",{className:"flex",style:{width:`${(w+E)*M}px`},children:S.map((B,se)=>{const ee=Ft(i)[se]||0,he=se<11?(Ft(i)[se+1]||M)-ee:M-ee;return h.jsx("div",{className:"text-xs font-medium text-gray-700 text-center border-r border-gray-300 flex items-center justify-center bg-gray-50",style:{width:`${he*(w+E)}px`,height:"24px"},children:B},B)})})]}),L.map((B,se)=>{const ee=B===new Date().getFullYear(),he=Yw({start:gp(new Date(B,0,1)),end:UN(new Date(B,0,1))});return h.jsxs("div",{className:"flex items-start mb-1",children:[h.jsx("div",{className:`w-16 text-xs font-medium text-right pr-2 py-1 border-r-2 border-gray-400 shadow-sm ${ee?"text-white font-bold bg-blue-600":"text-gray-700 bg-gray-100"}`,style:{height:`${w+E}px`,position:"sticky",left:"0",zIndex:25},children:B}),h.jsx("div",{className:"flex",children:Array.from({length:M},(xe,ye)=>{const te=he[ye];if(!te)return h.jsx("div",{style:{width:`${w}px`,height:`${w}px`,marginRight:`${E}px`}},ye);const Ae=Se(te),Xe=Jt(te),ot=Eo(te,new Date),An=te.getDay()===0||te.getDay()===6,Nt=`${te.getFullYear()}-${String(te.getMonth()+1).padStart(2,"0")}-${String(te.getDate()).padStart(2,"0")}`;if(te.getMonth()===4&&[10,11,15,16,20].includes(te.getDate())){const yt=Xe?r(Nt):null;console.log(`🎨 Rendering ${Nt}:`,{hasData:Xe,hasActualDiary:!!yt,diaryTitle:(yt==null?void 0:yt.title)||"No diary found",isSelected:Ae,year:te.getFullYear(),month:te.getMonth()+1,day:te.getDate()})}const Ne=Xe?r(Nt):null,at=w>=20;return h.jsxs("div",{ref:ot?N:void 0,className:`cursor-pointer transition-all duration-150 border relative overflow-hidden ${Ae?"bg-primary-600 border-primary-700 shadow-md z-30":Xe?"bg-primary-200 hover:bg-primary-300 border-primary-300":ot?"bg-yellow-400 hover:bg-yellow-500 border-yellow-500 shadow-sm":An?"bg-gray-100 hover:bg-gray-200 border-gray-200":"bg-white hover:bg-gray-100 border-gray-200"}`,style:{width:`${w}px`,height:`${w}px`,marginRight:`${E}px`},onClick:()=>ce(te),title:`${$e(te,"yyyy년 MM월 dd일")}${Ne?` - ${Ne.title}`:""}`,children:[at&&Ne&&h.jsxs("div",{className:"p-1 w-full h-full text-xs leading-tight",children:[h.jsx("div",{className:"font-medium text-gray-900 truncate text-[8px] mb-1",children:Ne.title}),w>=30&&h.jsx("div",{className:"text-gray-700 text-[6px] leading-none overflow-hidden",children:Ne.content.substring(0,Math.floor(w/3))}),w>=25&&Ne.mood&&h.jsx("div",{className:"absolute bottom-0 right-0 text-[8px]",children:{great:"😊",good:"😌",neutral:"😐",bad:"😞",terrible:"😢"}[Ne.mood]})]}),at&&!Ne&&w>=20&&h.jsx("div",{className:"p-1 text-[8px] text-gray-600 font-medium",children:$e(te,"d")})]},ye)})})]},B)})]})}),h.jsxs("div",{className:"absolute bottom-4 right-4 bg-white rounded-lg shadow-sm border border-gray-200 p-3",children:[h.jsx("div",{className:"text-xs font-medium text-gray-700 mb-2",children:"범례"}),h.jsxs("div",{className:"space-y-1",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-3 h-3 bg-primary-600 rounded-sm"}),h.jsx("span",{className:"text-xs text-gray-600",children:"선택됨"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-3 h-3 bg-primary-200 rounded-sm"}),h.jsx("span",{className:"text-xs text-gray-600",children:"일기 있음"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-3 h-3 bg-yellow-400 rounded-sm"}),h.jsx("span",{className:"text-xs text-gray-600",children:"오늘"})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("div",{className:"w-3 h-3 bg-gray-100 rounded-sm"}),h.jsx("span",{className:"text-xs text-gray-600",children:"주말"})]})]}),h.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200",children:h.jsxs("div",{className:"text-xs text-gray-500",children:["줌: 휠로 확대/축소",h.jsx("br",{}),"큰 줌에서 내용 표시"]})})]}),t&&h.jsxs("div",{className:"absolute bottom-4 left-4 bg-white rounded-lg shadow-sm border border-gray-200 p-3 max-w-xs",children:[h.jsx("div",{className:"text-sm font-medium text-gray-900",children:$e(t,"yyyy년 MM월 dd일")}),h.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[$e(t,"yyyy"),"년 ",Xi(t),"번째 날"]})]})]})}function WP({selectedDate:t,onDateSelect:e}){const{getDiaryByDate:n,diaryEntries:r,isUsingMockData:s}=ya(),[i,o]=x.useState(new Date),[l,u]=x.useState("month");x.useEffect(()=>{t||e(new Date)},[]);const c=x.useMemo(()=>{switch(l){case"month":return Yw({start:FN(i),end:VN(i)});case"year":const _=gp(i);return Array.from({length:12},(b,k)=>new Date(_.getFullYear(),k,1));case"all":return r.map(b=>new Date(b.date)).sort((b,k)=>k.getTime()-b.getTime());default:return[]}},[i,l]),p=()=>{l==="month"?o(new Date(i.getFullYear(),i.getMonth()-1,1)):l==="year"&&o(new Date(i.getFullYear()-1,0,1))},m=()=>{l==="month"?o(new Date(i.getFullYear(),i.getMonth()+1,1)):l==="year"&&o(new Date(i.getFullYear()+1,0,1))},g=x.useMemo(()=>{if(l!=="month")return[];const _=[],b=c[0],k=c[c.length-1],N=new Date(b);N.setDate(b.getDate()-b.getDay());const w=new Date(k);w.setDate(k.getDate()+(6-k.getDay()));let E=new Date(N);for(;E<=w;){const S=[];for(let O=0;O<7;O++){const L=new Date(E);L.getMonth()===b.getMonth()?S.push(L):S.push(null),E.setDate(E.getDate()+1)}_.push(S)}return _},[c,l]);return h.jsxs("div",{className:"w-full",children:[h.jsxs("div",{className:"flex items-center justify-between mb-6 bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[{key:"month",label:"월별"},{key:"year",label:"년별"},{key:"all",label:"전체"}].map(({key:_,label:b})=>h.jsx("button",{onClick:()=>u(_),className:`px-3 py-1 text-sm rounded-md transition-colors ${l===_?"bg-white text-blue-700 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:b},_))}),h.jsxs("div",{className:"text-lg font-semibold text-gray-900",children:[l==="month"&&$e(i,"yyyy년 M월"),l==="year"&&$e(i,"yyyy년"),l==="all"&&"전체 일기"]})]}),l!=="all"&&h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:p,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:h.jsx(Ed,{className:"w-5 h-5"})}),h.jsx("button",{onClick:m,className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:h.jsx(Hw,{className:"w-5 h-5"})}),h.jsx("button",{onClick:()=>o(new Date),className:"ml-2 px-3 py-1 text-sm bg-blue-100 text-blue-700 rounded hover:bg-blue-200 transition-colors",children:"오늘"})]})]}),h.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[l==="month"&&h.jsxs("div",{children:[h.jsx("div",{className:"grid grid-cols-7 bg-gray-50 border-b border-gray-200",children:["일","월","화","수","목","금","토"].map((_,b)=>h.jsx("div",{className:`p-3 text-center text-sm font-medium ${b===0?"text-red-600":b===6?"text-blue-600":"text-gray-700"}`,children:_},_))}),g.map((_,b)=>h.jsx("div",{className:"grid grid-cols-7 border-b border-gray-100 last:border-b-0",children:_.map((k,N)=>{const w=k?`${k.getFullYear()}-${String(k.getMonth()+1).padStart(2,"0")}-${String(k.getDate()).padStart(2,"0")}`:null,E=w?n(w):null,S=k?Eo(k,new Date):!1,O=k&&t?Eo(k,t):!1;return h.jsx("div",{className:`min-h-[120px] p-2 border-r border-gray-100 last:border-r-0 transition-colors ${k?O?"bg-blue-50 ring-2 ring-blue-500":S?"bg-yellow-50":E?"bg-green-50 hover:bg-green-100 cursor-pointer":"hover:bg-gray-50 cursor-pointer":"bg-gray-50"}`,onClick:()=>k&&e(k),children:k&&h.jsxs(h.Fragment,{children:[h.jsx("div",{className:`text-sm font-medium mb-1 ${S?"text-yellow-700":N===0?"text-red-600":N===6?"text-blue-600":"text-gray-700"}`,children:$e(k,"d")}),E&&h.jsxs("div",{className:"space-y-1",children:[h.jsx("div",{className:"text-xs font-medium text-gray-900 line-clamp-1",children:E.title}),h.jsx("div",{className:"text-xs text-gray-600 line-clamp-3",children:E.content}),h.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[E.mood&&h.jsx("span",{className:"text-xs",children:{great:"😊",good:"😌",neutral:"😐",bad:"😞",terrible:"😢"}[E.mood]}),E.photos.length>0&&h.jsxs("span",{className:"text-xs text-purple-600",children:["📷",E.photos.length]})]})]})]})},N)})},b))]}),l==="year"&&h.jsx("div",{className:"grid grid-cols-4 gap-px",children:c.map((_,b)=>{const k=r.filter(N=>{const w=new Date(N.date);return w.getFullYear()===_.getFullYear()&&w.getMonth()===_.getMonth()});return h.jsxs("div",{className:"p-4 border border-gray-100 hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>{o(_),u("month")},children:[h.jsx("div",{className:"text-sm font-medium text-gray-900 mb-2",children:$e(_,"M월")}),h.jsxs("div",{className:"text-xs text-gray-600 mb-2",children:[k.length,"개 기록"]}),k.slice(0,3).map((N,w)=>h.jsxs("div",{className:"text-xs text-gray-500 line-clamp-1 mb-1",children:["• ",N.title]},w))]},b)})}),l==="all"&&h.jsx("div",{className:"divide-y divide-gray-100",children:c.map((_,b)=>{const k=n(_.toISOString().split("T")[0]),N=t?Eo(_,t):!1;return h.jsx("div",{className:`p-4 cursor-pointer transition-colors hover:bg-gray-50 ${N?"bg-blue-50 ring-2 ring-blue-500":""}`,onClick:()=>e(_),children:h.jsxs("div",{className:"flex items-start justify-between",children:[h.jsxs("div",{className:"flex-1",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[h.jsx("div",{className:"text-sm font-medium text-gray-900",children:$e(_,"yyyy년 M월 d일")}),(k==null?void 0:k.mood)&&h.jsx("span",{className:"text-sm",children:{great:"😊",good:"😌",neutral:"😐",bad:"😞",terrible:"😢"}[k.mood]}),(k==null?void 0:k.photos.length)>0&&h.jsxs("span",{className:"text-xs bg-purple-100 text-purple-700 px-2 py-1 rounded-full",children:["📷 ",k.photos.length]})]}),k&&h.jsxs(h.Fragment,{children:[h.jsx("h3",{className:"text-base font-medium text-gray-900 mb-2",children:k.title}),h.jsx("p",{className:"text-sm text-gray-600 line-clamp-3 mb-2",children:k.content}),k.tags&&k.tags.length>0&&h.jsx("div",{className:"flex gap-1",children:k.tags.map(w=>h.jsxs("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded",children:["#",w]},w))})]})]}),h.jsx("div",{className:"text-xs text-gray-500 ml-4",children:k&&$e(new Date(k.createdAt),"HH:mm")})]})},b)})})]})]})}function HP({selectedDate:t,onDateChange:e}){const n=s=>{s.target.value?e(new Date(s.target.value)):e(null)},r=()=>{e(new Date)};return h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsxs("div",{className:"relative",children:[h.jsx(Xo,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400"}),h.jsx("input",{type:"date",value:t?$e(t,"yyyy-MM-dd"):"",onChange:n,className:"pl-10 pr-3 py-2 border border-gray-300 rounded-md text-sm focus:ring-2 focus:ring-primary-500 focus:border-primary-500"})]}),h.jsx("button",{onClick:r,className:"px-3 py-2 text-sm bg-gray-100 hover:bg-gray-200 text-gray-700 rounded-md transition-colors",children:"오늘"})]})}function qP({mode:t,onModeChange:e}){return h.jsxs("div",{className:"flex items-center bg-gray-100 rounded-lg p-1",children:[h.jsxs("button",{onClick:()=>e("timeline"),className:`flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ${t==="timeline"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[h.jsx(RN,{className:"w-4 h-4"}),"2D 뷰"]}),h.jsxs("button",{onClick:()=>e("table"),className:`flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ${t==="table"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[h.jsx(EN,{className:"w-4 h-4"}),"표 뷰"]}),h.jsxs("button",{onClick:()=>e("topic"),className:`flex items-center gap-2 px-3 py-2 rounded-md text-sm font-medium transition-colors ${t==="topic"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:[h.jsx(vN,{className:"w-4 h-4"}),"기전체"]})]})}function YP(){const t=ia(),{getDiaryByDate:e,getContextByDate:n}=ya(),[r,s]=x.useState(new Date),[i,o]=x.useState("table"),l=r?e($e(r,"yyyy-MM-dd")):null,u=r?n($e(r,"yyyy-MM-dd")):null;return h.jsxs("div",{className:"max-w-full",children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:i==="timeline"?"2D 타임라인":i==="table"?"표 뷰":"기전체 뷰"}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx(HP,{selectedDate:r,onDateChange:s}),h.jsx(qP,{mode:i,onModeChange:o})]})]}),h.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:i==="timeline"?h.jsx("div",{className:"p-4",children:h.jsx(zP,{selectedDate:r,onDateSelect:s})}):i==="table"?h.jsx(WP,{selectedDate:r,onDateSelect:s}):h.jsxs("div",{className:"text-center py-20 text-gray-500",children:[h.jsx("h3",{className:"text-lg font-medium mb-2",children:"기전체 뷰"}),h.jsx("p",{children:"토픽별 히스토리 뷰는 추후 구현될 예정입니다."})]})}),r&&h.jsxs("div",{className:"mt-6 bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-4",children:[h.jsx("h2",{className:"text-lg font-semibold",children:r.toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"long"})}),l&&h.jsx("span",{className:`text-xs px-3 py-1 rounded-full ${l.mood==="great"?"bg-green-100 text-green-700":l.mood==="good"?"bg-blue-100 text-blue-700":l.mood==="neutral"?"bg-gray-100 text-gray-700":l.mood==="bad"?"bg-yellow-100 text-yellow-700":l.mood==="terrible"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-700"}`,children:l.mood==="great"?"😊 Great":l.mood==="good"?"🙂 Good":l.mood==="neutral"?"😐 Neutral":l.mood==="bad"?"😕 Bad":l.mood==="terrible"?"😢 Terrible":"😐 No mood"})]}),h.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"개인 기록"}),h.jsx("div",{className:"space-y-3",children:l?h.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsx("h4",{className:"font-medium text-gray-900",children:l.title}),h.jsxs("span",{className:"text-xs text-gray-500",children:[l.wordCount,"자"]})]}),h.jsx("p",{className:"text-sm text-gray-700 line-clamp-3 mb-3",children:l.content}),h.jsxs("div",{className:"flex items-center justify-between text-sm",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("span",{className:"text-gray-600",children:["사진: ",h.jsxs("span",{className:"font-medium",children:[l.photos.length,"장"]})]}),l.tags.length>0&&h.jsx("div",{className:"flex gap-1",children:l.tags.slice(0,2).map((c,p)=>h.jsxs("span",{className:"px-2 py-1 bg-primary-100 text-primary-700 rounded text-xs",children:["#",c]},p))})]}),h.jsx("button",{onClick:()=>t(`/diary/${l.date}`),className:"text-primary-600 hover:text-primary-700 font-medium transition-colors",children:"자세히 보기 →"})]})]}):h.jsxs("div",{className:"space-y-2 text-sm",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-gray-600",children:"일기"}),h.jsx("span",{className:"text-gray-400",children:"미작성"})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-gray-600",children:"사진"}),h.jsx("span",{className:"text-gray-400",children:"0장"})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-gray-600",children:"운동"}),h.jsx("span",{className:"text-gray-400",children:"기록 없음"})]})]})})]}),h.jsxs("div",{children:[h.jsx("h3",{className:"font-medium text-gray-900 mb-3",children:"맥락 정보"}),h.jsx("div",{className:"space-y-3",children:u?h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[h.jsxs("div",{className:"flex justify-between items-center mb-1",children:[h.jsx("span",{className:"text-sm font-medium text-gray-700",children:"날씨"}),h.jsx("span",{className:"text-xs text-blue-600",children:u.weather.condition})]}),h.jsxs("div",{className:"text-sm text-gray-600",children:[u.weather.temperature,"°C, 습도 ",u.weather.humidity,"%"]})]}),u.news.length>0&&h.jsxs("div",{className:"bg-yellow-50 rounded-lg p-3",children:[h.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"주요 뉴스"}),h.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:u.news.slice(0,2).map((c,p)=>h.jsxs("li",{className:"text-xs",children:["• ",c]},p))})]}),u.events.length>0&&h.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[h.jsx("div",{className:"text-sm font-medium text-gray-700 mb-2",children:"특별한 일"}),h.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:u.events.map((c,p)=>h.jsxs("li",{className:"text-xs",children:["🎉 ",c]},p))})]})]}):h.jsxs("div",{className:"space-y-2 text-sm",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-gray-600",children:"날씨"}),h.jsx("span",{className:"text-gray-400",children:"정보 없음"})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-gray-600",children:"주요 뉴스"}),h.jsx("span",{className:"text-gray-400",children:"정보 없음"})]})]})})]})]})]})]})}function KP({content:t,onChange:e,placeholder:n}){const[r,s]=x.useState(!1),i=_=>{e(_.target.value)},o=()=>{s(!0)},l=()=>{setTimeout(()=>{s(!1)},200)},u=(_,b="")=>{const k=document.querySelector("textarea"),N=k.selectionStart,w=k.selectionEnd,E=t,S=E.substring(0,N)+_+E.substring(N,w)+b+E.substring(w);e(S),setTimeout(()=>{k.focus(),k.setSelectionRange(N+_.length,w+_.length)},0)},c=()=>u("**","**"),p=()=>u("*","*"),m=()=>u("- "),g=()=>u("1. ");return h.jsxs("div",{className:"border border-gray-300 rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-primary-500 focus-within:border-primary-500",children:[r&&h.jsxs("div",{className:"flex items-center gap-1 p-2 bg-gray-50 border-b border-gray-200",children:[h.jsx("button",{type:"button",onClick:c,className:"p-2 hover:bg-gray-200 rounded-md",title:"굵게",children:h.jsx(WA,{className:"w-4 h-4"})}),h.jsx("button",{type:"button",onClick:p,className:"p-2 hover:bg-gray-200 rounded-md",title:"기울임",children:h.jsx(oN,{className:"w-4 h-4"})}),h.jsx("div",{className:"w-px h-6 bg-gray-300 mx-1"}),h.jsx("button",{type:"button",onClick:m,className:"p-2 hover:bg-gray-200 rounded-md",title:"목록",children:h.jsx(cN,{className:"w-4 h-4"})}),h.jsx("button",{type:"button",onClick:g,className:"p-2 hover:bg-gray-200 rounded-md",title:"번호 목록",children:h.jsx(dN,{className:"w-4 h-4"})})]}),h.jsx("textarea",{value:t,onChange:i,onFocus:o,onBlur:l,placeholder:n||"오늘 하루를 기록해보세요...",className:"w-full min-h-[300px] p-4 border-none resize-none focus:outline-none",style:{fontFamily:"inherit"}}),h.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 border-t border-gray-200 text-sm text-gray-600",children:[h.jsxs("div",{children:["글자 수: ",t.length]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("span",{children:"자동 저장됨"}),h.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"})]})]})]})}function GP({photos:t,onPhotosChange:e,maxPhotos:n=10}){const[r,s]=x.useState(!1),i=x.useRef(null),o=_=>{const b=Array.from(_).filter(k=>k.type.startsWith("image/")&&t.length+Array.from(_).length<=n);b.length>0&&e([...t,...b])},l=_=>{_.preventDefault(),s(!1),_.dataTransfer.files&&o(_.dataTransfer.files)},u=_=>{_.preventDefault(),s(!0)},c=()=>{s(!1)},p=_=>{_.target.files&&o(_.target.files)},m=_=>{const b=t.filter((k,N)=>N!==_);e(b)},g=()=>{var _;(_=i.current)==null||_.click()};return h.jsxs("div",{className:"space-y-3",children:[h.jsxs("div",{className:`border-2 border-dashed rounded-lg p-4 text-center cursor-pointer transition-colors ${r?"border-primary-400 bg-primary-50":"border-gray-300 hover:border-gray-400"}`,onDrop:l,onDragOver:u,onDragLeave:c,onClick:g,children:[h.jsx(qw,{className:"w-8 h-8 text-gray-400 mx-auto mb-2"}),h.jsx("p",{className:"text-sm text-gray-600",children:"사진을 드래그하거나 클릭해서 업로드"}),h.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["최대 ",n,"장까지 업로드 가능"]})]}),h.jsx("input",{ref:i,type:"file",accept:"image/*",multiple:!0,onChange:p,className:"hidden"}),t.length>0&&h.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.map((_,b)=>h.jsxs("div",{className:"relative group",children:[h.jsx("img",{src:URL.createObjectURL(_),alt:`업로드된 사진 ${b+1}`,className:"w-full h-20 object-cover rounded-lg"}),h.jsx("button",{onClick:()=>m(b),className:"absolute top-1 right-1 p-1 bg-red-500 text-white rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:h.jsx(mp,{className:"w-3 h-3"})}),h.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 text-white text-xs p-1 rounded-b-lg truncate",children:_.name})]},b)),t.length<n&&h.jsx("button",{onClick:g,className:"h-20 border-2 border-dashed border-gray-300 rounded-lg flex items-center justify-center hover:border-gray-400 transition-colors",children:h.jsx(mN,{className:"w-6 h-6 text-gray-400"})})]}),h.jsxs("div",{className:"text-xs text-gray-500 text-center",children:[t.length," / ",n," 장"]})]})}function QP(){var L;const{getDiaryByDate:t,getContextByDate:e,isUsingMockData:n}=ya(),{date:r}=CT(),s=ia(),[i,o]=x.useState(new Date),[l,u]=x.useState(""),[c,p]=x.useState([]),[m,g]=x.useState(""),[_,b]=x.useState(null);x.useEffect(()=>{if(r){const M=new Date(r);isNaN(M.getTime())||o(M)}},[r]),x.useEffect(()=>{const M=i.toISOString().split("T")[0],T=t(M);T?(g(T.title),u(T.content),p([])):(g(""),u(""),p([]))},[i]);const k=async()=>{console.log("Saving diary:",{date:i,content:l,photos:c}),alert("일기가 저장되었습니다!")},N=M=>{o(M);const T=$e(M,"yyyy-MM-dd");s(`/diary/${T}`)},w=t(i.toISOString().split("T")[0]),E=M=>{b(M)},S=()=>{b(null)},O=M=>{!(w!=null&&w.photos)||_===null||b(M==="prev"?_>0?_-1:w.photos.length-1:_<w.photos.length-1?_+1:0)};return x.useEffect(()=>{const M=T=>{if(_!==null)switch(T.key){case"Escape":S();break;case"ArrowLeft":O("prev");break;case"ArrowRight":O("next");break}};return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[_]),h.jsxs("div",{className:"max-w-4xl mx-auto",children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsxs("button",{onClick:()=>s(-1),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900",children:[h.jsx(Ed,{className:"w-5 h-5"}),"돌아가기"]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx(Xo,{className:"w-5 h-5 text-gray-600"}),h.jsx("input",{type:"date",value:$e(i,"yyyy-MM-dd"),onChange:M=>N(new Date(M.target.value)),className:"border border-gray-300 rounded-md px-3 py-1 text-sm"})]}),h.jsx("button",{onClick:k,className:"btn-primary",children:"저장"})]})]}),h.jsxs("div",{className:"card mb-6",children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:$e(i,"yyyy년 M월 d일")}),h.jsx("p",{className:"text-gray-600 mb-2",children:$e(i,"EEEE")}),m&&h.jsx("h2",{className:"text-lg font-medium text-blue-700 mt-2",children:m})]}),h.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[h.jsx("div",{className:"lg:col-span-2",children:h.jsxs("div",{className:"card",children:[h.jsx("h2",{className:"text-lg font-semibold mb-4",children:"일기 작성"}),h.jsx(KP,{content:l,onChange:u,placeholder:"오늘 하루는 어땠나요? 자유롭게 기록해보세요..."})]})}),h.jsxs("div",{className:"space-y-6",children:[w&&w.photos&&w.photos.length>0&&h.jsxs("div",{className:"card",children:[h.jsxs("h3",{className:"font-medium mb-3",children:["일기 사진 (",w.photos.length,"장)"]}),h.jsx("div",{className:"grid grid-cols-1 gap-3",children:w.photos.map((M,T)=>h.jsxs("div",{className:"relative group",children:[h.jsx("img",{src:M,alt:`일기 사진 ${T+1}`,className:"w-full h-32 object-cover rounded-lg border border-gray-200 shadow-sm hover:shadow-md transition-all cursor-pointer",onClick:()=>E(T)}),h.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-20 transition-all rounded-lg flex items-center justify-center opacity-0 group-hover:opacity-100 pointer-events-none",children:h.jsx("span",{className:"text-white text-sm font-medium bg-black bg-opacity-50 px-2 py-1 rounded",children:"크게 보기"})})]},T))})]}),h.jsxs("div",{className:"card",children:[h.jsx("h3",{className:"font-medium mb-3",children:"새 사진 추가"}),h.jsx(GP,{photos:c,onPhotosChange:p})]}),h.jsxs("div",{className:"card",children:[h.jsx("h3",{className:"font-medium mb-3",children:"오늘의 맥락"}),h.jsxs("div",{className:"space-y-3 text-sm",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-gray-600",children:"날씨:"}),h.jsx("span",{className:"ml-2",children:(w==null?void 0:w.weather)||"로딩 중..."})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-gray-600",children:"기분:"}),h.jsx("span",{className:"ml-2",children:w!=null&&w.mood?{great:"😊 최고",good:"😌 좋음",neutral:"😐 보통",bad:"😞 안좋음",terrible:"😢 최악"}[w.mood]||"😐 보통":"기록 없음"})]}),h.jsxs("div",{children:[h.jsx("span",{className:"text-gray-600",children:"태그:"}),h.jsx("div",{className:"mt-1",children:((L=w==null?void 0:w.tags)==null?void 0:L.map(M=>h.jsxs("span",{className:"inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full mr-1 mb-1",children:["#",M]},M)))||h.jsx("span",{className:"text-gray-400",children:"태그 없음"})})]})]})]}),h.jsxs("div",{className:"card",children:[h.jsx("h3",{className:"font-medium mb-3",children:"통계"}),h.jsxs("div",{className:"space-y-2 text-sm",children:[h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-gray-600",children:"작성한 글자 수"}),h.jsx("span",{className:"font-medium",children:l.length})]}),h.jsxs("div",{className:"flex justify-between",children:[h.jsx("span",{className:"text-gray-600",children:"첨부 사진"}),h.jsxs("span",{className:"font-medium",children:[c.length,"장"]})]})]})]})]})]}),_!==null&&(w==null?void 0:w.photos)&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",onClick:S,children:h.jsxs("div",{className:"relative max-w-4xl max-h-screen p-4",onClick:M=>M.stopPropagation(),children:[h.jsx("button",{onClick:S,className:"absolute top-4 right-4 z-10 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-75 transition-all",children:h.jsx(mp,{className:"w-6 h-6"})}),w.photos.length>1&&h.jsxs(h.Fragment,{children:[h.jsx("button",{onClick:M=>{M.stopPropagation(),O("prev")},className:"absolute left-4 top-1/2 transform -translate-y-1/2 z-10 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-75 transition-all",children:h.jsx(Ed,{className:"w-6 h-6"})}),h.jsx("button",{onClick:M=>{M.stopPropagation(),O("next")},className:"absolute right-4 top-1/2 transform -translate-y-1/2 z-10 bg-black bg-opacity-50 text-white p-3 rounded-full hover:bg-opacity-75 transition-all",children:h.jsx(Hw,{className:"w-6 h-6"})})]}),h.jsx("img",{src:w.photos[_],alt:`일기 사진 ${_+1}`,className:"max-w-full max-h-full object-contain rounded-lg"}),h.jsx("div",{className:"absolute bottom-4 left-4 right-4 bg-black bg-opacity-50 text-white p-3 rounded-lg",children:h.jsxs("div",{className:"text-center",children:[h.jsxs("div",{className:"text-sm font-medium",children:[_+1," / ",w.photos.length]}),h.jsxs("div",{className:"text-xs text-gray-300 mt-1",children:[$e(i,"yyyy년 M월 d일")," - ",m]}),h.jsx("div",{className:"text-xs text-gray-400 mt-2",children:"ESC: 닫기 | ←→: 이전/다음 사진"})]})})]})})]})}const XP=({userProfile:t,onProfileUpdate:e})=>{const{user:n}=ws(),[r,s]=x.useState(!1),[i,o]=x.useState(!1),[l,u]=x.useState({displayName:(t==null?void 0:t.displayName)||"",bio:(t==null?void 0:t.bio)||""}),c=async()=>{if(!(!n||!t)){o(!0);try{const m={displayName:l.displayName,bio:l.bio,updatedAt:new Date};await AA(n.uid,m);const g={...t,...m};e(g),s(!1)}catch(m){console.error("프로필 업데이트 실패:",m),alert("프로필 업데이트에 실패했습니다.")}finally{o(!1)}}},p=()=>{u({displayName:(t==null?void 0:t.displayName)||"",bio:(t==null?void 0:t.bio)||""}),s(!1)};return h.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[h.jsxs("div",{className:"flex items-center justify-between mb-6",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(kN,{className:"w-6 h-6 text-blue-600"}),h.jsx("h2",{className:"text-lg font-semibold",children:"프로필"})]}),r?h.jsxs("div",{className:"flex gap-2",children:[h.jsxs("button",{onClick:c,disabled:i,className:"flex items-center gap-1 bg-blue-600 text-white px-3 py-1 rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors",children:[h.jsx(XA,{className:"w-4 h-4"}),i?"저장 중...":"저장"]}),h.jsxs("button",{onClick:p,disabled:i,className:"flex items-center gap-1 bg-gray-500 text-white px-3 py-1 rounded-md hover:bg-gray-600 disabled:opacity-50 transition-colors",children:[h.jsx(mp,{className:"w-4 h-4"}),"취소"]})]}):h.jsx("button",{onClick:()=>s(!0),className:"text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"편집"})]}),h.jsxs("div",{className:"flex items-start gap-6",children:[h.jsxs("div",{className:"flex-shrink-0",children:[n!=null&&n.photoURL?h.jsx("img",{src:n.photoURL,alt:n.displayName||"User",className:"w-20 h-20 rounded-full object-cover"}):h.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-full flex items-center justify-center",children:h.jsx(qw,{className:"w-8 h-8 text-gray-400"})}),r&&h.jsx("button",{className:"mt-2 text-xs text-blue-600 hover:text-blue-700",children:"사진 변경"})]}),h.jsxs("div",{className:"flex-1 space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"이름"}),r?h.jsx("input",{type:"text",value:l.displayName,onChange:m=>u(g=>({...g,displayName:m.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"이름을 입력하세요"}):h.jsx("p",{className:"text-gray-900",children:(t==null?void 0:t.displayName)||"이름 없음"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"이메일"}),h.jsx("p",{className:"text-gray-600",children:n==null?void 0:n.email}),h.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"이메일은 Google 계정에서 관리됩니다."})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"소개"}),r?h.jsx("textarea",{value:l.bio,onChange:m=>u(g=>({...g,bio:m.target.value})),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none",rows:3,placeholder:"자기소개를 입력하세요"}):h.jsx("p",{className:"text-gray-600",children:(t==null?void 0:t.bio)||"소개가 없습니다."})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"가입일"}),h.jsx("p",{className:"text-gray-600",children:t!=null&&t.createdAt?new Date(t.createdAt).toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"}):"정보 없음"})]})]})]})]})};function JP(){const{user:t}=ws(),[e,n]=x.useState(null),[r,s]=x.useState({theme:"light",notifications:!0,autoBackup:!0,syncSNS:!1}),[i,o]=x.useState(!1),[l,u]=x.useState("");x.useEffect(()=>{(async()=>{if(t){o(!0);try{const _=await bA(t.uid);_&&(n(_),s(_.settings||r))}catch(_){console.error("프로필 로드 실패:",_)}finally{o(!1)}}})()},[t]);const c=g=>{n(g),u("프로필이 성공적으로 업데이트되었습니다."),setTimeout(()=>u(""),3e3)},p=async()=>{try{await Vw()}catch(g){console.error("로그아웃 실패:",g)}},m=g=>{switch(g){case"Google":return t?{connected:!0,status:"연결됨"}:{connected:!1,status:"연결 안됨"};default:return{connected:!1,status:"연결 안됨"}}};return i?h.jsx("div",{className:"max-w-4xl mx-auto flex items-center justify-center py-12",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),h.jsx("p",{className:"text-gray-600",children:"프로필 로딩 중..."})]})}):h.jsxs("div",{className:"max-w-4xl mx-auto",children:[h.jsxs("div",{className:"flex items-center justify-between mb-8",children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"설정"}),l&&h.jsx("div",{className:"bg-green-50 text-green-700 px-4 py-2 rounded-lg border border-green-200",children:l})]}),h.jsxs("div",{className:"space-y-6",children:[h.jsx(XP,{userProfile:e,onProfileUpdate:c}),h.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[h.jsx($A,{className:"w-6 h-6 text-blue-600"}),h.jsx("h2",{className:"text-lg font-semibold",children:"앱 설정"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-medium",children:"테마"}),h.jsx("p",{className:"text-sm text-gray-600",children:"앱의 색상 테마를 선택하세요"})]}),h.jsxs("select",{value:r.theme,onChange:g=>s(_=>({..._,theme:g.target.value})),className:"border border-gray-300 rounded-md px-3 py-1 focus:ring-2 focus:ring-blue-500",children:[h.jsx("option",{value:"light",children:"라이트"}),h.jsx("option",{value:"dark",children:"다크"})]})]}),h.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-medium",children:"푸시 알림"}),h.jsx("p",{className:"text-sm text-gray-600",children:"일기 작성 리마인더 및 기타 알림"})]}),h.jsx("button",{onClick:()=>s(g=>({...g,notifications:!g.notifications})),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${r.notifications?"bg-blue-600":"bg-gray-200"}`,children:h.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.notifications?"translate-x-6":"translate-x-1"}`})})]}),h.jsxs("div",{className:"flex items-center justify-between py-3",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-medium",children:"자동 백업"}),h.jsx("p",{className:"text-sm text-gray-600",children:"데이터를 클라우드에 자동으로 백업"})]}),h.jsx("button",{onClick:()=>s(g=>({...g,autoBackup:!g.autoBackup})),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${r.autoBackup?"bg-blue-600":"bg-gray-200"}`,children:h.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${r.autoBackup?"translate-x-6":"translate-x-1"}`})})]})]})]}),h.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[h.jsx(lN,{className:"w-6 h-6 text-blue-600"}),h.jsx("h2",{className:"text-lg font-semibold",children:"계정 연동"})]}),h.jsx("div",{className:"space-y-3",children:[{name:"Google",description:"Google 계정으로 로그인"},{name:"Facebook",description:"Facebook 포스트 동기화 (준비 중)"},{name:"Instagram",description:"Instagram 사진 동기화 (준비 중)"},{name:"KakaoTalk",description:"카카오톡 메시지 분석 (준비 중)"}].map(g=>{const _=m(g.name);return h.jsxs("div",{className:"flex items-center justify-between py-3 border-b border-gray-100",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"font-medium",children:g.name}),h.jsx("p",{className:"text-sm text-gray-600",children:g.description})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[_.connected?h.jsx(GA,{className:"w-5 h-5 text-green-500"}):h.jsx(AN,{className:"w-5 h-5 text-gray-400"}),h.jsx("span",{className:`text-sm px-2 py-1 rounded ${_.connected?"text-green-700 bg-green-100":"text-gray-600 bg-gray-100"}`,children:_.status})]})]},g.name)})})]}),h.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[h.jsx(tN,{className:"w-6 h-6 text-blue-600"}),h.jsx("h2",{className:"text-lg font-semibold",children:"데이터 관리"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsx("button",{className:"w-full sm:w-auto bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"데이터 내보내기"}),h.jsx("button",{className:"w-full sm:w-auto bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors ml-0 sm:ml-3",children:"지금 백업하기"}),h.jsxs("div",{className:"text-sm text-gray-600 mt-2",children:[h.jsx("p",{children:"• 데이터 내보내기: 모든 일기와 사진을 JSON 형태로 다운로드"}),h.jsx("p",{children:"• 백업: 클라우드에 현재 데이터 상태 저장"})]})]})]}),h.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[h.jsx(_N,{className:"w-6 h-6 text-blue-600"}),h.jsx("h2",{className:"text-lg font-semibold",children:"계정 관리"})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("button",{onClick:p,className:"flex items-center gap-2 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors",children:[h.jsx($w,{className:"w-4 h-4"}),"로그아웃"]}),h.jsxs("div",{className:"border-t pt-4",children:[h.jsx("h3",{className:"font-medium text-red-600 mb-3",children:"위험 구역"}),h.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"아래 작업은 되돌릴 수 없습니다. 신중하게 진행해 주세요."}),h.jsxs("button",{className:"flex items-center gap-2 text-red-600 hover:text-red-700 border border-red-300 px-4 py-2 rounded-lg hover:bg-red-50 transition-colors",children:[h.jsx(TN,{className:"w-4 h-4"}),"모든 데이터 삭제"]})]})]})]})]})]})}const ZP=[{id:1,title:"프로젝트 초기 설정 및 아키텍처 구성",description:"Vite + React + TypeScript 기반 웹 애플리케이션 설정",status:"completed",progress:100,phase:"Phase 1: MVP 핵심 기능",completedDate:"2025-05-25"},{id:2,title:"백엔드 인프라 및 데이터베이스 설계",description:"Firebase 연동 및 Firestore 데이터 모델 최적화",status:"in-progress",progress:50,phase:"Phase 1: MVP 핵심 기능",subtasks:[{id:"2.1",title:"Firestore 데이터 모델 최적화",status:"completed"},{id:"2.2",title:"쿼리 최적화 및 인덱싱 전략",status:"completed"},{id:"2.3",title:"미디어 저장소 및 처리 파이프라인",status:"pending"},{id:"2.4",title:"사용자 인증 시스템 구현",status:"pending"}]},{id:3,title:"사용자 인증 및 계정 관리 시스템 구현",description:"Firebase Authentication, Google 로그인 연동, 프로필 관리",status:"completed",progress:100,phase:"Phase 1: MVP 핵심 기능",completedDate:"2025-05-25"},{id:4,title:"기본 일기 작성 및 조회 기능 개발",description:"실제 Firebase 데이터 저장/불러오기, CRUD 기능",status:"completed",progress:100,phase:"Phase 1: MVP 핵심 기능",completedDate:"2025-05-25"},{id:5,title:"사진 업로드 및 관리 기능 구현",description:"Firebase Storage 연동, 이미지 업로드/갤러리",status:"completed",progress:100,phase:"Phase 1: MVP 핵심 기능",completedDate:"2025-05-25"},{id:6,title:"2D 달력 내비게이션 시스템 개발",description:"수평(월일) × 수직(연도) 2D 타임라인",status:"completed",progress:100,phase:"Phase 1: MVP 핵심 기능",completedDate:"2025-05-25"},{id:7,title:"날짜별 상세 뷰 개발",description:"선택된 날짜의 모든 기록 레이어 통합 뷰",status:"completed",progress:100,phase:"Phase 1: MVP 핵심 기능",completedDate:"2025-05-25"},{id:8,title:"기본 검색 기능 구현",description:"전체 일기 내용 검색, 날짜 범위 필터링",status:"pending",progress:0,phase:"Phase 1: MVP 핵심 기능"},{id:9,title:"SNS 데이터 수집 시스템 개발",description:"Instagram, Twitter API 연동, 소셜 미디어 포스트 수집",status:"pending",progress:0,phase:"Phase 2: 데이터 연동"},{id:10,title:"날씨 및 뉴스 API 연동 구현",description:"기상청 API, 뉴스 API 연동으로 맥락 정보 수집",status:"pending",progress:0,phase:"Phase 2: 데이터 연동"},{id:23,title:"2D 타임라인 '오늘' 버튼 중앙 정렬 버그 수정",description:"디폴트 화면 위치 개선, 년도 표시 UI 개선",status:"completed",progress:100,phase:"버그 수정",completedDate:"2025-05-25"},{id:24,title:"고급 사진 시스템 개발 및 통합",description:"3D 공간 시간 여행, AI 기반 추억 큐레이션",status:"pending",progress:0,phase:"Phase 4: 미래 기능"}],Hr={totalTasks:24,completedTasks:7,inProgressTasks:1,pendingTasks:16,overallProgress:42,phases:[{name:"Phase 1: MVP 핵심 기능",tasks:8,completed:7,progress:88},{name:"Phase 2: 데이터 연동",tasks:4,completed:0,progress:0},{name:"Phase 3: 고급 기능",tasks:7,completed:0,progress:0},{name:"Phase 4: 인프라/배포",tasks:3,completed:0,progress:0}]},e4=t=>{switch(t){case"completed":return"bg-green-100 text-green-800 border-green-200";case"in-progress":return"bg-blue-100 text-blue-800 border-blue-200";case"pending":return"bg-gray-100 text-gray-600 border-gray-200";default:return"bg-gray-100 text-gray-600 border-gray-200"}},X0=t=>{switch(t){case"completed":return"✅";case"in-progress":return"🔄";case"pending":return"⏳";default:return"⏳"}},th=({progress:t,status:e})=>{const n=()=>{switch(e){case"completed":return"bg-green-500";case"in-progress":return"bg-blue-500";default:return"bg-gray-300"}};return h.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:h.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${n()}`,style:{width:`${t}%`}})})},t4=({tasks:t})=>{const e=t.reduce((n,r)=>(n[r.phase]||(n[r.phase]=[]),n[r.phase].push(r),n),{});return h.jsxs("div",{className:"max-w-4xl mx-auto p-6",children:[h.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-8",children:[h.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"ME.STORY 개발 진행 상황"}),h.jsxs("div",{className:"mb-6",children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("span",{className:"text-lg font-semibold text-gray-700",children:"전체 진행률"}),h.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:[Hr.overallProgress,"%"]})]}),h.jsx(th,{progress:Hr.overallProgress,status:"in-progress"})]}),h.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[h.jsxs("div",{className:"bg-green-50 rounded-lg p-4 text-center border border-green-200",children:[h.jsx("div",{className:"text-2xl font-bold text-green-600",children:Hr.completedTasks}),h.jsx("div",{className:"text-sm text-green-700",children:"완료된 Task"})]}),h.jsxs("div",{className:"bg-blue-50 rounded-lg p-4 text-center border border-blue-200",children:[h.jsx("div",{className:"text-2xl font-bold text-blue-600",children:Hr.inProgressTasks}),h.jsx("div",{className:"text-sm text-blue-700",children:"진행 중인 Task"})]}),h.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 text-center border border-gray-200",children:[h.jsx("div",{className:"text-2xl font-bold text-gray-600",children:Hr.pendingTasks}),h.jsx("div",{className:"text-sm text-gray-700",children:"대기 중인 Task"})]}),h.jsxs("div",{className:"bg-purple-50 rounded-lg p-4 text-center border border-purple-200",children:[h.jsx("div",{className:"text-2xl font-bold text-purple-600",children:Hr.totalTasks}),h.jsx("div",{className:"text-sm text-purple-700",children:"전체 Task"})]})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Hr.phases.map((n,r)=>h.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border",children:[h.jsxs("div",{className:"flex justify-between items-center mb-2",children:[h.jsx("span",{className:"font-medium text-gray-700",children:n.name}),h.jsxs("span",{className:"text-sm text-gray-600",children:[n.completed,"/",n.tasks]})]}),h.jsx(th,{progress:n.progress,status:n.progress===100?"completed":n.progress>0?"in-progress":"pending"})]},r))})]}),Object.entries(e).map(([n,r])=>h.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 mb-6",children:[h.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:n}),h.jsx("div",{className:"space-y-4",children:r.map(s=>h.jsxs("div",{className:`border rounded-lg p-4 ${e4(s.status)}`,children:[h.jsxs("div",{className:"flex items-start justify-between mb-2",children:[h.jsxs("div",{className:"flex items-center space-x-3",children:[h.jsx("span",{className:"text-xl",children:X0(s.status)}),h.jsxs("div",{children:[h.jsxs("h4",{className:"font-semibold",children:["#",s.id,". ",s.title]}),h.jsx("p",{className:"text-sm opacity-80 mt-1",children:s.description})]})]}),h.jsxs("div",{className:"text-right",children:[h.jsxs("div",{className:"font-bold text-lg",children:[s.progress,"%"]}),s.completedDate&&h.jsxs("div",{className:"text-xs opacity-70",children:["완료: ",s.completedDate]})]})]}),h.jsx("div",{className:"mb-3",children:h.jsx(th,{progress:s.progress,status:s.status})}),s.subtasks&&s.subtasks.length>0&&h.jsxs("div",{className:"mt-3 pl-6 border-l-2 border-gray-300",children:[h.jsx("div",{className:"text-sm font-medium text-gray-600 mb-2",children:"서브태스크:"}),s.subtasks.map(i=>h.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[h.jsx("span",{className:"text-sm",children:X0(i.status)}),h.jsxs("span",{className:"text-sm",children:[i.id,". ",i.title]})]},i.id))]})]},s.id))})]},n))]})},n4=()=>{const[t,e]=x.useState(!1),[n,r]=x.useState(null),[s,i]=x.useState(!1),[o,l]=x.useState(null),u=ia(),{setDemoMode:c}=ws();x.useEffect(()=>{fp()&&l(CA())},[]);const p=async()=>{var _,b;e(!0),r(null);try{await Lw()&&(c(!1),u("/"))}catch(k){console.error("Google 로그인 실패:",k);let N="로그인에 실패했습니다.";k.code==="auth/popup-blocked"?N="팝업이 차단되었습니다. 팝업을 허용하거나 다른 브라우저를 사용해 주세요.":k.code==="auth/popup-closed-by-user"?N="로그인이 취소되었습니다.":(_=k.message)!=null&&_.includes("disallowed_useragent")||(b=k.message)!=null&&b.includes("403")?N="현재 브라우저에서는 로그인이 제한됩니다. Chrome, Safari, Firefox 등의 기본 브라우저를 사용해 주세요.":k.code==="auth/network-request-failed"&&(N="네트워크 연결을 확인해 주세요."),r(N)}finally{e(!1)}},m=()=>{i(!s)},g=()=>{c(!0),u("/")};return s?h.jsxs("div",{className:"min-h-screen bg-gray-50",children:[h.jsx("div",{className:"bg-white shadow-sm border-b",children:h.jsx("div",{className:"max-w-4xl mx-auto px-6 py-4",children:h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:"ME.STORY 개발 진행 상황"}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{onClick:g,className:"px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg",children:"🚀 데모 체험하기"}),h.jsx("button",{onClick:()=>i(!1),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors",children:"로그인 페이지로 돌아가기"})]})]})})}),h.jsx("div",{className:"py-8",children:h.jsx(t4,{tasks:ZP})})]}):h.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center p-4",children:h.jsxs("div",{className:"max-w-md w-full",children:[h.jsxs("div",{className:"text-center mb-8",children:[h.jsx("div",{className:"w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl mx-auto mb-4 flex items-center justify-center",children:h.jsx("span",{className:"text-3xl text-white font-bold",children:"ME"})}),h.jsx("h1",{className:"text-4xl font-bold text-gray-800 mb-2",children:"ME.STORY"}),h.jsx("p",{className:"text-gray-600 text-lg",children:"100년을 기록하는 개인 아카이브"}),h.jsx("p",{className:"text-sm text-gray-500 mt-2",children:'특정 날짜의 "해상도"를 최대한 높여, 개인 기록과 시대적 맥락을 함께 제공하는 장기 일기 앱'})]}),h.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[h.jsx("h2",{className:"text-2xl font-semibold text-center text-gray-800 mb-6",children:"시작하기"}),o&&h.jsx("div",{className:"bg-yellow-50 border border-yellow-200 text-yellow-800 px-4 py-3 rounded-lg mb-4",children:h.jsxs("div",{className:"flex items-start",children:[h.jsx("div",{className:"flex-shrink-0",children:h.jsx("svg",{className:"h-5 w-5 text-yellow-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:h.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),h.jsx("div",{className:"ml-3",children:h.jsx("p",{className:"text-sm",children:o})})]})}),n&&h.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg mb-4",children:n}),h.jsx("button",{onClick:p,disabled:t,className:"w-full bg-white border-2 border-gray-300 rounded-lg px-4 py-3 flex items-center justify-center space-x-3 hover:bg-gray-50 hover:border-gray-400 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed mb-4",children:t?h.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-gray-900"}):h.jsxs(h.Fragment,{children:[h.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[h.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),h.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),h.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),h.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),h.jsx("span",{className:"text-gray-700 font-medium",children:"Google로 로그인"})]})}),h.jsxs("div",{className:"relative my-6",children:[h.jsx("div",{className:"absolute inset-0 flex items-center",children:h.jsx("div",{className:"w-full border-t border-gray-300"})}),h.jsx("div",{className:"relative flex justify-center text-sm",children:h.jsx("span",{className:"px-2 bg-white text-gray-500",children:"또는"})})]}),h.jsx("button",{onClick:m,className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg px-4 py-3 font-medium hover:from-blue-600 hover:to-purple-700 transition-all duration-200",children:"🚀 둘러보기 (개발 진행 상황 보기)"}),h.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"둘러보기를 클릭하면 현재 개발 중인 기능들과 진행 상황을 확인할 수 있습니다."})]}),h.jsx("div",{className:"text-center mt-8 text-sm text-gray-500",children:h.jsxs("div",{className:"bg-white/70 backdrop-blur rounded-lg p-4",children:[h.jsx("h3",{className:"font-semibold text-gray-700 mb-2",children:"ME.STORY의 특별함"}),h.jsxs("ul",{className:"space-y-1 text-xs",children:[h.jsx("li",{children:"📅 2D 타임라인으로 시간을 직관적으로 탐색"}),h.jsx("li",{children:"📸 사진과 함께하는 풍부한 기록"}),h.jsx("li",{children:"🌍 개인 기록 + 시대적 맥락 통합"}),h.jsx("li",{children:"🤖 AI 기반 추억 분석 및 큐레이션"}),h.jsx("li",{children:"☁️ 100년간 안전한 클라우드 보관"})]})]})})]})})};function r4({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{d:"M11.25 4.533A9.707 9.707 0 0 0 6 3a9.735 9.735 0 0 0-3.25.555.75.75 0 0 0-.5.707v14.25a.75.75 0 0 0 1 .707A8.237 8.237 0 0 1 6 18.75c1.995 0 3.823.707 5.25 1.886V4.533ZM12.75 20.636A8.214 8.214 0 0 1 18 18.75c.966 0 1.89.166 2.75.47a.75.75 0 0 0 1-.708V4.262a.75.75 0 0 0-.5-.707A9.735 9.735 0 0 0 18 3a9.707 9.707 0 0 0-5.25 1.533v16.103Z"}))}const s4=x.forwardRef(r4);function i4({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{fillRule:"evenodd",d:"M6.75 2.25A.75.75 0 0 1 7.5 3v1.5h9V3A.75.75 0 0 1 18 3v1.5h.75a3 3 0 0 1 3 3v11.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V7.5a3 3 0 0 1 3-3H6V3a.75.75 0 0 1 .75-.75Zm13.5 9a1.5 1.5 0 0 0-1.5-1.5H5.25a1.5 1.5 0 0 0-1.5 1.5v7.5a1.5 1.5 0 0 0 1.5 1.5h13.5a1.5 1.5 0 0 0 1.5-1.5v-7.5Z",clipRule:"evenodd"}))}const o4=x.forwardRef(i4);function a4({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{d:"M18.375 2.25c-1.035 0-1.875.84-1.875 1.875v15.75c0 1.035.84 1.875 1.875 1.875h.75c1.035 0 1.875-.84 1.875-1.875V4.125c0-1.036-.84-1.875-1.875-1.875h-.75ZM9.75 8.625c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v11.25c0 1.035-.84 1.875-1.875 1.875h-.75a1.875 1.875 0 0 1-1.875-1.875V8.625ZM3 13.125c0-1.036.84-1.875 1.875-1.875h.75c1.036 0 1.875.84 1.875 1.875v6.75c0 1.035-.84 1.875-1.875 1.875h-.75A1.875 1.875 0 0 1 3 19.875v-6.75Z"}))}const l4=x.forwardRef(a4);function u4({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{d:"M17.004 10.407c.138.435-.216.842-.672.842h-3.465a.75.75 0 0 1-.65-.375l-1.732-3c-.229-.396-.053-.907.393-1.004a5.252 5.252 0 0 1 6.126 3.537ZM8.12 8.464c.307-.338.838-.235 1.066.16l1.732 3a.75.75 0 0 1 0 .75l-1.732 3c-.229.397-.76.5-1.067.161A5.23 5.23 0 0 1 6.75 12a5.23 5.23 0 0 1 1.37-3.536ZM10.878 17.13c-.447-.098-.623-.608-.394-1.004l1.733-3.002a.75.75 0 0 1 .65-.375h3.465c.457 0 .81.407.672.842a5.252 5.252 0 0 1-6.126 3.539Z"}),x.createElement("path",{fillRule:"evenodd",d:"M21 12.75a.75.75 0 1 0 0-1.5h-.783a8.22 8.22 0 0 0-.237-1.357l.734-.267a.75.75 0 1 0-.513-1.41l-.735.268a8.24 8.24 0 0 0-.689-1.192l.6-.503a.75.75 0 1 0-.964-1.149l-.6.504a8.3 8.3 0 0 0-1.054-.885l.391-.678a.75.75 0 1 0-1.299-.75l-.39.676a8.188 8.188 0 0 0-1.295-.47l.136-.77a.75.75 0 0 0-1.477-.26l-.136.77a8.36 8.36 0 0 0-1.377 0l-.136-.77a.75.75 0 1 0-1.477.26l.136.77c-.448.121-.88.28-1.294.47l-.39-.676a.75.75 0 0 0-1.3.75l.392.678a8.29 8.29 0 0 0-1.054.885l-.6-.504a.75.75 0 1 0-.965 1.149l.6.503a8.243 8.243 0 0 0-.689 1.192L3.8 8.216a.75.75 0 1 0-.513 1.41l.735.267a8.222 8.222 0 0 0-.238 1.356h-.783a.75.75 0 0 0 0 1.5h.783c.042.464.122.917.238 1.356l-.735.268a.75.75 0 0 0 .513 1.41l.735-.268c.197.417.428.816.69 1.191l-.6.504a.75.75 0 0 0 .963 1.15l.601-.505c.326.323.679.62 1.054.885l-.392.68a.75.75 0 0 0 1.3.75l.39-.679c.414.192.847.35 1.294.471l-.136.77a.75.75 0 0 0 1.477.261l.137-.772a8.332 8.332 0 0 0 1.376 0l.136.772a.75.75 0 1 0 1.477-.26l-.136-.771a8.19 8.19 0 0 0 1.294-.47l.391.677a.75.75 0 0 0 1.3-.75l-.393-.679a8.29 8.29 0 0 0 1.054-.885l.601.504a.75.75 0 0 0 .964-1.15l-.6-.503c.261-.375.492-.774.69-1.191l.735.267a.75.75 0 1 0 .512-1.41l-.734-.267c.115-.439.195-.892.237-1.356h.784Zm-2.657-3.06a6.744 6.744 0 0 0-1.19-2.053 6.784 6.784 0 0 0-1.82-1.51A6.705 6.705 0 0 0 12 5.25a6.8 6.8 0 0 0-1.225.11 6.7 6.7 0 0 0-2.15.793 6.784 6.784 0 0 0-2.952 3.489.76.76 0 0 1-.036.098A6.74 6.74 0 0 0 5.251 12a6.74 6.74 0 0 0 3.366 5.842l.009.005a6.704 6.704 0 0 0 2.18.798l.022.003a6.792 6.792 0 0 0 2.368-.004 6.704 6.704 0 0 0 2.205-.811 6.785 6.785 0 0 0 1.762-1.484l.009-.01.009-.01a6.743 6.743 0 0 0 1.18-2.066c.253-.707.39-1.469.39-2.263a6.74 6.74 0 0 0-.408-2.309Z",clipRule:"evenodd"}))}const c4=x.forwardRef(u4);function h4({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{d:"M11.47 3.841a.75.75 0 0 1 1.06 0l8.69 8.69a.75.75 0 1 0 1.06-1.061l-8.689-8.69a2.25 2.25 0 0 0-3.182 0l-8.69 8.69a.75.75 0 1 0 1.061 1.06l8.69-8.689Z"}),x.createElement("path",{d:"m12 5.432 8.159 8.159c.03.03.06.058.091.086v6.198c0 1.035-.84 1.875-1.875 1.875H15a.75.75 0 0 1-.75-.75v-4.5a.75.75 0 0 0-.75-.75h-3a.75.75 0 0 0-.75.75V21a.75.75 0 0 1-.75.75H5.625a1.875 1.875 0 0 1-1.875-1.875v-6.198a2.29 2.29 0 0 0 .091-.086L12 5.432Z"}))}const d4=x.forwardRef(h4),J0=[{name:"홈",href:"/",icon:sN,activeIcon:d4},{name:"타임라인",href:"/timeline",icon:Xo,activeIcon:o4},{name:"일기",href:"/diary",icon:zw,activeIcon:s4},{name:"분석",href:"/analytics",icon:Ww,activeIcon:l4},{name:"설정",href:"/settings",icon:pp,activeIcon:c4}];function f4(){const t=sa(),e=ia(),{user:n,isDemoMode:r,setDemoMode:s}=ws(),[i,o]=x.useState(!1),l=p=>p==="/"?t.pathname==="/":t.pathname.startsWith(p),u=async()=>{try{await Vw(),o(!1),s(!1),e("/")}catch(p){console.error("로그아웃 실패:",p)}},c=async()=>{try{await Lw(),s(!1)}catch(p){console.error("로그인 실패:",p)}};return h.jsxs("nav",{className:"bg-white shadow-sm border-b border-gray-200",children:[h.jsx("div",{className:"container mx-auto px-4",children:h.jsxs("div",{className:"flex items-center justify-between h-16",children:[h.jsxs(sn,{to:"/",className:"flex items-center space-x-2",children:[h.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:h.jsx("span",{className:"text-white font-bold text-sm",children:"M"})}),h.jsx("span",{className:"text-xl font-bold text-gray-900",children:"ME.STORY"})]}),h.jsx("div",{className:"hidden md:flex items-center space-x-1",children:J0.map(p=>{const m=l(p.href),g=m?p.activeIcon:p.icon;return h.jsxs(sn,{to:p.href,className:`flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-colors ${m?"bg-blue-100 text-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:[h.jsx(g,{className:"w-5 h-5"}),h.jsx("span",{children:p.name})]},p.name)})}),h.jsx("div",{className:"hidden md:flex items-center relative",children:r?h.jsxs("button",{onClick:c,className:"flex items-center space-x-2 bg-gradient-to-r from-blue-500 to-purple-600 text-white px-4 py-2 rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-200 shadow-md hover:shadow-lg",children:[h.jsx(q0,{className:"w-5 h-5"}),h.jsx("span",{className:"text-sm font-medium",children:"Google 로그인"})]}):h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:()=>o(!i),className:"flex items-center space-x-2 text-gray-600 hover:text-gray-900 p-2 rounded-lg hover:bg-gray-100",children:[n!=null&&n.photoURL?h.jsx("img",{src:n.photoURL,alt:n.displayName||"User",className:"w-8 h-8 rounded-full"}):h.jsx(q0,{className:"w-8 h-8"}),h.jsx("span",{className:"text-sm font-medium",children:(n==null?void 0:n.displayName)||"User"})]}),i&&h.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[h.jsxs("div",{className:"px-4 py-2 border-b border-gray-100",children:[h.jsx("p",{className:"text-sm font-medium text-gray-900",children:n==null?void 0:n.displayName}),h.jsx("p",{className:"text-xs text-gray-500",children:n==null?void 0:n.email})]}),h.jsxs("button",{onClick:u,className:"w-full flex items-center space-x-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[h.jsx($w,{className:"w-4 h-4"}),h.jsx("span",{children:"로그아웃"})]})]})]})})]})}),h.jsx("div",{className:"md:hidden border-t border-gray-200",children:h.jsxs("div",{className:"flex items-center justify-around py-2",children:[J0.slice(0,4).map(p=>{const m=l(p.href),g=m?p.activeIcon:p.icon;return h.jsxs(sn,{to:p.href,className:`flex flex-col items-center space-y-1 px-2 py-2 text-xs font-medium ${m?"text-blue-600":"text-gray-600"}`,children:[h.jsx(g,{className:"w-5 h-5"}),h.jsx("span",{children:p.name})]},p.name)}),h.jsxs(sn,{to:"/settings",className:`flex flex-col items-center space-y-1 px-2 py-2 text-xs font-medium ${l("/settings")?"text-blue-600":"text-gray-600"}`,children:[h.jsx(pp,{className:"w-5 h-5"}),h.jsx("span",{children:"설정"})]})]})}),i&&h.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>o(!1)})]})}const p4=()=>h.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:h.jsxs("div",{className:"text-center",children:[h.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),h.jsx("p",{className:"text-gray-600",children:"ME.STORY 로딩 중..."})]})}),m4=()=>{const{isDemoMode:t}=ws();return h.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t&&h.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white text-center py-2 text-sm",children:"🚀 데모 모드로 체험 중입니다. 실제 서비스를 이용하려면 Google 로그인을 해주세요."}),h.jsx(f4,{}),h.jsx("main",{className:"container mx-auto px-4 py-8",children:h.jsxs(zT,{children:[h.jsx(no,{path:"/",element:h.jsx($P,{})}),h.jsx(no,{path:"/timeline",element:h.jsx(YP,{})}),h.jsx(no,{path:"/diary/:date?",element:h.jsx(QP,{})}),h.jsx(no,{path:"/settings",element:h.jsx(JP,{})})]})})]})},g4=()=>{const{user:t,loading:e,isDemoMode:n}=ws();return e?h.jsx(p4,{}):!t&&!n?h.jsx(n4,{}):h.jsx(FA,{children:h.jsx(m4,{})})};function v4(){return h.jsx(PA,{children:h.jsx(QT,{children:h.jsx(g4,{})})})}nh.createRoot(document.getElementById("root")).render(h.jsx(uv.StrictMode,{children:h.jsx(v4,{})}));
//# sourceMappingURL=index-CUMz4-IS.js.map
